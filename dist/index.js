import"antd/dist/antd.css";import{jsx as o,jsxs as u,Fragment as de}from"react/jsx-runtime";import{Tabs as cr,message as D,Input as dr,Select as Pn,Button as mr,Divider as ur,Drawer as pr,Menu as fr,Col as hr,Checkbox as st,Row as gr,List as ut,Tooltip as Ht,Layout as Tt,Skeleton as yr,Image as _r,Empty as an,Card as Nr,Modal as vr}from"antd";import{useRequest as He,useInfiniteScroll as xr,useThrottleFn as br,useDebounceFn as wr}from"ahooks";import Er from"axios";import Ar from"storages";import O from"clsx";import*as S from"react";import Ve,{forwardRef as Ln,createContext as Cr,useContext as Sr,useReducer as Ir,useMemo as k,useState as _,memo as Ye,useCallback as Ae,useEffect as L}from"react";import g from"bignumber.js";import{useSearchParams as Fn,useRouter as qt,usePathname as kr}from"next/navigation";import Se,{useModal as q}from"@ebay/nice-modal-react";import{isEqual as Tr}from"lodash-es";import Pr from"rc-virtual-list";import{QuestionCircleOutlined as Lr,InfoCircleOutlined as Mn}from"@ant-design/icons";import Fr from"next/link";import I from"moment";import Ne from"aelf-sdk";import{useUpdateEffect as Mr,useMount as $r}from"react-use";import{DatePicker as Rr}from"antd-mobile";var Dr={custom__tabs:"ExploreTab_custom__tabs__0Jes-"};function Br(e){return o(cr,{...e,className:Dr.custom__tabs})}const Or=["probability/catsRank"],Ue="Something went wrong. Please try again later.",Qr="User authorisation failed. Please authorise the operation before you continue.";class M{constructor(){this.store={}}static getInstance(){return M.instance||(M.instance=new M),M.instance}getStore(){return this.store}setStore(t,n){this.store[t]=n}getValue(t){return this.store[t]}}let Gt=class{constructor(t){this.baseConfig={timeout:6e4},this.instance=Er.create(Object.assign({},this.baseConfig,t)),this.instance.interceptors.request.use(async n=>(n.baseURL,n),n=>(console.error(`something were wrong when fetch ${t?.url}`,n),Promise.reject(n))),this.instance.interceptors.response.use(n=>{const r=n.data,{code:a,data:i,message:s}=n.data;if(t.baseURL?.includes("cms"))return i;if(t.baseURL?.includes("connect"))return r;switch(a){case"20000":return i;case"20001":return{};case"50000":return D.error(s),Promise.reject(s);default:return D.error(s),Promise.reject(s)}},n=>{let r="";switch(n?.response?.status){case 400:r="Bad Request";break;case 401:localStorage.removeItem(Ar.accountInfo),r=Qr;break;case 404:r="Not Found";break;case 500:case 501:case 502:case 503:case 504:r=`${n?.response?.status}: something went wrong in server`;break;default:r=`${n?.response?.status?n?.response?.status+": ":""}something went wrong, please try again later`;break}if(t.baseURL?.includes("connect"))return Promise.reject(r);const a=n?.response?.config?.url;return(!a||!Or.includes(a))&&D.error(r),Promise.reject(r)})}resetBaseUrl(t){this.instance.defaults.baseURL=`${t}api`}async request(t){return this.instance.request(t)}get(t,n){return this.instance.get(t,n)}post(t,n,r){return this.instance.post(t,n,r)}put(t,n,r){return this.instance.put(t,n,r)}delete(t,n){return this.instance.delete(t,n)}};console.log(M.getInstance().getStore());const zt="";new Gt({baseURL:`${zt}/cms`});new Gt({baseURL:`${zt}/connect`,headers:{"Content-Type":"application/x-www-form-urlencoded"}});const be=new Gt({baseURL:zt}),Vr={baseURL:"/schrodingerai/api"},jr=async e=>be.post("app/trait/nft-collection-traits-info",{id:e,skipCount:0,maxResultCount:128}),Ur=async e=>be.get("app/trait/nft-collection-generation-info",{params:{id:e}}),Wr=async e=>be.post("probability/catsRank",e,Vr),Hr=async e=>be.post("app/nft/composite-nft-infos",e),qr=async e=>be.get("app/tokens/market-data",{params:e}),Gr=async()=>be.get("app/seed/transaction-fee"),$n=async e=>be.get("app/nft/nft-for-sale",{params:e}),zr=async e=>be.get("app/market/nft-listings",{params:e});function Jt(){const{data:e}=He(()=>qr({symbol:"ELF"}),{cacheKey:"elf-to-dollar-rate",staleTime:3e5});return{ELFToDollarRate:e?.price||0}}var lt={input:"style_input__L31tG","forest-input-medium":"style_forest-input-medium__-QH3J","forest-input-default":"style_forest-input-default__pDUGE","forest-input-large":"style_forest-input-large__Yvf1X","forest-area-medium":"style_forest-area-medium__L2uXs","forest-area-default":"style_forest-area-default__HPZj1","ant-input-suffix":"style_ant-input-suffix__xgRxY","ant-input-clear-icon":"style_ant-input-clear-icon__omhVU"};const Jr={medium:lt["forest-input-medium"],default:lt["forest-input-default"],large:lt["forest-input-large"]},Kr=e=>{if(e.disabled)return"";switch(e.status){case"error":return"border--err";case"warning":return"";default:return"hover-color"}};function Yr(e,t){return o(dr,{...e,ref:t,size:"middle",className:O(Kr({disabled:e.disabled,status:e.status}),lt.input,Jr[e.size||"default"],e.className)})}var Fe=Ve.memo(Ln(Yr)),on;function Pt(){return Pt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Pt.apply(null,arguments)}var Rn=function(t){return S.createElement("svg",Pt({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 18 18"},t),on||(on=S.createElement("g",{stroke:"#5C6764",strokeLinejoin:"round",strokeWidth:1.5},S.createElement("path",{d:"M8.438 14.063a5.625 5.625 0 1 0 0-11.25 5.625 5.625 0 0 0 0 11.25Z"}),S.createElement("path",{strokeLinecap:"round",d:"m12.938 12.938 2.812 2.812"}))))},sn;function Lt(){return Lt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Lt.apply(null,arguments)}var Dn=function(t){return S.createElement("svg",Lt({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 18 18"},t),sn||(sn=S.createElement("g",{stroke:"#5C6764",strokeLinecap:"round",strokeWidth:1.6},S.createElement("path",{d:"m4.404 13.596 9.193-9.192M4.404 4.404l9.193 9.192"}))))};function Zr(e,t){return o(Fe,{placeholder:"Search a collection name",...e,ref:t,prefix:o(Rn,{}),allowClear:{clearIcon:o(Dn,{})}})}var Xr=Ln(Zr),ea={collection__search:"styles-module_collection__search__xeG-C",collapsed__button:"styles-module_collapsed__button__Mx1Dr",collapsed__text:"styles-module_collapsed__text__KVUzi",size_container:"styles-module_size_container__g9yT3","btn-icon":"styles-module_btn-icon__LpT2W",active:"styles-module_active__yEjpX"},ta={"base-items-select":"index_base-items-select__G5PyW"},$e={"custom-popup":"index_custom-popup__WhC70","custom-select":"index_custom-select__mQ-IV","forest-select-medium":"index_forest-select-medium__a3RE3","forest-select-default":"index_forest-select-default__IS2-4","forest-select-large":"index_forest-select-large__CSVYg","select-status-error":"index_select-status-error__klfLa"};const{Option:na}=Pn;function Kt(e){const{children:t}=e;return o(na,{...e,children:t})}function Yt(e){const{className:t,suffixIcon:n,popupClassName:r,children:a,disabled:i,...s}=e,l={medium:$e["forest-select-medium"],default:$e["forest-select-default"],large:$e["forest-select-large"]};return o(Pn,{...s,size:"middle",className:O($e["custom-select"],l[e.size||"default"],e.status==="error"&&!e.disabled&&$e["select-status-error"],t),disabled:i,popupClassName:O($e["custom-popup"],r),children:a})}function ra({dataSource:e,...t}){return o(Yt,{className:ta["base-items-select"],getPopupContainer:n=>n,...t,children:e?.data?.map?.(n=>o(Kt,{value:n.value,children:n.label},n.value))})}var T;(function(e){e.Checkbox="Checkbox",e.Range="Range",e.SearchCheckbox="SearchCheckbox",e.Single="Single",e.Multiple="Multiple"})(T||(T={}));var pt;(function(e){e.large="large",e.small="small",e.details="details"})(pt||(pt={}));const ln="sorting",Ft={key:ln,title:ln,type:T.Single,data:[{value:"Low to High",label:"Price: Low to High"},{value:"High to Low",label:"Price: High to Low"},{value:"Recently Listed",label:"Recently Listed"}]};var x;(function(e){e.Status="Status",e.Chain="Chain",e.Symbol="Symbol",e.Price="Price",e.Generation="Generation",e.Traits="Traits",e.ActivityType="ActivityType",e.Rarity="Rarity",e.Mine="Mine",e.Collections="Collections"})(x||(x={}));var cn;(function(e){e[e.FT=0]="FT",e[e.NFT=1]="NFT"})(cn||(cn={}));var dn;(function(e){e[e["Buy Now"]=1]="Buy Now",e[e["My Items"]=2]="My Items",e[e["On Auction"]=3]="On Auction",e[e["Has Offers"]=4]="Has Offers"})(dn||(dn={}));var Mt;(function(e){e.nft="nft",e.collection="collection"})(Mt||(Mt={}));var mn;(function(e){e[e.MAINNET=1]="MAINNET",e[e.KOVAN=42]="KOVAN",e[e.BSC_MAINNET=56]="BSC_MAINNET",e[e.BSC_TESTNET=97]="BSC_TESTNET",e[e.HECO_MAINNET=128]="HECO_MAINNET",e[e.HECO_TESTNET=256]="HECO_TESTNET",e[e.OEC_MAINNET=66]="OEC_MAINNET",e[e.OEC_TESTNET=65]="OEC_TESTNET",e[e.POLYGON_MAINNET=137]="POLYGON_MAINNET",e[e.POLYGON_TESTNET=80001]="POLYGON_TESTNET"})(mn||(mn={}));var V;(function(e){e.MAIN_NET="AELF",e.TDVV_NET="tDVV",e.TDVW_NET="tDVW"})(V||(V={}));var un;function $t(){return $t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$t.apply(null,arguments)}var aa=function(t){return S.createElement("svg",$t({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24"},t),un||(un=S.createElement("g",{stroke:"#051D17",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6},S.createElement("path",{d:"M4 8.125h2.302m13.698 0h-8.68M4 15.875h8.463m7.537 0h-2.317"}),S.createElement("circle",{cx:15.25,cy:15.875,r:2.45}),S.createElement("circle",{cx:8.75,cy:8.125,r:2.45}))))},ia={"filter-btn":"style_filter-btn__ZbJWF","btn-text":"style_btn-text__CyTMp","items-side-menu":"style_items-side-menu__pb5dJ","clear-all":"style_clear-all__mG4-G",close__button:"style_close__button__H9WKP","elf-dropdown-phone-dark":"style_elf-dropdown-phone-dark__3JkT9","fixed-left":"style_fixed-left__BJphI","collapsed-wrapper":"style_collapsed-wrapper__XwmaN"};function oa({onClick:e,badge:t,showBadge:n}){return u("div",{className:ia["filter-btn"],onClick:e,children:[o(aa,{className:"w-[24px] h-[24px]"}),n?o("span",{className:" absolute left-8 -top-2 px-1.5 bg-textPrimary text-textWhite text-xs font-medium rounded-3xl",children:t}):null]})}function sa(e){const{size:t=pt.small,hiddenFilter:n,hiddenSize:r,collapsed:a,searchParams:i,selectProps:s,sizeChange:l,collapsedChange:c,selectTagCount:d,extraInfo:m}=e;return u(de,{children:[u("div",{className:ea.collection__search,children:[n?null:u("div",{className:O("flex justify-between items-center","mr-[12px]","w-auto"),children:[o(oa,{onClick:c,badge:d||"",showBadge:!!d&&!0}),null]}),o("div",{className:O("flex-1",!1,"search-bar"),children:o(Xr,{...i})}),!1,!1]}),!r&&o("div",{className:"flex mb-[16px] base-select",children:o(ra,{className:"flex-1",dataSource:Ft,...s})})]})}var _e;(function(e){e[e["Buy Now"]=1]="Buy Now",e[e["My Items"]=2]="My Items",e[e["On Auction"]=3]="On Auction",e[e["Has Offers"]=4]="Has Offers"})(_e||(_e={}));var ft;(function(e){e[e.FT=0]="FT",e[e.NFT=1]="NFT"})(ft||(ft={}));const pn=e=>e===""?void 0:new g(e).toNumber(),Bn=(e,t)=>{const n=e.Status.data.map(c=>c.value),r=e.Generation.data.map(c=>c.value),a=e.Rarity?.data?.map?.(c=>c.value),i=l(),s={ChainList:e.Chain.data.map(c=>c.value),SymbolTypeList:e.Symbol.data.map(c=>c.value),PriceLow:pn(e.Price.data[0].min),PriceHigh:pn(e.Price.data[0].max),HasListingFlag:n.includes(_e["Buy Now"]),HasAuctionFlag:n.includes(_e["On Auction"]),HasOfferFlag:n.includes(_e["Has Offers"])};return r?.length&&Object.assign(s,{generation:r}),i?.length&&Object.assign(s,{traits:i}),a?.length&&Object.assign(s,{RarityList:a}),t&&["PriceLow","PriceHigh","HasListingFlag","HasAuctionFlag","HasOfferFlag"].forEach(c=>delete s[c]),s;function l(){const c=Object.keys(e).filter(m=>m.includes(x.Traits));if(!c.length)return null;const d=[];return c.forEach(m=>{const[,p]=m.split("-");!p||!e?.[m]?.data?.length||d.push({key:p,values:e[m].data.map(f=>f.value)})}),d}};function C(e,t){const{decimalPlaces:n=4,roundingMode:r=g.ROUND_DOWN}=t||{},a=g.isBigNumber(e)?e:new g(e);if(a.isNaN())return`${e}`;if(!a.isEqualTo(0)&&a.lt(1e-4))return"< 0.0001";const i=a.toFixed(n,r);return new g(i).toFormat()}const la=(e,t)=>{const n=[];for(const[r,a]of Object.entries(e)){const{data:i,type:s}=a;if(s===T.Checkbox)i.forEach(l=>{l.disabled||(typeof l=="object"?n.push({type:r,...l}):n.push({type:r,value:l,label:l}))});else if(s===T.Range){const{min:l,max:c}=i[0];if(l||c){const d=l&&c?`${C(l)}-${C(c)}`:(l===0||l)&&!c?`\u2265${C(l)}`:`\u2264${C(c)}`;n.push({type:r,label:`${r===x.Price?"":"Length: "}`+d+`${r===x.Price?" ELF":""}`})}}else s===T.SearchCheckbox&&i.forEach(l=>{l.disabled||n.push({type:r,...l})})}return t&&n.push({type:"search",label:t}),n},ca=e=>({[x.Status]:{type:T.Checkbox,data:[]},[x.Chain]:{type:T.Checkbox,data:[{value:e,label:`SideChain ${e}`,disabled:!0}]},[x.Price]:{type:T.Range,data:[{min:"",max:""}]},[x.Symbol]:{type:T.Checkbox,data:[]},[x.Generation]:{type:T.Checkbox,data:[]},[x.Traits]:{type:T.Checkbox,data:[]}});function da(e){if(!e)return{};const t=JSON.parse(decodeURI(e)),n={};return t?.[x.Traits]?.forEach?.(r=>{const a={type:T.Checkbox,data:(r.values||[]).map(i=>({label:i,value:i}))};n[`${x.Traits}-${r.key}`]=a}),n}const ma=(e,t)=>{const n=[{key:x.Status,title:x.Status,type:T.Checkbox,data:[{value:_e["Buy Now"],label:_e[1]},{value:_e["On Auction"],label:_e[3]}]},{key:x.Chain,title:x.Chain,type:T.Checkbox,data:[{value:t,label:`SideChain ${t}`,disabled:!0}]},{key:x.Price,title:x.Price,type:T.Range,data:[]},{key:x.Symbol,title:x.Symbol,showClearAll:!0,type:T.Checkbox,data:[{value:ft.FT,label:"FT"},{value:ft.NFT,label:"NFT"}]},{key:x.Traits,title:x.Traits,showClearAll:!0,type:T.SearchCheckbox,data:[]},{key:x.Rarity,title:x.Rarity,showClearAll:!0,type:T.Checkbox,data:[]}];return e==="nft"&&(n.splice(3,1),n[0].data.splice(1,1)),n};function Ce(e,t){const{decimalPlaces:n=4,roundingMode:r=g.ROUND_DOWN}=t||{},a=g.isBigNumber(e)?e:new g(e);if(a.isNaN())return`${e}`;const i=a.toFixed(n,r),s=new g(i);return a.comparedTo(0)===0?"$ 0":s.comparedTo(1e-4)===-1?"<$ 0.0001":`$ ${s.toFormat()}`}const H=(e,t)=>{if(typeof e!="number")return e;switch(t){case"day":return e>1?`${C(e)} days`:`${C(e)} day`;default:return e>1?t.endsWith("s")||t.endsWith("x")||t.endsWith("ch")||t.endsWith("sh")?`${C(e)} ${t}es`:t.endsWith("y")?`${C(e)} ${t.slice(0,-1)}ies`:`${C(e)} ${t}s`:`${C(e)} ${t}`}};var ht;(function(e){e.TEST="test",e.DEVELOPMENT="development",e.DEVELOPMENT4="development4",e.PRODUCTION="production"})(ht||(ht={}));const bt={[ht.TEST]:{AELF:"https://explorer-test.aelf.io/",TDVV:"https://explorer-test-side02.aelf.io/",TDVW:"https://explorer-test-side02.aelf.io/"},[ht.PRODUCTION]:{AELF:"https://explorer.aelf.io/",TDVV:"https://tdvv-explorer.aelf.io/",TDVW:"https://tdvv-explorer.aelf.io/"}},ua=e=>{const t=M.getInstance().getValue("env");return console.log("env:",t),{AELF:bt[t].AELF,TDVV:bt[t].TDVV,TDVW:bt[t].TDVW}[e]},gt=e=>{const t=Number(e);return e===""||Number.isNaN(t)?"-":`${t.toLocaleString(void 0,{maximumFractionDigits:8})}`},pa=(e,t,n)=>{if(!t)return t;let r=t;const a="ELF_",i=`_${n||e?.curChain}`;return t.startsWith(a)||(r=`${a}${r}`),t.endsWith(i)||(r=`${r}${i}`),r};function fa(e){const t={"Weapon(Left Hand)":"Weapon","Accessory(Right Hand)":"Accessory",Wing:"Wings",Moustauch:"Mustache",Mustaches:"Mustache"},n=[e.slice(0,3).map(a=>t[a.key.trim()]||a.key.replace(/\(.*\)/,"").trim()),e.slice(0,3).map(a=>a.value.trim())],r=e.length>3?[e.slice(3).map(a=>t[a.key.trim()]||a.key.replace(/\(.*\)/,"").trim()),e.slice(3).map(a=>a.value.trim())]:[];return[n,r]}const qe=e=>new Promise(t=>{setTimeout(()=>{t()},e)});function ha(e,t,n){let r=null;try{r=new URL(e)}catch{return[e]}if(r.host.toLowerCase()==="ipfs.io"){const a=r.pathname.replace("/ipfs/","");return[`${t}/${a}`,`${n}/${a}`,e]}if(r.protocol.toLowerCase()==="ipfs:"){const a=e.match(/^ipfs:(\/\/)?(.*)$/i)?.[2];return[`${t}/${a}`,`https://ipfs.io/ipfs/${a}`]}return[e]}const ga=(e,t)=>{let n=String(e||"").replaceAll(",","");const r=n.indexOf("."),a=n.lastIndexOf(".");r>-1&&r!==a&&(n=n.slice(0,-1));const i=new g(n);if((i.e||0)>t-1)return n.slice(0,t);const[,s]=n.split("."),l=4;return i.gt(0)?(s?.length||0)>=+l?i.toFixed(+l,g.ROUND_DOWN):n:""},Ge=new g(0);function ct(e,t=18){if(!e)return Ge;const n=g.isBigNumber(e)?e:new g(e||"");return n.isNaN()?Ge:typeof t=="string"&&t.length>10?n.div(t):n.div(`1e${t}`)}function ge(e,t=18){if(!e)return Ge;const n=g.isBigNumber(e)?e:new g(e||"");return n.isNaN()?Ge:typeof t=="string"&&t.length>10?n.times(t):n.times(`1e${t||18}`)}const ya=e=>{const t=new Date().getTime(),n=e-t;if(n<0)return"in 1 minute";const r=n/2592e6,a=n/864e5,i=n/36e5,s=n/6e4;return r>=1?`in ${H(Math.floor(r),"month")}`:a>=1?`in ${H(Math.floor(a),"day")}`:i>=1?`in ${H(Math.floor(i),"hour")}`:s>=1?`in ${H(Math.floor(s),"minute")}`:"in 1 minute"},_a=e=>{const t=e?.nftSymbol&&e.nftSymbol.split("-")[1];if(t){const n=e?.totalQuantity;return t!=="0"&&n>1}else console.error("Invalid symbol.")},le=e=>!_a(e);function Zt(e,t,n){const r=n&&n.toUpperCase()||V.MAIN_NET,a=ua(r);switch(t){case"transaction":return`${a}tx/${e}`;case"token":return`${a}token/${e}`;case"block":return`${a}block/${e}`;case"address":default:return`${a}address/${e}`}}const et={initialized:"INITIALIZED",destroy:"DESTROY",setWallet:"setWallet",setLoginStatus:"setLoginStatus",setCurChain:"setCurChain",setAelfInfo:"setAelfInfo"},On={chain:"tDVW"},Qn=Cr(On);function Ie(){return Sr(Qn)}function Na(e,{type:t,payload:n}){switch(t){case et.setAelfInfo:{const r=n.aelfInfo;return r?(M.getInstance().setStore("aelfInfo",r),Object.assign({},e,{aelfInfo:r})):e}case et.setWallet:{const r=n.wallet;return r?Object.assign({},e,{wallet:r}):e}case et.setCurChain:{const r=n.chain;if(!r)return e;const a=r==="tDVW"?"https://test.eforest.finance/":"https://www.eforest.finance/";return be.resetBaseUrl(a),Object.assign({},e,{chain:r})}case et.setLoginStatus:{const r=n.isLogin;return Object.assign({},e,{isLogin:r})}default:return Object.assign({},e,n)}}function Go({children:e}){const[t,n]=Ir(Na,On),r=k(()=>[{...t},{dispatch:n}],[t]);return o(Qn.Provider,{value:r,children:o(Se.Provider,{children:e})})}function va(e){const t=String(e).endsWith("-SEED-0")?"seed":"nft",[{chain:n},{dispatch:r}]=Ie(),a=Fn().get("filterParams"),i=da(a),s=ca(n),l=ma(t,n),[c,d]=_(Object.assign({},s,i)),m=()=>{Tr(s,c)||d(s)},{data:p}=He(()=>jr(e),{refreshDeps:[e],cacheKey:`all-traits-info-${e}`,staleTime:3e5}),{data:f}=He(()=>Ur(e),{refreshDeps:[e],cacheKey:`all-generation-info-${e}`,staleTime:3e5}),{data:v}=He(()=>{const b=e.endsWith("-SGRTEST-0")||e.endsWith("-SGR-0")?[{rarity:"Diamond"},{rarity:"Emerald"},{rarity:"Platinum"},{rarity:"Gold"},{rarity:"Silver"},{rarity:"Bronze"}]:[];return Promise.resolve({items:b})},{refreshDeps:[e]});return{traitsInfo:p,generationInfos:f,rarityInfos:v,filterList:l,filterSelect:c,setFilterSelect:d,onFilterChange:b=>{d(E=>({...E,...b}))},clearAll:m,formatFilterToParams:Bn}}const xa=async(e,t,n)=>{if(!n)return t;const r=t.filter(s=>s.generation===9&&s.traitPairsDictionary?.length>=11);if(!r.length)return t;const a=r.map(s=>{const l=s.traitPairsDictionary;return fa(l)});let i=[];try{i=await Wr({address:pa(e,n),catsTraits:a})}catch(s){console.error(s)}return i?.length&&r.forEach((s,l)=>{const c=i?.[l]?.rank;if(c.rank){let d=`${gt(c.rank)}`;c.total&&(d+=` / ${gt(c.total)}`),s._rankStrForShow=d}}),t},ba=async(e,t,n)=>{const r={...t,generation:["0","9"]},a=await Hr(r);try{const i=await xa(e,a.items,n);a.items=i}catch(i){console.error(i)}return a};function wa({pageSize:e=32,params:t,userWalletAddress:n}){const[{wallet:r,aelfInfo:a},{dispatch:i}]=Ie(),{data:s,loading:l,loadingMore:c,noMore:d}=xr(m=>{const p=m?._page?m._page+1:1;return ba(a,{...t,SkipCount:(p-1)*e,MaxResultCount:e},n).then(f=>({list:f.items,totalCount:f.totalCount,_page:p})).catch(()=>({list:[],totalCount:m?.totalCount||0,_page:p}))},{target:document.getElementById("nft-list"),isNoMore:m=>m?.list.length?m._page*e>m.list.length||m?.list?.length>=m?.totalCount:!0,reloadDeps:[n,t]});return{data:s,loading:l,loadingMore:c,noMore:d}}var Be={"filter-btn":"style-module_filter-btn__bRjKP","btn-text":"style-module_btn-text__hgUmJ","items-side-menu":"style-module_items-side-menu__mul-n","clear-all":"style-module_clear-all__Yz9wz",close__button:"style-module_close__button__XD3YH","elf-dropdown-phone-dark":"style-module_elf-dropdown-phone-dark__oZ7s1","fixed-left":"style-module_fixed-left__F8wjG","collapsed-wrapper":"style-module_collapsed-wrapper__BSkvp",btn_clear:"style-module_btn_clear__9TWQG"},Ea={close:"index-module_close__me7Pp"},fn;function Rt(){return Rt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Rt.apply(null,arguments)}var Vn=function(t){return S.createElement("svg",Rt({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 18 18"},t),fn||(fn=S.createElement("g",{stroke:"#5C6764",strokeLinecap:"round",strokeWidth:1.6},S.createElement("path",{d:"m4.404 13.596 9.193-9.192M4.404 4.404l9.193 9.192"}))))};function Aa({size:e="xl",onClose:t}){const n={small:"",xs:"",xl:"w-[24px] h-[24px] ml-[16px]"};return o(Vn,{className:`${Ea.close} ${n[e]}`,onClick:t})}var hn;function Dt(){return Dt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Dt.apply(null,arguments)}var Ca=function(t){return S.createElement("svg",Dt({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24"},t),hn||(hn=S.createElement("g",{stroke:"#051D17",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6},S.createElement("path",{d:"M17.094 14.547 12 9.453M12 9.453l-5.094 5.094"}))))},Re={button:"index-module_button__yslqU","forest-btn-ultra":"index-module_forest-btn-ultra__7OT5F","forest-btn-mini":"index-module_forest-btn-mini__NZWdL","button-full":"index-module_button-full__UIRe7"};function Sa(e){const{children:t,size:n="large",isFull:r,millisecondOfThrottle:a=0}=e,i=["ultra","mini"],s={ultra:Re["forest-btn-ultra"],mini:Re["forest-btn-mini"]},l=n&&i.includes(n),{run:c}=br(d=>{e.onClick&&e.onClick(d)},{wait:a});return o(mr,{...e,size:l?"middle":n,onClick:c,className:`${Re.button} ${l?s[n]:""} ${r&&Re["button-full"]} ${e.className}`,children:t})}var Y=Ve.memo(Sa);function Ia(e){return o(fr,{...e,expandIcon:o("div",{children:o(Ca,{className:O(Be.menu__expand__icon)})}),className:`${Be["items-side-menu"]}`,selectable:!1,mode:"inline",getPopupContainer:t=>t})}const ka=({showDropMenu:e,items:t,onCloseHandler:n,doneChange:r,clearAll:a,titleTxt:i="Filter",...s})=>{const l=k(()=>u(de,{children:[o(ur,{className:"!m-0 !mt-0 border-box"}),u("div",{className:"flex items-center px-2 py-4",children:[o(Y,{size:"ultra",className:Be.btn_clear,onClick:a,children:"Clear All"}),o(Y,{size:"ultra",className:Be.btn_clear,type:"primary",onClick:r,children:"Done"})]})]}),[a,r]);return o(pr,{className:`${Be["elf-dropdown-phone-dark"]} ${s.wrapClassName||""}`,placement:"top",maskClosable:!1,title:u("div",{className:"flex items-center justify-between pr-[20px]",children:[o("span",{className:"text-[24px] leading-[32px] font-medium text-[var(--text-item)]",children:i}),o(Aa,{onClose:n})]}),closeIcon:null,push:!1,open:e,height:"100%",footer:l,headerStyle:{paddingLeft:16,height:64,paddingTop:24,paddingBottom:24,paddingRight:0},bodyStyle:{padding:0},footerStyle:{padding:0,border:"none"},onClose:n,children:o("div",{className:"px-[8px] pt-[16px]",children:o(Ia,{items:t,...s})})})};var Ta={checkbox:"style-module_checkbox__hqb85","clear-all":"style-module_clear-all__HVfEy","range-select-apply":"style-module_range-select-apply__Zjo2N"};function Pa({dataSource:e,defaultValue:t,onChange:n,showSelectAll:r}){const a=Ae(d=>{if(!e)return;const m=e?.data.filter(p=>d.some(f=>f===p.value));n?.({[e.key]:{type:T.Checkbox,data:m}})},[e,n]),i=k(()=>(e?.data||[]).map(d=>u(hr,{className:"px-[8px] py-[16px] !flex justify-between items-center",span:24,children:[o(st,{value:d.value,disabled:d.disabled,children:d.label}),d.extra?o("span",{className:"mr-2 text-sm font-medium text-textSecondary",children:C(d.extra)}):null]},d.value)),[e]),s=k(()=>t?.map(d=>d.value),[t]),l=(e?.data||[]).length>0&&e?.data?.length===s?.length,c=(s||[]).length>0&&(s||[]).length<(e?.data||[]).length;return u("div",{className:"flex flex-col",children:[r?o(st,{className:"!ml-2 text-textPrimary",indeterminate:c,checked:l,onChange:d=>{if(!e)return;const m=d.target.checked?e?.data:[];n?.({[e.key]:{type:T.Checkbox,data:m}})},children:"All"}):null,o(st.Group,{value:s,className:Ta.checkbox,onChange:a,children:o(gr,{children:i})})]})}var La=Ye(Pa),ie={"range-wrapper":"RangeSelect-module_range-wrapper__so5Vh","range-input":"RangeSelect-module_range-input__p0f0E",pricing:"RangeSelect-module_pricing__dqmVH",pricing__text:"RangeSelect-module_pricing__text__ykFAI","range-select":"RangeSelect-module_range-select__N9ZvM","range-button":"RangeSelect-module_range-button__iYmrK","range-select-apply":"RangeSelect-module_range-select-apply__sOec0","range-default-button":"RangeSelect-module_range-default-button__I0GzM","range-input__error":"RangeSelect-module_range-input__error__mo4vM"};function Fa(e){const{defaultValue:t,errorMessage:n,AMOUNT_LENGTH:r=11,minStatus:a,maxStatus:i,decimals:s,prefixIcon:l,onValueChange:c}=e,[d,m]=_(""),[p,f]=_("");L(()=>{m(t?.[0]?.min??""),f(t?.[0]?.max??"")},[t]);const v=N=>{let{value:h}=N.target;if(h.startsWith("-")||h.startsWith("."))return"";h=h.replace(/^0*(\d+(\.\d*)?)$/,"$1");const y=new g(h);if(y.e!==-1&&h.startsWith("0")&&!h.startsWith("0.")&&h!=="0")return"0";if(y.s){const[w,A]=h.split(".");if((y.e||0)>r-1)return h.slice(0,r);if(s===0)return w;if(A?.length>=s)return y.toFixed(+s,g.ROUND_DOWN)}else return!h.startsWith(".")&&h.includes(".")?(h.split(".")[0]+".").slice(0,r):h.slice(0,r);return h},b=N=>{const h=v(N);m(h)},E=N=>{const h=v(N);f(h)};return L(()=>{c?.(d,p)},[d,p,c]),u("div",{className:"w-full",children:[u("div",{className:`${ie["range-wrapper"]} flex justify-between items-center`,children:[l,o(Fe,{className:O(ie["range-input"]),placeholder:"Min",value:d,status:a,onChange:b}),o("span",{className:"text-[var(--color-primary)] text-[16px] leading-[24px] font-medium  ml-[8px] mr-[8px]",children:"to"}),o(Fe,{className:O(ie["range-input"]),placeholder:"Max",value:p,status:i,onChange:E})]}),(a||i)&&o("div",{className:ie["range-input__error"],children:n})]})}var gn,yn;function Bt(){return Bt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Bt.apply(null,arguments)}var Ma=function(t){return S.createElement("svg",Bt({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24"},t),gn||(gn=S.createElement("circle",{cx:12,cy:12,r:11.738,fill:"#fff",stroke:"#DEE2E8",strokeWidth:.525})),yn||(yn=S.createElement("path",{fill:"#266CD3",fillRule:"evenodd",d:"M13.096 7.752a1.476 1.476 0 1 0 0-2.952 1.476 1.476 0 0 0 0 2.952M19.76 12a3.002 3.002 0 1 1-6.004 0 3.002 3.002 0 0 1 6.004 0m-5.19 5.725a1.476 1.476 0 1 1-2.95 0 1.476 1.476 0 0 1 2.95 0M5.54 7.853c-.433 1.145.178 2.443 1.323 2.875.763.28 1.577.127 2.162-.356a1.98 1.98 0 0 1 1.883-.255c.432.153.763.433.992.79l.025.05c.102.153.255.305.458.356a.886.886 0 0 0 1.145-.534.886.886 0 0 0-.534-1.145.84.84 0 0 0-.61 0A2.015 2.015 0 0 1 9.84 8.286l-.026-.051c0-.026 0-.051-.026-.051v-.05C9.61 7.42 9.127 6.81 8.39 6.555a2.163 2.163 0 0 0-2.85 1.297m1.323 5.42c-1.145.432-1.756 1.73-1.323 2.874.432 1.17 1.704 1.756 2.85 1.298.737-.255 1.22-.865 1.398-1.578v-.05c.026 0 .026-.026.026-.052l.025-.05a2.015 2.015 0 0 1 2.544-1.349.84.84 0 0 0 .611 0 .886.886 0 0 0 .534-1.145.886.886 0 0 0-1.145-.534c-.203.051-.356.204-.457.356l-.026.051c-.229.356-.56.636-.992.789a1.98 1.98 0 0 1-1.883-.255 2.2 2.2 0 0 0-2.162-.356",clipRule:"evenodd"})))};function $a({dataSource:e,maxCount:t,AMOUNT_LENGTH:n,decimals:r,defaultValue:a,onChange:i}){const s=r===0||r?r:4,[l,c]=_({...a?.[0]}),[d,m]=_(!0),[,p]=_(!0),[f,v]=_(!1),[b,E]=_(""),[N,h]=_(""),[y,w]=_(""),A=Ae((B,U)=>{if(m(!0),B||E(""),U||h(""),!B&&!U){w("");return}p(!1),c({min:String(B),max:String(U)});const X=new g(B),J=new g(U);if(B&&!X.s||U&&!J.s){B&&!X.s&&E("error"),U&&!J.s&&h("error"),w("Numeric inputs only");return}if(new g(X).gt(J)||new g(J).lt(X)){new g(X).gt(J)&&E("error"),new g(J).lt(X)&&h("error"),w("Min shouldn't be greater than max");return}if(t&&(new g(B).gt(30)||new g(U).gt(30))){new g(B).gt(30)&&E("error"),new g(U).gt(30)&&h("error"),w(`The Symbol Length must be no more than ${t}`);return}E(""),h(""),w(""),m(!1)},[t]);L(()=>{c({...a?.[0]})},[a]);const G=Ae(()=>{if(!l||!e)return;const B={[e.key]:{type:T.Range,data:[l]}};m(!0),v(!0),i?.(B)},[e,i,l]),Z=k(()=>[l],[l]),j=Ae(()=>{if(e&&(JSON.stringify(a)===JSON.stringify([{min:"",max:""}])?m(!0):m(!1),p(!0),c({min:"",max:""}),f)){const B={[e.key]:{type:T.Range,data:[{min:"",max:""}]}};i?.(B),v(!1)}},[e,a,f,i]);return u("div",{className:ie["range-select"],children:[o("div",{className:"mb-[16px] flex",children:o(Fa,{prefixIcon:e?.key.toLowerCase()==="price"&&u("div",{className:ie.pricing,children:[o(Ma,{className:"mr-[8px]"}),o("span",{className:ie.pricing__text,children:"ELF"})]}),minStatus:b,maxStatus:N,AMOUNT_LENGTH:n,errorMessage:y,maxCount:t,decimals:s,defaultValue:Z,onValueChange:A})}),u("div",{className:ie["range-button"],children:[o(Y,{size:"large",className:O(ie["range-select-apply"],ie["range-default-button"]),onClick:j,children:"Clear"}),o(Y,{size:"large",className:O(ie["range-select-apply"],ie["range-primary-button"]),disabled:d,type:"primary",onClick:G,children:"Apply"})]})]})}var Ra=Ye($a),Da={checkbox:"style-module_checkbox__1p713","clear-all":"style-module_clear-all__QtEOL","range-select-apply":"style-module_range-select-apply__a2HzF","search-list":"style-module_search-list__mRW1a"};function jn({dataSource:e=[],values:t=[],parentKey:n,onChange:r}){const[a,i]=_(e.slice(0)),[s,l]=_(!1),c=async p=>{l(!0);const f=p.target.value.trim().toLowerCase();let v=e;f&&(v=e.filter(b=>String(b.value).toLowerCase()===f)),await qe(300),l(!1),i(v)},d=Math.min(a.length,10)*54,m=(p,f)=>{const v=t.findIndex(N=>N===p);let b=[...t];f&&v===-1&&(b=t.concat(p)),!f&&v>-1&&(b=t.slice(0,v).concat(t.slice(v+1)));const E=e?.filter(N=>b.some(h=>h===N.value)).map(N=>({value:N.value,label:N.value}));r?.({[`${x.Traits}-${n}`]:{type:T.Checkbox,data:E}})};return o(ut,{className:Da["search-list"],split:!1,itemLayout:"vertical",loading:s,locale:{emptyText:"No such traits found"},header:o(Fe,{size:"medium",prefix:o(Rn,{}),allowClear:{clearIcon:o(Dn,{})},placeholder:"Search",onChange:c}),children:a.length?o(Pr,{data:a,height:d,itemHeight:54,itemKey:"value",children:p=>o(ut.Item,{extra:C(p.itemsCount),children:o(st,{value:p.value,checked:t.includes(p.value),onChange:f=>{m(f.target.value,f.target.checked)},children:p.value},p.value)})}):null})}const Ba=e=>({[T.Checkbox]:La,[T.Range]:Ra,[T.SearchCheckbox]:jn})[e];function Oa({children:e,...t}){return o(Ht,{...t,children:e})}var Qa=Ye(Oa);const Va=(e,t,n)=>{const r=e.map(a=>{const i=(n?.[`${x.Traits}-${a.key}`]?.data||[]).map(s=>s.value);return{key:a.key,label:u("div",{className:"flex justify-between text-textPrimary",style:{marginRight:"40px"},children:[o("span",{children:a.key}),o("span",{children:a.valueCount})]}),children:[{key:`${a.key}-1`,label:o(jn,{parentKey:a.key,values:i,onChange:t,dataSource:a.values},a.key)}]}});return{key:x.Traits,label:x.Traits,children:r}},ja=(e,t,n)=>(n[x.Collections].data.map(r=>r.value),{key:x.Collections,label:x.Collections,children:[{key:`${x.Collections}-1`,label:o("div",{children:"1"})}]});function Ua({clearAll:e,onClose:t,open:n,traitsInfo:r,generationInfos:a,rarityInfos:i,mineInfos:s,collectionInfos:l,onFilterChange:c,filterSelect:d,filterList:m,mobileMode:p,pcRenderMode:f,toggleOpen:v}){const[{aelfInfo:b}]=Ie(),E=k(()=>{const N=[...m];if(!r?.length){const h=N.findIndex(y=>y.key===x.Traits);h>-1&&N.splice(h,1)}if(!a?.length){const h=N.findIndex(y=>y.key===x.Generation);h>-1&&N.splice(h,1)}if(!s?.length){const h=N.findIndex(y=>y.key===x.Mine);h>-1&&N.splice(h,1)}if(!l?.length){const h=N.findIndex(y=>y.key===x.Collections);h>-1&&N.splice(h,1)}if(!i?.length){const h=N.findIndex(y=>y.key===x.Rarity);h>-1&&N.splice(h,1)}return N?.map(h=>{const y=d[h.key]?.data;if(h.key===x.Traits)return Va(r||[],c,d);if(h.key===x.Collections)return ja(l||[],c,d);h.key===x.Generation&&(h.data=(a||[]).map(A=>({value:`${A.generation}`,label:`${A.generation}`,extra:`${A.generationItemsCount}`}))),h.key===x.Mine&&(h.data=(s||[]).map(A=>({value:`${A.value}`,label:`${A.value}`,extra:"Mine"})));const w=Ba(h.type);return h.key===x.Rarity?(h.data=(i||[]).map(A=>({value:`${A.rarity}`,label:`${A.rarity}`})),{key:x.Rarity,label:u("div",{className:" inline-flex items-center",children:[o("span",{className:" text-sm font-semibold text-textPrimary",children:"Rarity"}),o(Qa,{overlayInnerStyle:{borderRadius:"6px"},title:u("div",{className:" flex flex-col gap-y-1",children:[o("span",{className:" text-textDisable text-xs",children:"Rarity rank by Schr\xF6dinger."}),o("a",{href:b?.officialWebsiteOfSchrodinger,target:"_blank",rel:"noreferrer",children:o("span",{className:" text-xs text-textWhite font-medium cursor-pointer hover:text-brandHover",children:"Learn more"})})]}),children:o(Lr,{className:"text-textSecondary ml-2"})})]}),children:[{key:`${x.Rarity}-1`,label:o(w,{dataSource:h,defaultValue:y,onChange:c,showSelectAll:!0})}]}):{key:h.key,label:h.title,children:[{key:h.key+"-1",label:o(w,{dataSource:h,defaultValue:y,onChange:c,...h.maxCount&&{maxCount:h.maxCount},...h.AMOUNT_LENGTH&&{AMOUNT_LENGTH:h.AMOUNT_LENGTH},...(h.decimals||h.decimals===0)&&{decimals:h.decimals}})}]}})},[d,m,r,a,s,l]);return p?o(ka,{items:E,defaultOpenKeys:Object.values(x),clearAll:()=>{t(),e()},doneChange:t,showDropMenu:n,onCloseHandler:t}):o(Tt.Sider,{collapsed:!n,collapsedWidth:0,width:n?360:0,trigger:null,className:O("!bg-transparent m-0",n?"!mr-8":"!mr-0",Be["fixed-left"])})}var _n={layout:"ExploreItem-module_layout__WdYmc"},re={"items-card-wrapper":"style-module_items-card-wrapper__QZoFT",card__content:"style-module_card__content__boCUv",nft__symbol:"style-module_nft__symbol__JuwE2",token__name:"style-module_token__name__SLVq2",token__price:"style-module_token__price__ZmDtx",token__label:"style-module_token__label__W4OAQ",token__price__text:"style-module_token__price__text__Yd5TH",mark:"style-module_mark__DAawf",item__wrapper:"style-module_item__wrapper__1e8Bb",item__image:"style-module_item__image__v72hD",item_honour:"style-module_item_honour__QW2pI",nft__list_wrapper:"style-module_nft__list_wrapper__i6JYD"},Wa={"img-loading-wrapper":"style-module_img-loading-wrapper__wF1Ef","loading-image-default-wrapper":"style-module_loading-image-default-wrapper__aOmjd","marketplace-mobile":"style-module_marketplace-mobile__JBD9y","img-enhance-wrapper":"style-module_img-enhance-wrapper__3dul-"};function ce({src:e="",alt:t,onError:n,...r}){const[a,i]=_(0),[{aelfInfo:s={}}]=Ie(),l=k(()=>ha(e,s.ipfsToS3ImageURL,s.ipfsToSchrodingerURL),[e,s.ipfsToS3ImageURL,s.ipfsToSchrodingerURL]),c=k(()=>l[a],[a,l]),d=Ae(p=>{const f=a+1;if(!l[f]){n?.(p);return}i(f)},[a,l,n]),m=o(yr.Image,{active:!0,className:O(r.className,"!w-full !h-full")});return o(_r,{loading:"lazy",alt:t,onError:d,placeholder:m,preview:!1,rootClassName:Wa["img-enhance-wrapper"],...r,src:c,fallback:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMIAAADDCAYAAADQvc6UAAABRWlDQ1BJQ0MgUHJvZmlsZQAAKJFjYGASSSwoyGFhYGDIzSspCnJ3UoiIjFJgf8LAwSDCIMogwMCcmFxc4BgQ4ANUwgCjUcG3awyMIPqyLsis7PPOq3QdDFcvjV3jOD1boQVTPQrgSkktTgbSf4A4LbmgqISBgTEFyFYuLykAsTuAbJEioKOA7DkgdjqEvQHEToKwj4DVhAQ5A9k3gGyB5IxEoBmML4BsnSQk8XQkNtReEOBxcfXxUQg1Mjc0dyHgXNJBSWpFCYh2zi+oLMpMzyhRcASGUqqCZ16yno6CkYGRAQMDKMwhqj/fAIcloxgHQqxAjIHBEugw5sUIsSQpBobtQPdLciLEVJYzMPBHMDBsayhILEqEO4DxG0txmrERhM29nYGBddr//5/DGRjYNRkY/l7////39v///y4Dmn+LgeHANwDrkl1AuO+pmgAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAwqADAAQAAAABAAAAwwAAAAD9b/HnAAAHlklEQVR4Ae3dP3PTWBSGcbGzM6GCKqlIBRV0dHRJFarQ0eUT8LH4BnRU0NHR0UEFVdIlFRV7TzRksomPY8uykTk/zewQfKw/9znv4yvJynLv4uLiV2dBoDiBf4qP3/ARuCRABEFAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghgg0Aj8i0JO4OzsrPv69Wv+hi2qPHr0qNvf39+iI97soRIh4f3z58/u7du3SXX7Xt7Z2enevHmzfQe+oSN2apSAPj09TSrb+XKI/f379+08+A0cNRE2ANkupk+ACNPvkSPcAAEibACyXUyfABGm3yNHuAECRNgAZLuYPgEirKlHu7u7XdyytGwHAd8jjNyng4OD7vnz51dbPT8/7z58+NB9+/bt6jU/TI+AGWHEnrx48eJ/EsSmHzx40L18+fLyzxF3ZVMjEyDCiEDjMYZZS5wiPXnyZFbJaxMhQIQRGzHvWR7XCyOCXsOmiDAi1HmPMMQjDpbpEiDCiL358eNHurW/5SnWdIBbXiDCiA38/Pnzrce2YyZ4//59F3ePLNMl4PbpiL2J0L979+7yDtHDhw8vtzzvdGnEXdvUigSIsCLAWavHp/+qM0BcXMd/q25n1vF57TYBp0a3mUzilePj4+7k5KSLb6gt6ydAhPUzXnoPR0dHl79WGTNCfBnn1uvSCJdegQhLI1vvCk+fPu2ePXt2tZOYEV6/fn31dz+shwAR1sP1cqvLntbEN9MxA9xcYjsxS1jWR4AIa2Ibzx0tc44fYX/16lV6NDFLXH+YL32jwiACRBiEbf5KcXoTIsQSpzXx4N28Ja4BQoK7rgXiydbHjx/P25TaQAJEGAguWy0+2Q8PD6/Ki4R8EVl+bzBOnZY95fq9rj9zAkTI2SxdidBHqG9+skdw43borCXO/ZcJdraPWdv22uIEiLA4q7nvvCug8WTqzQveOH26fodo7g6uFe/a17W3+nFBAkRYENRdb1vkkz1CH9cPsVy/jrhr27PqMYvENYNlHAIesRiBYwRy0V+8iXP8+/fvX11Mr7L7ECueb/r48eMqm7FuI2BGWDEG8cm+7G3NEOfmdcTQw4h9/55lhm7DekRYKQPZF2ArbXTAyu4kDYB2YxUzwg0gi/41ztHnfQG26HbGel/crVrm7tNY+/1btkOEAZ2M05r4FB7r9GbAIdxaZYrHdOsgJ/wCEQY0J74TmOKnbxxT9n3FgGGWWsVdowHtjt9Nnvf7yQM2aZU/TIAIAxrw6dOnAWtZZcoEnBpNuTuObWMEiLAx1HY0ZQJEmHJ3HNvGCBBhY6jtaMoEiJB0Z29vL6ls58vxPcO8/zfrdo5qvKO+d3Fx8Wu8zf1dW4p/cPzLly/dtv9Ts/EbcvGAHhHyfBIhZ6NSiIBTo0LNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiEC/wGgKKC4YMA4TAAAAABJRU5ErkJggg=="})}var Pe={bronze:"styles-module_bronze__tYc-y",silver:"styles-module_silver__2wxy5",gold:"styles-module_gold__3QSVz",platinum:"styles-module_platinum__y6i-W",halcyon:"styles-module_halcyon__m-TDL",diamond:"styles-module_diamond__qMX2l",white:"styles-module_white__mcflj"},Nn;function Ot(){return Ot=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ot.apply(null,arguments)}var Ha=function(t){return S.createElement("svg",Ot({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 10 10"},t),Nn||(Nn=S.createElement("path",{fill:"#AA98FF",d:"M4.748 1.406a.28.28 0 0 1 .504 0l1.062 2.152 2.374.345a.28.28 0 0 1 .155.479L7.125 6.056l.406 2.365a.28.28 0 0 1-.407.296L5 7.601 2.876 8.717a.28.28 0 0 1-.407-.296l.406-2.365-1.718-1.674a.28.28 0 0 1 .155-.479l2.375-.345z"})))},vn;function Qt(){return Qt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qt.apply(null,arguments)}var qa=function(t){return S.createElement("svg",Qt({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 6 6"},t),vn||(vn=S.createElement("path",{fill:"#AA98FF",d:"M1.586.525a.25.25 0 0 0-.354 0l-.707.707a.25.25 0 0 0 0 .354L1.939 3 .525 4.414a.25.25 0 0 0 0 .354l.707.707a.25.25 0 0 0 .354 0L3 4.06l1.414 1.414a.25.25 0 0 0 .354 0l.707-.707a.25.25 0 0 0 0-.354L4.06 3l1.414-1.414a.25.25 0 0 0 0-.354L4.768.525a.25.25 0 0 0-.354 0L3 1.939z"})))},he;(function(e){e.Bronze="Bronze",e.Silver="Silver",e.Gold="Gold",e.Platinum="Platinum",e.Emerald="Emerald",e.Diamond="Diamond"})(he||(he={}));const xn={[he.Bronze]:Pe.bronze,[he.Silver]:Pe.silver,[he.Gold]:Pe.gold,[he.Platinum]:Pe.platinum,[he.Emerald]:Pe.halcyon,[he.Diamond]:Pe.diamond};function Ga({text:e,className:t,theme:n="black"}){const r=k(()=>{const i=e.split(",");return i[0]===he.Diamond?u("div",{className:"flex items-center",children:[o("span",{className:"mr-1",children:i[0]}),o(Ha,{}),o(qa,{}),o("span",{children:i[1]})]}):`${i[0]} ${i[2]}`},[e]),a=k(()=>{for(const i in xn)if(e.includes(i))return xn[i]},[e]);return o("div",{className:O("px-1 py-[1px] rounded-sm bg-fillMask1 flex justify-center items-center text-xxs font-semibold border-[1px] border-solid w-fit",a,t,n==="white"?Pe.white:""),children:r})}var za={empty__table:"style-module_empty__table__A0f30"},ze;(function(e){e.nft="nft",e.collection="collection"})(ze||(ze={}));const wt={[ze.collection]:{text:"collections",button_text:"Collections"},[ze.nft]:{text:"NFTs",button_text:"items"}};function Ja({searchText:e,type:t=ze.collection,clearFilter:n}){return o("div",{className:za.empty__table,children:o(an,{image:an.PRESENTED_IMAGE_SIMPLE,imageStyle:{height:e?0:80},description:o("div",{className:"text-[var(--table-sort-hover)] text-[16px] font-medium leading-[24px] mt-[8px]",children:e?`No ${wt[t].text} found`:`No ${wt[t].text} yet`}),children:e&&u(Y,{size:"ultra",type:"primary",onClick:n,children:["Back to All ",wt[t].button_text]})})})}var Ka=Ye(Ja);function Ya({dataSource:e,className:t,priceClassName:n,onClick:r}){const a=k(()=>e?.fileExtension==="mp3"?"audio":e?.fileExtension==="mp4"?"video":"image",[e?.fileExtension]),i=e?.price||e?.listingPrice;return o(Fr,{href:`/detail?symbol=${e?.nftSymbol}&from=all&source=telegram&callbackPath=collection`,children:o(Nr,{className:`${re["items-card-wrapper"]} h-full ${t}`,onClick:r,cover:u(de,{children:[a!=="image"&&o("div",{className:re.mark,children:e?.fileExtension?.toUpperCase()}),u("div",{className:re.item__wrapper,children:[o(ce,{className:re.item__image,width:"100%",src:e?.previewImage||""}),e?.describe?o("div",{className:re.item_honour,children:o(Ga,{text:e?.describe})}):null]})]}),children:u("div",{className:re.card__content,children:[o("div",{className:re.nft__symbol,children:e?.nftSymbol}),o("div",{className:re.token__name,children:e?.tokenName}),u("div",{className:O(re.token__price,n),children:[o("span",{className:re.token__label,children:e?.priceDescription||"Price"}),o("span",{className:re.token__price__text,children:i&&i>=0?C(i)+" ELF":"--"})]})]})})})}function Za({sizes:e,collapsed:t,dataSource:n,hasSearch:r,clearFilter:a,loading:i,ELFToDollarRate:s}){return o("div",{id:"nft-list",className:re.nft__list_wrapper,children:o(ut,{grid:{gutter:16,column:2},locale:{emptyText:o(Ka,{type:Mt.nft,searchText:r&&"search"||"",clearFilter:a&&a})},loading:i,dataSource:n,renderItem:l=>o(ut.Item,{children:o(Ya,{hiddenActions:!1,dataSource:l},l?.id)})})})}var Xa=()=>{};function ei({nftCollectionId:e,ELFToDollarRate:t}){const n=e.endsWith("-SEED-0")?"seed":"nft",[{wallet:r},{dispatch:a}]=Ie(),i=qt(),s=Fn().get("list")||pt.small,[l,c]=_(s),[d,m]=_(!0),{filterList:p,filterSelect:f,traitsInfo:v,generationInfos:b,rarityInfos:E,onFilterChange:N,clearAll:h}=va(e),[y,w]=_(""),[A,G]=_(""),{run:Z}=wr(F=>{w(F.trim())},{wait:500}),j=F=>{G(F.target.value),Z(F.target.value)},[B,U]=_(Ft.data[0].value),X=k(()=>{const F=Bn(f);return{CollectionId:e,CollectionType:n,Sorting:B,SearchParam:y,...F}},[f,y,e,B,n]),J=F=>{U(F)},ee=k(()=>la(f,y.trim()),[f,y]),{data:z,loading:me,loadingMore:W,noMore:se}=wa({params:X,userWalletAddress:r?.address});return L(()=>{c(s)},[s]),u(de,{children:[o(sa,{size:l,collapsed:d,collapsedChange:()=>m(!d),searchParams:{placeholder:"Search for names or token symbols",value:A,onChange:j,onPressEnter:j},sizeChange:F=>{c(F);const ue=new URL(location.href);ue.searchParams.set("list",F),i.push(ue.href)},selectTagCount:ee.length,selectProps:{value:B,defaultValue:Ft.data[0].value,onChange:J}}),u(Tt,{className:_n.layout,children:[o(Ua,{filterList:p,filterSelect:f,traitsInfo:v?.items,generationInfos:b?.items,rarityInfos:E?.items,open:!d,onClose:()=>{m(!0)},mobileMode:!0,onFilterChange:N,clearAll:h}),u(Tt,{className:_n.layout,children:[o("div",{className:" sticky top-36 z-[1] bg-fillPageBg overflow-hidden h-0 lgTW:h-auto"}),z?.totalCount?u("div",{className:"text-base font-medium text-textPrimary pb-2",children:[gt(z.totalCount)," ",z.totalCount<2?"result":"results"]}):null,o(Za,{dataSource:z?.list||[],collapsed:d,sizes:l,loading:me,ELFToDollarRate:t}),W?o(Xa,{}):null,se&&z?.list?.length&&!me?o("div",{className:"text-center w-full text-textDisable font-medium text-base py-5",children:"No more data"}):null]})]})]})}const zo=e=>{const{nftCollectionId:t}=e,n="items",{ELFToDollarRate:r}=Jt();return o("div",{className:"px-4 smTW:px-10",children:o(Br,{items:[{label:o("span",{className:O("text-base font-semibold text-textSecondary","!text-textPrimary"),children:"Items"}),key:"items",children:o(ei,{nftCollectionId:t,ELFToDollarRate:r})}],defaultActiveKey:n})})};var Et={"modal-wrap":"index-module_modal-wrap__Ppw01",modal:"index-module_modal__ntH48","modal-mobile":"index-module_modal-mobile__IAOLd"};function ti(e){const{children:t,className:n,title:r,subTitle:a,wrapClassName:i}=e;return o(vr,{keyboard:!1,maskClosable:!1,destroyOnClose:!0,closeIcon:o(Vn,{}),width:800,centered:!0,...e,className:`${Et.modal} ${Et["modal-mobile"]} ${n||""}`,wrapClassName:`${Et["modal-wrap"]} ${i}`,okButtonProps:{className:`${Re.button}`},cancelButtonProps:{className:`${Re.button}`},title:u("div",{children:[o("div",{className:"pr-8 break-words",children:r}),a&&o("div",{className:" text-base font-medium mt-8 text-textSecondary",children:a})]}),children:t})}var Me=Ve.memo(ti),ne={"nft-list-card-text-ellipsis":"style-module_nft-list-card-text-ellipsis__usYOD",wrap:"style-module_wrap__4l3Lv",image:"style-module_image__5suRf",right:"style-module_right__DI7vt",priceTitle:"style-module_priceTitle__vRR9b",price:"style-module_price__6DwGa",usdPrice:"style-module_usdPrice__4P1CG",flexWrap:"style-module_flexWrap__dSXqk",imageWrap:"style-module_imageWrap__af3yg",collectionWrapper:"style-module_collectionWrapper__4RxFc",nftWrapper:"style-module_nftWrapper__KFGgC",collectionName:"style-module_collectionName__79fh7",nftName:"style-module_nftName__h-KZu",nftItem:"style-module_nftItem__hFAKr"};const ni=e=>{const{collectionName:t,nftName:n,item:r,priceTitle:a,price:i,usdPrice:s}=e;return u("div",{children:[u("div",{className:ne.wrap,children:[o("div",{className:ne.flexWrap,children:e.image&&o("div",{className:"w-[84px] h-[84px] mr-[16px] flex justify-center items-center overflow-hidden rounded-md border border-solid border-lineBorder",children:o(ce,{src:e.image,className:ne.image})})}),u("div",{className:ne.right,children:[a&&o("p",{className:ne.priceTitle,children:a}),i&&o("p",{className:ne.price,children:i}),s&&o("p",{className:ne.usdPrice,children:s})]})]}),u("div",{className:ne.collectionWrapper,children:[o("p",{className:ne.collectionName,children:t}),u("div",{className:ne.nftWrapper,children:[o("p",{className:ne.nftName,children:n}),o("p",{className:ne.nftItem,children:r})]})]})]})};var Xt=Ve.memo(ni),tt={wrapper:"index-module_wrapper__bERt3",content:"index-module_content__9KhEL",title:"index-module_title__cptUl",contentCmp:"index-module_contentCmp__f3SbH"};const Je="Pending transaction confirmation",Un="Please wait for auto confirmation.";function ri({title:e,nftInfo:t,buttonConfig:n,initialization:r,content:a,onClose:i}){const s=q(),l=!0,[c,d]=_(!0),[m,p]=_(!1),f=async y=>{if(y)try{await y();return}catch{p(!0),d(!1);return}else if(r)try{await r();return}catch{p(!0),d(!1);return}},v=[{btnText:"Try again",onConfirm:f}],b=async y=>{try{d(!0),await f(y),d(!1)}catch{d(!1)}},E=()=>!m||typeof n=="boolean"&&!n?null:o(de,{children:(n||v).map((y,w)=>o(Y,{type:"primary",size:"ultra",disabled:c,isFull:!!l,className:`${!l}`,onClick:()=>b(y?.onConfirm),children:y.btnText},w))}),N=y=>typeof y=="string"?o("p",{children:y}):y instanceof Array?y.map((w,A)=>o("p",{children:w},A)):y,h=()=>{i?i():s.hide()};return L(()=>(s.visible&&f(),()=>{p(!1)}),[s.visible,e,t,n,r,a,i]),o(Me,{title:e,open:s.visible,onOk:()=>f(),onCancel:h,afterClose:s.remove,footer:E(),children:u("div",{className:tt.wrapper,children:[o(Xt,{...t}),a?u("div",{className:tt.content,children:[o("div",{className:tt.title,children:a?.title?N(a?.title):Je}),o("div",{className:tt.contentCmp,children:N(a?.content)})]}):null,c&&o("div",{className:"absolute w-full h-full top-0 left-0 flex justify-center items-center",children:o("div",{className:"p-[24px] w-max h-max bg-fillMask2 rounded-[16px]"})})]})})}var Vt=Se.create(ri),bn,wn;function jt(){return jt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jt.apply(null,arguments)}var en=function(t){return S.createElement("svg",jt({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"#1B76E2",viewBox:"0 0 16 16"},t),bn||(bn=S.createElement("path",{d:"M13.938 14.5H2.094a.56.56 0 0 1-.563-.562V2.094c0-.311.252-.563.563-.563h4.908a.562.562 0 1 1 0 1.125H2.656v10.719h10.719v-4.32a.562.562 0 1 1 1.125 0v4.883c0 .31-.252.562-.562.562"})),wn||(wn=S.createElement("path",{d:"M14.498 2.056v-.008a1 1 0 0 0-.01-.076q0-.002-.002-.005a1 1 0 0 0-.024-.076v-.002q-.016-.037-.034-.072-.001 0-.002-.003a1 1 0 0 0-.042-.064l-.005-.006-.022-.027-.001-.003-.025-.025-.006-.006-.025-.024-.002-.001-.03-.022-.006-.005a1 1 0 0 0-.067-.04l-.002-.002a.5.5 0 0 0-.154-.05l-.005-.001-.038-.005h-.004q-.015-.002-.032-.002h-3.959a.562.562 0 1 0 0 1.125h2.578L7.62 7.62a.561.561 0 0 0 .398.96.57.57 0 0 0 .398-.165l4.96-4.96v2.543a.562.562 0 1 0 1.125 0V2.095q0-.019-.002-.039"})))},At={"nft-list-text-ellipsis":"style-module_nft-list-text-ellipsis__byil3"};const ai=e=>{const{collectionName:t,nftName:n,item:r,priceTitle:a,price:i,usdPrice:s,onClick:l}=e,c=k(()=>typeof r=="number"?H(r,"item"):r,[r]);return u("div",{className:O("flex justify-between pb-[16px] overflow-hidden",l&&"cursor-pointer"),onClick:l,children:[u("div",{className:"flex items-center mr-[16px] overflow-hidden flex-1",children:[e?.image&&o("div",{className:"overflow-hidden w-[48px] h-[48px] mdTW:w-[84px] mdTW:h-[84px] flex justify-center items-center mr-[16px] rounded-md border border-solid border-lineBorder",children:o(ce,{src:e.image,className:"!rounded-none"})}),u("div",{className:"flex flex-1 flex-col justify-between items-start overflow-hidden",children:[o("p",{className:O("text-base font-medium text-textSecondary",At["nft-list-text-ellipsis"]),children:t}),o("p",{className:O("text-xl font-semibold text-textPrimary",At["nft-list-text-ellipsis"]),children:n}),o("p",{className:O("text-base font-medium text-textSecondary",At["nft-list-text-ellipsis"]),children:c})]})]}),u("div",{className:"flex min-w-fit flex-col justify-between items-end",children:[o("p",{className:"text-base font-medium text-textSecondary",children:a}),o("p",{className:"text-xl font-semibold text-textPrimary",children:i}),o("p",{className:"text-base font-medium text-textSecondary",children:s})]})]})};var ii=Ve.memo(ai),nt={wrap:"index-module_wrap__wKewn",preview:"index-module_preview__HLrie",info:"index-module_info__zOKAb",logo:"index-module_logo__GWdaY",right:"index-module_right__mRUGJ",priceTitle:"index-module_priceTitle__qyUWk",price:"index-module_price__LkYF2",usdPrice:"index-module_usdPrice__MwWKE",flexWrap:"index-module_flexWrap__hs5vY",imageWrap:"index-module_imageWrap__FcXMz"};const oi=e=>{const{previewImage:t,info:n}=e;return u("div",{className:nt.wrap,children:[t&&o(ce,{src:t,className:nt.preview}),n&&u(de,{children:[u("div",{className:nt.info,children:[n?.logoImage&&o(ce,{src:n?.logoImage,className:nt.logo}),n.subTitle&&o("span",{className:"text-textSecondary text-base",children:n.subTitle})]}),n?.title&&o("span",{className:"font-semibold text-xl text-textPrimary ",children:n.title}),n?.extra&&o("span",{className:"text-textSecondary text-base font-medium",children:n.extra})]})]})};var si=Ve.memo(oi),ke={wrap:"style-module_wrap__rM5GL",title:"style-module_title__lYjGS",desc:"style-module_desc__tpTaf",errWrap:"style-module_errWrap__Cc-Yj",errTitle:"style-module_errTitle__EkcMB",errDesc:"style-module_errDesc__6scEe",jumpInfo:"style-module_jumpInfo__aXV5t",image:"style-module_image__tFgOM",right:"style-module_right__rNNP5",priceTitle:"style-module_priceTitle__ZaV9O",price:"style-module_price__Sg94v",usdPrice:"style-module_usdPrice__DyepY",flexWrap:"style-module_flexWrap__P-b3D",imageWrap:"style-module_imageWrap__ZyV0h"};function li({previewImage:e,jumpInfo:t,title:n,description:r,buttonInfo:a,hideButton:i=!1,info:s,error:l,onCancel:c}){const d=q(),m=!0,[p,f]=_(!1),v=k(()=>({}),[]),b=async()=>{if(a?.onConfirm){a.openLoading&&f(!0),await a.onConfirm(),f(!1);return}d.hide()},E=k(()=>t?u("a",{href:t.url,...v,className:"flex items-center text-textSecondary",children:[t.btnText||"View on aelf Explorer"," ",o(en,{className:"fill-textSecondary w-4 h-4 ml-2"})]}):null,[v,t]);i&&!t||u("div",{className:"w-full flex flex-col items-center",children:[i?null:o(Y,{type:"primary",size:"ultra",loading:p,isFull:!!m,className:`${!m}`,onClick:b,children:a?.btnText||"View"}),t?o("div",{className:"mt-[16px]",children:E}):null]});const N=i?null:o("div",{className:"w-full flex flex-col items-center",children:o(Y,{type:"primary",size:"ultra",loading:p,isFull:!!m,className:`${!m}`,onClick:b,children:a?.btnText||"View"})}),h=y=>typeof y=="string"?o("p",{children:y}):y instanceof Array?y.map((w,A)=>o("p",{children:w},A)):y;return o(Me,{title:" ",open:d.visible,onOk:d.hide,onCancel:c||d.hide,afterClose:d.remove,footer:N,children:u("div",{className:ke.wrap,children:[o(si,{previewImage:e,info:s}),u("div",{className:"flex flex-col items-center mt-[24px] mdTW:mt-[48px]",children:[o("span",{className:ke.title,children:n}),o("p",{className:ke.desc,children:h(r)})]}),l&&u("div",{className:ke.errWrap,children:[o("span",{className:ke.errTitle,children:l.title}),l.description?o("p",{className:ke.errDesc,children:h(l.description)}):null,l?.list?.length&&o("div",{className:"mt-[32px]",children:l.list?.map((y,w)=>o(ii,{...y},w))})]}),o("div",{className:ke.jumpInfo,children:E})]})})}var Wn=Se.create(li),Te={image:"index-module_image__jZUrX","collection-tokenName":"index-module_collection-tokenName__45I1P",tokenName:"index-module_tokenName__M-5Kc",priceDesc:"index-module_priceDesc__6Jxl3",price:"index-module_price__zkUvG",usdPrice:"index-module_usdPrice__9IiVR",quality:"index-module_quality__n-ESi"},ye;(function(e){e[e.BUY=1]="BUY",e[e.BUY721=2]="BUY721",e[e.MAKEOFFER=3]="MAKEOFFER",e[e.MAKEOFFER721=4]="MAKEOFFER721",e[e.DEAL=5]="DEAL"})(ye||(ye={}));const ci={[ye.BUY]:"Average Item Price",[ye.BUY721]:"Listing Price",[ye.MAKEOFFER]:"Total Offer Amount",[ye.MAKEOFFER721]:"Offer Amount",[ye.DEAL]:"Offer Amount"};function di(e){const{quantity:t,price:n,convertPrice:r,type:a,nftInfo:i}=e,s=k(()=>ci[a],[a]);return u("div",{className:"flex justify-between",children:[u("div",{className:"flex flex-col mdTW:flex-row",children:[o(ce,{className:Te.image,src:i?.previewImage||""}),u("div",{children:[o("p",{className:Te["collection-tokenName"],children:i?.nftCollection?.tokenName}),o("p",{className:Te.tokenName,children:i?.tokenName}),o("p",{className:"text-[16px] leading-[24px] font-medium text-[var(--text-secondary)] mt-[4px] hidden mdTW:block",children:H(Number(t),"item")})]})]}),u("div",{className:"flex flex-col items-end justify-between",children:[u("div",{className:"text-right",children:[o("div",{className:Te.priceDesc,children:s}),u("div",{className:Te.price,children:[C(n)," ELF"]}),o("div",{className:Te.usdPrice,children:Ce(r)})]}),o("div",{className:Te.quantity,children:H(Number(t),"item")})]})]})}var En;function Ut(){return Ut=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ut.apply(null,arguments)}var mi=function(t){return S.createElement("svg",Ut({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 16 16"},t),En||(En=S.createElement("path",{fill:"#FF3F6D",d:"M11.037 5.213 12 6.915 9.07 8 12 9.085l-.984 1.745-2.438-1.915L9.027 12H7.059l.406-3.085-2.438 1.957L4 9.064l2.91-1.085L4 6.936l.984-1.745 2.503 1.915L7.059 4h1.99l-.471 3.106z"})))},An={"title-wrapper":"index-module_title-wrapper__Mpc0E",err:"index-module_err__y8rFe"};function ui(e){const{title:t,suffix:n,require:r,description:a,children:i,error:s}=e;return k(()=>u("div",{className:O("form-item","mobile-form-item","[&:not(:first-child)]:mt-[24px]","mdTW:[&:not(:first-child)]:mt-[40px]"),children:[u("p",{className:An["title-wrapper"],children:[o("span",{className:"form-title-text",children:t}),n?o("span",{className:"ml-[8px] flex items-center h-[27px]",children:n}):null,r?o(mi,{className:"ml-[9px] mr-[-2px]"}):""]}),a?o("p",{className:"form-description font-medium mt-[8px] text-textSecondary text-[14px] leading-[21px]",children:a}):null,i,s&&o("div",{className:An.err,children:s?.msg})]}),[i,a,r,n,t,!0,s])}var pi={available:"index-module_available__zftcb"};function fi(e){const{availableMount:t,errorTip:n}=e;return o(ui,{title:"Quantity",error:{msg:n||""},children:o(de,{children:u("div",{className:"mt-[16px] relative",children:[o(Fe,{onKeyDown:r=>{/\d|\.|Backspace|ArrowRight|ArrowLeft|ArrowUp|ArrowDown/.test(r.key)||r.preventDefault()},placeholder:"Please enter the quantity",size:"large",...e,status:n&&"error"}),u("span",{className:pi.available,children:[C(t)," available"]})]})})})}function hi(){const[e,t]=_(),[n,r]=_(!1);return L(()=>{async function a(){try{r(!0);const i=await Gr();t(i)}catch(i){console.log("error",i)}r(!1)}a()},[]),{loading:n,transactionFee:e}}var rt={title:"index-module_title__0FXxd",estimated:"index-module_estimated__wjxet",price:"index-module_price__ZYSA8",usdPrice:"index-module_usdPrice__9hvtP"};function gi(){const{transactionFee:e}=hi();return u(de,{children:[o("h3",{className:rt.title,children:"Preview"}),u("div",{className:"flex justify-between mt-[16px]",children:[o("span",{className:rt.estimated,children:"Estimated Transaction Fee"}),u("div",{className:"flex flex-col items-end",children:[u("span",{className:rt.price,children:[C(e?.transactionFee||0)," ELF"]}),o("span",{className:rt.usdPrice,children:Ce(e?.transactionFeeOfUsd||0)})]})]})]})}function yi(e){const{totalPrice:t,convertTotalPrice:n,title:r}=e;return o(de,{children:u("div",{className:"flex justify-between ",children:[o("h3",{className:"text-[20px] leading-[28px] font-semibold text-[var(--text-primary)]",children:r||"Total"}),u("div",{className:"flex flex-col items-end",children:[u("span",{className:"flex text-[20px] leading-[28px] font-semibold text-[var(--text-primary)]",children:[C(t)," ELF"]}),o("span",{className:"mt-[8px] text-[16px] leading-[24px] font-medium text-[var(--text-secondary)]",children:Ce(n)})]})]})})}var _i={balance:"index-module_balance__Laj6k"};function Ni(e){const{itemDesc:t,amount:n,suffix:r}=e;return u("div",{className:_i.balance,children:[o("span",{children:t||"Balance"}),o("span",{children:`${C(n)}${r?` ${r}`:""}`})]})}var vi={"buy-modal-custom":"index-module_buy-modal-custom__JsFM9","ant-modal-body":"index-module_ant-modal-body__ZDcV2","ant-modal-footer":"index-module_ant-modal-footer__VZYVY"};let Hn=class we{constructor(t){this.context=null,this.aelfSendMethod=void 0,this.aelfViewMethod=void 0,this.tdvvSendMethod=void 0,this.tdvvViewMethod=void 0,this.tdvwSendMethod=void 0,this.tdvwViewMethod=void 0,this.address=t?.address,this.chainId=t?.chainId}static get(){return we.instance||(we.instance=new we),we.instance}static set(t){we.instance=t}setWebLoginContext(t){this.context=t}setMethod({chain:t,sendMethod:n,viewMethod:r}){switch(t){case V.MAIN_NET:{this.aelfSendMethod=n,this.aelfViewMethod=r;break}case V.TDVV_NET:{this.tdvvSendMethod=n,this.tdvvViewMethod=r;break}case V.TDVW_NET:{this.tdvwSendMethod=n,this.tdvwViewMethod=r;break}}}setContractMethod(t){t.forEach(n=>{this.setMethod(n)})}getWebLoginContext(){return this.context}contractSendMethod(t,n){let r=null;const a=we.instance;switch(t){case V.MAIN_NET:r=a.aelfSendMethod;break;case V.TDVV_NET:r=a.tdvvSendMethod;break;case V.TDVW_NET:r=a.tdvwSendMethod;break}if(!r)throw new Error("Error: Invalid chain ID");return r(n)}contractViewMethod(t,n){let r=null;const a=we.instance;switch(t){case V.MAIN_NET:r=a.aelfViewMethod;break;case V.TDVV_NET:r=a.tdvvViewMethod;break;case V.TDVW_NET:r=a.tdvwViewMethod;break}if(!r)throw new Error("Error: Invalid chain ID");return r(n)}callContract(t){return this.context?.callContract(t)}};Hn.instance=null;const Oe=Hn.get();var xe;(function(e){e[e.SEND=0]="SEND",e[e.VIEW=1]="VIEW"})(xe||(xe={}));var Cn;(function(e){e[e.NOT_LISTED=0]="NOT_LISTED",e[e.FIXED_PRICE=1]="FIXED_PRICE",e[e.ENGLISH_AUCTION=2]="ENGLISH_AUCTION",e[e.DUTCH_AUCTION=3]="DUTCH_AUCTION"})(Cn||(Cn={}));var Sn;(function(e){e[e.Basic=0]="Basic",e[e.Price=1]="Price",e[e.Customize=2]="Customize"})(Sn||(Sn={}));var ae;(function(e){e[e.LESS_THAN=0]="LESS_THAN",e[e.LESS_THAN_OR_EQUALS=1]="LESS_THAN_OR_EQUALS",e[e.GREATER_THAN=2]="GREATER_THAN",e[e.GREATER_THAN_OR_EQUALS=3]="GREATER_THAN_OR_EQUALS",e.EQUAL="EQUAL"})(ae||(ae={}));const Ze=async(e,t,n)=>{const{aelfInfo:r}=M.getInstance().getStore(),a={main:r?.marketMainAddress,side:r?.marketSideAddress};try{const i=n?.chain===V.MAIN_NET?a.main:a.side,s=n?.chain||r?.curChain;if(console.log("=====marketContractRequest webLoginInstance",Oe),console.log("=====marketContractRequest type: ",e,n?.type),console.log("=====marketContractRequest address: ",e,i),console.log("=====marketContractRequest curChain: ",e,s),console.log("=====marketContractRequest params: ",e,t),n?.type===xe.VIEW){const l=await Oe.contractViewMethod(s,{contractAddress:i,methodName:e,args:t});console.log("=====marketContractRequest res: ",e,l);const c=l;return c?.error||c?.code||c?.Error?(console.error(c),Promise.reject("request fail")):Promise.resolve(l)}else{const l=await Oe.contractSendMethod(s,{contractAddress:i,methodName:e,args:t});console.log("=====marketContractRequest res: ",e,l);const c=l;if(console.log("=====marketContractRequest result: ",e,JSON.stringify(c),c?.Error),c?.error||c?.code||c?.Error)return console.error("======>",c),Promise.reject("request fail");const{transactionId:d,TransactionId:m}=c.result||c,p=m||d;console.log("resTransactionId\uFF1A",p),await qe(1e3);const f=await Ke(p,s);return console.log("=====marketContractRequest transaction: ",e,f),Promise.resolve({TransactionId:f.TransactionId,TransactionResult:f.txResult})}}catch(i){return console.error("=====marketContractRequest error: ",e,JSON.stringify(i),i),console.error(i),Promise.reject("request fail")}},xi=async(e,t)=>{try{const n=await Ze("GetTotalOfferAmount",e,{...t,type:xe.VIEW});return Promise.resolve(n)}catch(n){return Promise.reject(n)}},bi=async(e,t)=>{try{const n=await Ze("BatchBuyNow",e,t);return Promise.resolve(n)}catch(n){return Promise.reject(n)}},wi=async(e,t)=>{try{const n=await Ze("GetListedNFTInfoList",e,{...t,type:xe.VIEW});return Promise.resolve(n)}catch{return Promise.reject(null)}},Ei=async(e,t)=>{try{const n=await Ze("GetTotalEffectiveListedNFTAmount",e,{...t,type:xe.VIEW});return Promise.resolve(n)}catch(n){return Promise.reject(n)}},Ai=async(e,t)=>{try{const n=await Ze("ListWithFixedPrice",e,t);return Promise.resolve(n)}catch(n){return Promise.reject(n)}};function dt(e,t="success",n,r=""){const a={},i=n&&Zt(e,"transaction",n),s=u("span",{children:[u("span",{children:["Transaction ID: \xA0",o("a",{href:i,className:"break-all",...a,children:Ti(e||"",8)})]}),o("br",{}),r&&o("span",{children:r.replace("AElf.Sdk.CSharp.AssertionException:","")})]});D[t](s,10)}const ve="Something went wrong. Please try again later.",Ci=()=>{const{aelfInfo:e}=M.getInstance().getStore();return{[V.MAIN_NET]:e?.rpcUrlAELF,[V.TDVV_NET]:e?.rpcUrlTDVV,[V.TDVW_NET]:e?.rpcUrlTDVW}},Ct={};function Si(e){const t=e||"";return Ct[t]||(Ct[t]=new Ne(new Ne.providers.HttpProvider(t))),Ct[t]}async function Ke(e,t,n=0,r=0){const a=Ci()[t],i=await Si(a).chain.getTxResult(e);if(console.log("txResult",i,a),i.error&&i.errorMessage)throw Error(i.errorMessage.message||i.errorMessage.Message);if(!i)throw Error("Failed to retrieve transaction result.");if(i.Status.toLowerCase()==="notexisted"){if(r>5)throw Error({...i.Error,TransactionId:e});return await qe(1e3),r++,Ke(e,t,n,r)}if(i.Status.toLowerCase()==="pending"){if(n>10)throw Error(`Timeout. Transaction ID:${e}`);return await qe(1e3),n++,Ke(e,t,n,r)}if(i.Status.toLowerCase()==="mined")return{TransactionId:e,txResult:i};throw Error({...i.Error,TransactionId:e})}const Ii=async e=>{const{price:t,chainId:n,address:r,spender:a,quantity:i}=e;try{const s=await xi({address:r,priceSymbol:`${t.symbol}`},{chain:n});if(console.log("GetTotalOfferAmountres:",s),s?.error)return D.error(s?.errorMessage?.message||s.error.toString()||ve),!1;const l=new g(t.amount);if(s){const c=new g(s?.totalAmount??0);if(new g(s?.allowance??0).lt(g.sum(l.multipliedBy(i).multipliedBy(10**8),c))){const d=Number(g.sum(c,l.multipliedBy(i).multipliedBy(1e8)));return await yt(a,"ELF",`${d}`,n)}return!0}else{const c=Number(Number(l.multipliedBy(i).multipliedBy(1e8)));return await yt(a,"ELF",`${c}`,n)}}catch(s){D.destroy();const l=s;return l&&D.error(l.errorMessage?.message||ve),!1}},yt=async(e,t,n,r,a)=>{try{const i=await Fi({spender:e,symbol:t,amount:n,batchApproveNFT:a},{chain:r});if(!i||i.error)return D.error(i?.errorMessage?.message||ve),!1;const{TransactionId:s}=i.result||i;return r&&s&&await ki(s,r),!0}catch(i){const s=i;return s&&D.error(s?.errorMessage?.message||ve),!1}};async function ki(e,t,n="success"){try{const r=(await Ke(e,t)).TransactionId;dt(r,n,t)}catch(r){r.TransactionId?dt(e,"error",r.Error||"Transaction error.",t):dt(e,"error",r.message||"Transaction error.",t)}}function Ti(e,t=10){const n=e;return n?`${n.substring(0,t)}...${n.substring(n.length-t)}`:""}const Pi=async e=>{const{symbol:t,amount:n,chainId:r,address:a,spender:i}=e;try{const s=await Ei({symbol:t,address:a},{chain:r});if(s?.error)return D.error(s?.errorMessage?.message||s.error.toString()||ve),!1;const l=new g(n);if(console.log("GetTotalEffectiveListedNFTAmount:",s?.allowance),s){const c=new g(s?.totalAmount??0);if(new g(s?.allowance??0).lt(g.sum(l,c))){const d=Number(g.sum(c,l));return await yt(i,t,`${d}`,r,!0)}return!0}else{const c=Number(l);return await yt(i,t,`${c}`,r,!0)}}catch(s){D.destroy();const l=s;return l&&D.error(l.errorMessage?.message||ve),!1}},tn=async(e,t,n)=>{const{aelfInfo:r}=M.getInstance().getStore(),a={main:r?.mainChainAddress,side:r?.sideChainAddress};try{const i=n?.chain===V.MAIN_NET?a.main:a.side,s=n?.chain||r?.curChain;if(console.log("=====multiTokenContractRequest type: ",e,n?.type),console.log("=====multiTokenContractRequest address: ",e,i),console.log("=====multiTokenContractRequest curChain: ",e,s),console.log("=====multiTokenContractRequest params: ",e,t),console.log("=====multiTokenContractRequest webLoginInstance: ",Oe),n?.type===xe.VIEW){const l=await Oe.contractViewMethod(s,{contractAddress:i,methodName:e,args:t});console.log("=====multiTokenContractRequest res: ",e,l);const c=l;return c?.error||c?.code||c?.Error?(console.error(c),Promise.reject("request fail")):Promise.resolve(l)}else{const l=await Oe.contractSendMethod(s,{contractAddress:i,methodName:e,args:t});console.log("=====multiTokenContractRequest res: ",e,l);const c=l;if(c?.error||c?.code||c?.Error)return console.error(c),Promise.reject("request fail");const{transactionId:d,TransactionId:m}=c.result||c,p=m||d;await qe(1e3);const f=await Ke(p,s);return console.log("=====multiTokenContractRequest transaction: ",e,f),Promise.resolve({TransactionId:f.TransactionId,TransactionResult:f.txResult})}}catch(i){return console.error("=====multiTokenContractRequest error:",e,JSON.stringify(i)),console.error(i),Promise.reject("request fail")}},qn=async(e,t)=>{try{const n=await tn("GetBalance",e,{...t,type:xe.VIEW});return Promise.resolve(n)}catch(n){return Promise.reject(n)}},Li=async(e,t)=>{try{const n=await tn("GetTokenInfo",e,{...t,type:xe.VIEW});return Promise.resolve(n)}catch(n){return Promise.reject(n)}},Fi=async(e,t)=>{try{const n=await tn("Approve",e,{...t});return Promise.resolve(n)}catch(n){return Promise.reject(n)}},St=async({owner:e,symbol:t},n)=>{try{if(!e||!t)return;const r=await qn({owner:e,symbol:t},{chain:n});return console.log("getBalance!!!!!!!:",r),r.balance}catch(r){return console.log("getBalance:",r),0}},Mi=async({symbol:e},t)=>{try{if(!e)return;const n=await Li({symbol:e},{chain:t});return{supply:n.supply,totalSupply:n.totalSupply,decimals:n.decimals}}catch{return{supply:0,totalSupply:0}}},at=e=>{M.getInstance().setStore("nftNumber",e)},$i=async({owner:e,nftSymbol:t,chainId:n})=>{if(e)try{if(at({loading:!0}),t){const r=await Promise.all([St({owner:e,symbol:"ELF"},n),St({owner:e,symbol:t},n),Mi({symbol:t},n)]),a=Number(r[2]?.decimals||0),i=Math.floor(g(r[2]?.supply||0).dividedBy(10**a).toNumber()),s=Math.floor(g(r[2]?.totalSupply||0).dividedBy(10**a).toNumber()),l={nftBalance:Math.floor(g(r[1]||0).dividedBy(10**a).toNumber()),tokenBalance:r[0],nftQuantity:i,nftTotalSupply:s,nftDecimals:a,loading:!1};return at(l),l}else{const r={tokenBalance:await St({owner:e,symbol:"ELF"},n),loading:!1};return at(r),r}}catch{return at({loading:!1}),{}}};var _t;(function(e){e.MAIN_NET="AELF",e.TDVV_NET="tDVV",e.TDVW_NET="tDVW"})(_t||(_t={}));function Ri({nftSymbol:e,chainId:t}){const[{isLogin:n=!0},{dispatch:r}]=Ie(),a=M.getInstance().getValue("walletInfo"),[i,s]=_({}),l=async({nftSymbol:c,chainId:d})=>{const m=d||_t.TDVW_NET,p=m===_t.MAIN_NET?a.aelfChainAddress:a.address;if(!(n&&p))return;const f=await $i({owner:p,nftSymbol:c,chainId:m});s(f)};return L(()=>{l({nftSymbol:e,chainId:t})},[n,e,t,a.address,a.aelfChainAddress]),{getNFTNumber:l,nftNumber:i}}function Di(e){const[t,n]=_(),r=M.getInstance().getValue("walletInfo");return L(()=>{async function a(){if(!e)return;const i=$n({id:e,excludedAddress:r?.address||""});try{const s=await i;console.log("salesInfo",s),n(s)}catch(s){console.log("error",s)}}a()},[e,r]),t}const Bi=async({page:e=1,pageSize:t=10,symbol:n,address:r,excludedAddress:a,chainId:i})=>{try{const s=await zr({chainId:i,symbol:n,skipCount:(e-1)*t,maxResultCount:t,excludedAddress:a,address:r});if(!s)return!1;const l=s?.items,c=s?.totalCount;return{list:l.map(d=>{const m=d.whitelistPrices!==null?d.whitelistPrices:d.prices;return{key:d.publicTime.toString(),purchaseToken:{symbol:d.purchaseToken.symbol.toLocaleUpperCase()},decimals:d.purchaseToken.decimals??8,price:m,quantity:d.quantity,ownerAddress:d?.ownerAddress||"",expiration:ya(d.endTime),fromName:d?.owner?.name||"--",whitelistHash:d.whitelistId,startTime:d.startTime,endTime:d.endTime}})||[],totalCount:c??0}}catch{return!1}};class Le{constructor(){this.proto={}}static getInstance(){return Le.instance||(Le.instance=new Le),Le.instance}setProto(t,n){this.proto[t]=n}getProto(t){return t?this.proto[t]:this.proto}}function Oi(e){const{util:t}=Ne.pbjs,n=t.newBuffer(t.base64.length(e));return t.base64.decode(e,n,0),n}function Qi(e,t){let n=e.reduce((r,a)=>{let i=t.decode(Oi(a));return i=t.toObject(i,{enums:String,longs:String,bytes:String,defaults:!1,arrays:!0,objects:!0,oneofs:!0}),{...r,...i}},{});return n=Ne.utils.transform.transform(t,n,Ne.utils.transform.OUTPUT_TRANSFORMERS),n=Ne.utils.transform.transformArrayToMap(t,n),n}async function Vi(e,t){try{const{Indexed:n=[],NonIndexed:r,Name:a}=e;if(!t)return{};const i=[...n||[]];r&&i.push(r);const s=t.lookupType(a);return Qi(i,s)}catch(n){return Promise.reject(n)}}async function ji(e,t){try{const n=await new Ne(new Ne.providers.HttpProvider(t)).chain.getContractFileDescriptorSet(e);return Ne.pbjs.Root.fromDescriptor(n)}catch{return null}}const Ui={AELF:"rpcUrlAELF",tDVW:"rpcUrlTDVW",tDVV:"rpcUrlTDVV"},Wi=async e=>{const{aelfInfo:t}=M.getInstance().getStore(),n=Ui[t?.curChain];if(t?.[n]&&e){const r=await ji(e,t?.[n]);console.log("protoBuf",r),Le.getInstance().setProto(e,r)}},Nt=()=>{const{aelfInfo:e}=M.getInstance().getStore();return{main:e?.forestMainAddress,side:e?.forestSideAddress}},Hi="Request rejected. Forest needs your permission to continue";function qi(e,t){const n=q(Wn),{walletInfo:r,aelfInfo:a}=M.getInstance().getStore(),i=({quantity:l})=>{n.show({previewImage:e?.previewImage||"",title:Ee.errorMessage.title,hideButton:!0,info:{logoImage:e?.nftCollection?.logoImage||"",subTitle:e?.nftCollection?.tokenName,title:e?.tokenName,extra:e&&le(e)?void 0:H(l,"item")},error:{title:Ee.errorMessage.tips,description:Ee.errorMessage.description}})},s=async(l,c,d)=>{const m=Le.getInstance().getProto()[l];if(m){const p=c?.Logs?.filter(f=>f.Name==="BatchBuyNowResult")?.[0];if(p)try{return await Vi(p,m)}catch(f){return console.error(f),!1}else return console.error("no log events"),!1}else return console.error("no proto"),!1};return async l=>{const c=await Ii({chainId:t,price:l.price,quantity:ge(l.quantity,"0").toNumber(),spender:t===V.MAIN_NET?Nt().main:Nt().side,address:r.address||""});if(console.log("approveTokenResult\uFF1A",c),!c)return"failed";try{const d=await bi({symbol:l.symbol,fixPriceList:l.fixPriceList});if(d){const{TransactionId:m,TransactionResult:p}=d.result||d;if(p){const f=await s(a?.marketSideAddress,p,m);return f?{...f,TransactionId:m}:(D.error(ve),"failed")}}else return D.error(ve),"failed"}catch(d){console.log("error:",d),D.destroy();const m=d;return m.errorMessage?.message.includes(Hi)?(D.error(m?.errorMessage?.message||ve),Promise.reject(d)):(i({quantity:0}),"failed")}}}const Ee={title:"Approve Purchase",portkey:{title:Je,message:Un},default:{title:Je,message:"Please confirm the purchase in the wallet."},errorMessage:{title:"Purchase Failed",tips:"Purchase of all items failed",description:"Purchase failure could be due to network issues, transaction fee increases, or someone else acquiring the item before you."}};function Gi(e){const t=q(),{onClose:n,elfRate:r,buyItem:a,nftInfo:i,onViewNft:s}=e,{getNftNumber:l,nftNumber:c}=Ri({nftSymbol:i.nftSymbol,chainId:i.chainId});console.log("nftNumber:=====>",c),qt();const{aelfInfo:d}=M.getInstance().getStore(),{tokenBalance:m,nftTotalSupply:p}=c,[{isLogin:f=!0},{dispatch:v}]=Ie(),b=q(Vt),E=q(Wn),N="Buy Now",h="Buy Now",y=M.getInstance().getValue("walletInfo"),[w,A]=_(!1),[G,Z]=_(1),[j,B]=_([]),[U,X]=_(0),[,J]=_(0),[ee,z]=_(0),[me,W]=_([]),se=qi(i,i?.chainId),[F,ue]=_(""),K=Di(i?.id||""),je=k(()=>new g(ee).multipliedBy(r).toNumber(),[r,ee]),[P,xt]=_(0),Xe=k(()=>{const Q=new g(ee);return P?Q.div(P).toNumber():0},[ee,P]),Xn=k(()=>new g(Xe).multipliedBy(r).toNumber(),[Xe,r]);L(()=>{Wi(d?.marketSideAddress)},[d?.marketSideAddress]),L(()=>{if(a){if(P>a.quantity){z(0);return}z(P*a.price)}},[a,P]);const er=async()=>{try{let Q=[];a?Q=[{offerTo:a.ownerAddress,quantity:ge(P,i?.decimals||"0").toNumber(),price:{symbol:a.purchaseToken.symbol,amount:a.price},startTime:{seconds:I.unix(Math.floor(a.startTime/1e3)).unix(),nanos:0}}]:Q=me;const $=await se({symbol:i?.nftSymbol||"",fixPriceList:Q.map(te=>({...te,price:{...te.price,amount:Number(ge(te.price.amount,8))}})),price:{symbol:"ELF",amount:new g(ge(Xe,"0")).toNumber()},quantity:P,nftDecimals:Number(i?.decimals||0)});if(console.log("batchBuyNowRes",$),$&&$!=="failed"){const te=Zt($.TransactionId,"transaction",i?.chainId);if($.allSuccessFlag)E.show({previewImage:i?.previewImage||"",title:"NFT Successfully Purchased!",description:`You are now the owner of ${i?.tokenName} NFT in the ${i?.nftCollection?.tokenName} Collection.`,buttonInfo:{btnText:"View NFT",onConfirm:()=>{s&&s(),E.hide()}},info:{logoImage:i?.nftCollection?.logoImage||"",subTitle:i?.nftCollection?.tokenName,title:i?.tokenName,extra:i&&le(i)?void 0:H(P,"item")},jumpInfo:{url:te}});else{const pe=$.failPriceList?.value.map(fe=>{const rn=ct(fe.price.amount,8),lr=new g(rn).multipliedBy(r);return{image:i?.previewImage||"",collectionName:i?.nftCollection?.tokenName,nftName:i?.tokenName,item:H(Number(fe.quantity),"item"),priceTitle:"Each item price",price:`${C(rn)} ${fe.price.symbol||"ELF"}`,usdPrice:Ce(lr)}});let R=0;$.failPriceList?.value.forEach(fe=>{R+=Number(fe.quantity)}),E.show({previewImage:i?.previewImage||"",title:"Purchase Partially Completed",buttonInfo:{btnText:"View NFT",onConfirm:()=>{E.hide()}},info:{logoImage:i?.nftCollection?.logoImage||"",subTitle:i?.nftCollection?.tokenName,title:i?.tokenName,extra:i&&le(i)?void 0:H(Number(P)-R,"item")},jumpInfo:{url:te},error:{title:`Purchase of ${H(R,"item")}  failed`,description:"Purchase failure could be due to network issues, transaction fee increases, or someone else acquiring the item before you.",list:pe}})}}b.hide(),A(!1),nn()}catch(Q){return A(!1),Promise.reject(Q)}},tr=async()=>{f?(A(!0),b.show({nftInfo:{image:i?.previewImage||"",collectionName:i?.nftCollection?.tokenName,nftName:i?.tokenName,priceTitle:"Total Price",price:`${C(ee)} ELF`,usdPrice:Ce(je),item:i&&le(i)?void 0:H(P,"item")},title:Ee.title,content:{title:y.portkeyInfo?Ee.portkey.title:Ee.default.title,content:y.portkeyInfo?Ee.portkey.message:Ee.default.message},initialization:er,onClose:()=>{b.hide()}})):console.error("please login")};L(()=>{a&&a.quantity==1&&z(a.price)},[a]);const nr=()=>{if(!j.length)return;W([]),z(0);let Q=0,$=0;const te=[];for(let pe=0;pe<j.length;pe++){const R=j[pe];if(R.quantity<=P-$){const fe={offerTo:R.ownerAddress,quantity:ge(R.quantity,i?.decimals||"0").toNumber(),price:{symbol:R.purchaseToken.symbol,amount:R.price},startTime:{seconds:I.unix(Math.floor(R.startTime/1e3)).unix(),nanos:0}};if(te.push(fe),Q+=R.price*R.quantity,R.quantity===P-$)break;$+=R.quantity}else{const fe={offerTo:R.ownerAddress,quantity:ge(P-$,i?.decimals||"0").toNumber(),price:{symbol:R.purchaseToken.symbol,amount:R.price},startTime:{seconds:I.unix(Math.floor(R.startTime/1e3)).unix(),nanos:0}};te.push(fe),Q+=R.price*(P-$);break}}W(te),z(Q)};L(()=>{t.visible&&xt(1)},[t.visible]),L(()=>{a||(U<P&&j.length&&P<=(K?.availableQuantity||0)?Z(Q=>++Q):P<=(K?.availableQuantity||0)&&nr())},[a,j,U,P,K]);const rr=async Q=>{if(!(P>(K?.availableQuantity||0)))try{if(!i)return;A(!0);const $=await Bi({page:Q,chainId:i.chainId,symbol:i.nftSymbol,excludedAddress:y.address});if(!$)return;J($.totalCount);const te=$.list.reduce((pe,R)=>pe+R.quantity,0);B([...j,...$.list]),X(pe=>pe+te)}finally{A(!1)}};L(()=>{t.visible&&rr(G)},[G,t.visible]);const ar=k(()=>g(ct(Number(m),8)).lt(g(ee)),[m,ee]),ir=Q=>{if(!Q.target.value||g(Q.target.value).isZero()){xt(0);return}const $=Number(ga(Q.target.value,11));g($).gt(a?.quantity||K?.availableQuantity||0)?(ue("Maximum quantity exceeded. Please ensure your purchase does not exceed the available quantity."),z(0)):ue(""),xt($)},or=k(()=>a?g(a.quantity).gt(1):g(p).gt(1),[a,p]),sr=k(()=>(a?a.quantity>1:Number(p)>1)?ye.BUY:ye.BUY721,[a,p]),nn=()=>{n?n():t.hide()};return u(Me,{className:vi["buy-modal-custom"],destroyOnClose:!0,afterClose:t.remove,footer:o(Y,{disabled:ar||!!F||!P||!me.length&&!a,loading:w,type:"primary",size:"ultra",className:"!w-[256px]",onClick:tr,children:h}),onCancel:nn,title:N,open:t.visible,children:[o(di,{nftInfo:i,quantity:P,price:Xe,convertPrice:Xn,type:sr}),(or||!0)&&o("div",{className:"mt-[24px] mdTW:mt-[32px]",children:o(fi,{availableMount:a?a?.quantity:K?.availableQuantity||0,value:P===0?"":C(P),onChange:ir,errorTip:F})}),o("div",{className:"mt-[52px] mdTW:mt-[60px]",children:o(gi,{})}),o("div",{className:"mt-[24px] mdTW:mt-[32px]",children:o(yi,{totalPrice:ee,convertTotalPrice:je})}),o("div",{className:"mt-[24px] mdTW:mt-[32px]",children:o(Ni,{amount:ct(Number(m),8).toNumber(),suffix:"ELF"})})]})}var zi=Ye(Se.create(Gi));function Jo(e){const{nftInfo:t,onViewNft:n}=e,r=q(zi),{ELFToDollarRate:a}=Jt();return{buyNow:i=>{r.show({elfRate:a,nftInfo:t,onViewNft:n,buyItem:i})}}}const Ji=18e5,Ki=15,Yi=(e=Ki)=>({startTime:{seconds:I().unix(),nanos:0},publicTime:{seconds:I().unix(),nanos:0},durationMinutes:e}),Zi=e=>e.type==="date"?I(e.value).diff(I(),"minutes"):e.type==="months"?I().add(Number(e.value),"months").diff(I(),"minutes"):I.duration({[e.type]:e.value}).asMinutes(),Xi=e=>{const t=Zi(e);return Yi(t)};function vt(e){const t=kr();L(()=>{e.visible&&e.hide()},[t])}var oe={wrap:"ListingSuccessModal-module_wrap__eKMZI",imageWrap:"ListingSuccessModal-module_imageWrap__vHa1i",previewImage:"ListingSuccessModal-module_previewImage__BtEXV",logoWrap:"ListingSuccessModal-module_logoWrap__b0Sj4",logo:"ListingSuccessModal-module_logo__-zZiZ",collectionName:"ListingSuccessModal-module_collectionName__OxHIF",tokenName:"ListingSuccessModal-module_tokenName__symik",content:"ListingSuccessModal-module_content__ULeuE",content_title:"ListingSuccessModal-module_content_title__mAMjR",content_text:"ListingSuccessModal-module_content_text__m1yyw",aelf_link:"ListingSuccessModal-module_aelf_link__oIJ-Q"};function eo({nftInfo:e,explorerUrl:t,onViewMyListing:n}){const r=q();vt(r);const[a]=_(!1),i={target:"_blank",rel:"noreferrer"},s=u("div",{className:"flex flex-1 flex-col items-center",children:[o(Y,{loading:a,type:"primary",size:"ultra",className:"w-full",onClick:()=>{r.hide(),n&&n()},children:"View My Listing"}),null]});return o(Me,{title:" ",open:r.visible,onOk:r.hide,onCancel:r.hide,afterClose:r.remove,footer:s,children:u("div",{className:oe.wrap,children:[u("div",{className:oe.imageWrap,children:[e?.previewImage&&o(ce,{src:e?.previewImage,className:oe.previewImage}),u("div",{className:oe.logoWrap,children:[e?.nftCollection?.logoImage&&o(ce,{src:e?.nftCollection?.logoImage,className:oe.logo}),o("span",{className:oe.collectionName,children:e?.nftCollection?.tokenName})]}),o("span",{className:oe.tokenName,children:e?.tokenName})]}),u("div",{className:oe.content,children:[o("span",{className:oe.content_title,children:"NFT Successfully Listed!"}),u("span",{className:oe.content_text,children:[e?.tokenName," NFT in the ",e?.nftCollection?.tokenName," collection has been listed for sale."]})]}),u("a",{href:t,...i,className:oe.aelf_link,children:["View on aelf Explorer ",o(en,{className:"fill-textSecondary w-4 h-4 ml-2"})]})]})})}const to=Se.create(eo);var Qe;(function(e){e[e.timeGreater=0]="timeGreater",e[e.priceGreater=1]="priceGreater"})(Qe||(Qe={}));ae.LESS_THAN+"",ae.LESS_THAN_OR_EQUALS+"",ae.EQUAL+"",ae.GREATER_THAN+"",ae.GREATER_THAN_OR_EQUALS+"",ae.LESS_THAN+"",ae.LESS_THAN_OR_EQUALS+"",ae.EQUAL+"",ae.GREATER_THAN+"",ae.GREATER_THAN_OR_EQUALS+"";const no={[Qe.priceGreater]:"For listings that reduce the price, Forest won't cancel existing listings to save on transaction fees. However, you can manually cancel them if you prefer.",[Qe.timeGreater]:"For listings that extend the duration, Forest won't cancel existing listings to save on transaction fees. However, you can manually cancel them if you prefer."};function ro({nftInfo:e,explorerUrl:t,onViewMyListing:n,status:r}){const a=q();vt(a);const[i]=_(!1),s={target:"_blank",rel:"noreferrer"},l=k(()=>(console.log("tipText useMemo",r),r===Qe.priceGreater||r===Qe.timeGreater?no[r]:`The listing of ${e?.tokenName} NFT in the ${e?.nftCollection?.tokenName} collection has been edited.`),[r,e]),c=u("div",{className:"flex flex-1 flex-col items-center",children:[o(Y,{loading:i,type:"primary",size:"ultra",className:"w-full",onClick:()=>{a.hide(),n&&n()},children:"View My Listing"}),null]});return o(Me,{title:" ",open:a.visible,onOk:a.hide,onCancel:a.hide,afterClose:a.remove,footer:c,children:u("div",{className:"flex flex-col h-full",children:[u("div",{className:"flex flex-col items-center justify-between",children:[e?.previewImage&&o(ce,{src:e?.previewImage,className:"w-[128px] h-[128px] rounded-md mb-4 object-contain border border-solid border-lineBorder"}),u("div",{className:"flex items-center justify-center mb-1",children:[e?.nftCollection?.logoImage&&o(ce,{src:e?.nftCollection?.logoImage,className:"!rounded-[4px] w-6 h-6 mr-1 object-contain border border-solid border-lineBorder"}),o("span",{className:"text-textSecondary text-base",children:e?.nftCollection?.tokenName})]}),o("span",{className:"font-semibold text-xl text-textPrimary ",children:e?.tokenName})]}),u("div",{className:"flex flex-1 flex-col items-center mt-12",children:[o("span",{className:"text-textPrimary font-semibold text-2xl",children:"Listing Successfully Edited!"}),o("span",{className:"text-base font-medium text-textSecondary mt-4",children:l})]}),u("a",{href:t,...s,className:"flex mb-4 justify-center items-center text-textSecondary",children:["View on aelf Explorer ",o(en,{className:"fill-textSecondary w-4 h-4 ml-2"})]})]})})}const ao=Se.create(ro),io=60,oo=async(e,t,n)=>{try{if(!t?.nftSymbol||!n||!e)return!1;const{balance:r}=await qn({symbol:t?.nftSymbol,owner:n}),a=t.decimals||0;if(r===0)return!1;const i=await wi({symbol:t.nftSymbol,owner:n},{chain:e});if(console.log("GetListedNFTInfoList",i),i?.error||!i?.value)return{max:Math.floor(g(r).dividedBy(10**Number(a)).toNumber()),listedNFTInfoList:[],listItems:0};const s=i.value.filter(m=>{const p=Number(m.duration.startTime.seconds)+Number(m.duration.durationMinutes)*io;return I().unix()<p}),l=s.reduce((m,p)=>{const{quantity:f}=p||{};return m.plus(ct(f,a||"0"))},Ge),c=new g(r??0).dividedBy(10**Number(a))?.minus(l??0).toNumber(),d=Math.max(c,0);return console.log("balance:::",c,d,s),{max:Math.floor(d),listedNFTInfoList:s,listItems:l.toNumber()}}catch(r){return console.log(r),{max:0,listedNFTInfoList:[],listItems:0}}},We={title:"Approve Listing",portkey:{title:Je,message:Un},default:{title:Je,message:"Please confirm the listing in the wallet."}};function so(e,t){if(!e?.length)return;const n=e.slice(0).sort((r,a)=>new g(r.price.amount).comparedTo(new g(a.price.amount)))[0];return{listingPrice:{price:g(n.price.amount).dividedBy(10**8).toNumber(),token:{symbol:"ELF",tokenId:"ELF",decimals:8}},duration:{type:"date",value:new Date((Number(n?.duration?.startTime?.seconds||0)+Number(n?.duration?.durationMinutes||0)*60+Number(n?.duration.durationHours||0)*3600)*1e3),showPrevious:t},itemsForSell:Number(n.quantity)}}function Gn(e){const{walletInfo:t,aelfInfo:n}=M.getInstance().getStore(),[r,a]=_([]),[i,s]=_(0),[l,c]=_(0),d=Ae(async()=>{if(e?.nftSymbol&&t.address){const m=await oo(e?.chainId,e,t.address);if(!m)return;console.log("getMaxNftQuantityOfSell",m),s(le(e)?1:m.max),a(m.listedNFTInfoList),c(m.listItems)}},[e?.nftSymbol,t?.address]);return L(()=>{d()},[e?.nftSymbol,t?.address]),{maxQuantity:i,listItems:l,listedNFTInfoList:r}}function lo(e){const{data:t}=He(()=>$n({id:e}),{refreshDeps:[e]});return{nftSaleInfo:t}}function zn(e,t,n,r,a){const{walletInfo:i,aelfInfo:s}=M.getInstance().getStore(),{nftSaleInfo:l}=lo(e.id),{listItems:c,maxQuantity:d}=Gn(e),[m,p]=_(!1),[f,v]=_(r?.listingPrice||{}),[b,E]=_(r?.duration||{}),[N,h]=_(le(e)?1:0),{ELFToDollarRate:y}=Jt(),w=q(Vt),A=q(Vt),G=q(to),Z=q(ao);qt();const j=W=>{W&&D.error(W.errorMessage?.message||Ue)},B=()=>{w.hide(),A.hide(),G.hide(),Z.hide(),t.hide(),a&&a()},U=async(W,se)=>{console.log("listWithFixedPrice",W);try{const F=e?.chainId===V.MAIN_NET?Nt().main:Nt().side;if(!await Pi({symbol:e.nftSymbol,address:i?.address,spender:F,amount:ge(W,e?.decimals||"0").toNumber(),chainId:e.chainId}))return j(),Promise.reject(Ue);const ue=Xi(b),K=await Ai({symbol:e.nftSymbol,price:{symbol:f?.token?.symbol||"",amount:Number(ge(f?.price,f?.token?.decimals))},quantity:ge(W,e?.decimals||"0").toNumber(),duration:ue,whitelists:null,isWhitelistAvailable:!1},{chain:e.chainId});if(K?.error||!K)return j(K||Ue),Promise.reject(K||Ue);const{TransactionId:je=""}=K.result||K;dt(je||"","success",e.chainId);const P=Zt(je,"transaction",e.chainId);w.hide(),G.show({nftInfo:e,explorerUrl:P,onViewMyListing:B})}catch(F){const ue=F;return D.error(ue.errorMessage?.message||Ue),Promise.reject(F)}},X=()=>{w.hide(),t.show({nftInfo:e,type:"add",defaultData:{listingPrice:f,duration:b,itemsForSell:N}})},J=W=>{const{amount:se,extendStatus:F}=W;console.log("showListingPromptModal",se),w.show({nftInfo:{image:l?.logoImage,collectionName:l?.collectionName,nftName:e?.tokenName,priceTitle:e&&le(e)?"Listing Price":"Listing Price Per Item",price:`${f.price?C(f.price):"--"} ELF`,usdPrice:me?Ce(me):"$ --",item:e&&le(e)?void 0:H(N,"item")},title:We.title,content:{title:i.portkeyInfo?We.portkey.title:We.default.title,content:i.portkeyInfo?We.portkey.message:We.default.message},buttonConfig:[{btnText:"Try Again",onConfirm:async()=>await U(se)},{btnText:"Edit Listing",onConfirm:X}],initialization:async()=>await U(se),onClose:()=>{w.hide()}})},ee=()=>{if(Number(N)>Number(d))return D.error("Your balance of NFT is not enough"),!1;if(b?.type==="date"){const W=I(b.value).diff(I()),se=I.duration(W).asMinutes(),F=Math.floor(I.duration(W).asMonths());if(se<15)return D.error("The listing duration should be at least 15 minutes."),!1;if(F>6)return D.error("The listing duration should be no more than 6 months."),!1}return!0},z=async()=>{!i.address||!e.nftSymbol||!ee()||(t.hide(),le(e)&&n==="add"&&J({amount:1}),le(e)||J({amount:N}))};L(()=>{if(!Number(f.price)||!b?.value||!Number(N)){p(!0);return}p(!1)},[b,f,N]);const me=k(()=>{if(!(!f?.price||!y))return y*Number(f.price)},[y,f]);return{nftSaleInfo:l,listingBtnDisable:m,listingPrice:f,setListingPrice:v,listItems:c,setDuration:E,onCompleteListingHandler:z,listingUSDPrice:me,itemsForSell:N,setItemsForSell:h,availableItemForSell:d}}var mt={preview:"SummaryInfo-module_preview__vptVV",infoItem:"SummaryInfo-module_infoItem__RrjCl",infoItem_normal:"SummaryInfo-module_infoItem_normal__WNG-1"};const It=({left:e,right:t,className:n=""})=>u("div",{className:mt.infoItem,children:[o("span",{className:`${mt.infoItem_normal} ${n}`,children:e}),o("span",{className:`${mt.infoItem_normal} ${n}`,children:t})]}),co=({listingPrice:e="",itemsForSell:t=1,forestFees:n=.025})=>{const r=new g(t),a=new g(e),i=a.isNaN()?"--":C(a.times(r)),s=r.isNaN()||a.isNaN()?"--":a.times(r).times(1-n).toNumber(),l=new g(n).times(100).toNumber();return{showPrice:`${C(i)} ELF`,showForestFees:`${l}%`,totalPrice:`${C(s)} ELF`}};function Jn(e){const{showPrice:t,showForestFees:n,totalPrice:r}=co(e);return u("div",{className:"-mb-2 flex flex-col mt-6",children:[o("span",{className:mt.preview,children:"Preview"}),o(It,{left:"Listing Price",right:t}),o(It,{left:"Forest Fees",right:n}),o(It,{className:"!text-textPrimary",left:"Total Potential Earnings",right:r})]})}const In=10;function mo({onChange:e,defaultPrice:t,checkValid:n}){const[r,a]=_(t),[i,s]=_({symbol:"ELF",tokenId:"ELF",decimals:8}),[l,c]=_(),d=Ae(m=>{const{target:p}=m;let f=String(p.value||"").replaceAll(",","");const v=f.indexOf("."),b=f.lastIndexOf(".");v>-1&&v!==b&&(f=f.slice(0,-1));const E=new g(f);if((E.e||0)>In-1)return f.slice(0,In);const[,N]=f.split("."),h=4;E.gte(0)?a((N?.length||0)>=+h?E.toFixed(+h,g.ROUND_DOWN):f):a("")},[]);return L(()=>{e&&e({token:i,price:r})},[r,e,i]),Mr(()=>{const m=isNaN(Number(r))||Number(r)<=0||n&&!n?.(Number(r))?"error":"";c(m)},[r]),{inputChangeHandler:d,price:r,setPrice:a,token:i,setToken:s,status:l}}var it={shortCut:"setPrice-moudule_shortCut__C805h",shortCut_title:"setPrice-moudule_shortCut_title__kDi6k",shortCut_price:"setPrice-moudule_shortCut_price__PSte4",shortCut_unit:"setPrice-moudule_shortCut_unit__pa3DH"};const kt={ELF:{symbol:"ELF",tokenId:"ELF",decimals:8,icon:"ELF"}};function uo({title:e,price:t,unit:n="ELF",onClick:r}){return u("div",{className:"bg-fillHoverBg h-[56px] flex items-center justify-center flex-1 mx-2 rounded-lg cursor-pointer",onClick:r,children:[o("span",{className:"text-base font-semibold text-textPrimary",children:e}),o("span",{className:"text-base font-normal text-textSecondary ml-4",children:C(t)}),o("span",{className:"text-base font-normal text-textSecondary",children:n})]})}function po({title:e,price:t,unit:n="ELF",onClick:r}){return u("div",{className:it.shortCut,onClick:r,children:[o("span",{className:it.shortCut_title,children:e}),o("span",{className:it.price,children:C(t)}),o("span",{className:it.unit,children:n})]})}const fo=e=>u("span",{className:"font-medium text-textPrimary text-lg rounded-lg",children:[e.title,e.tooltip?o(Ht,{title:e.tooltip,children:o(Mn,{className:"text-base ml-1"})}):null]}),ho=({floorPrice:e,lastSalePrice:t,bestOfferPrice:n,onChangePrice:r,isMobile:a})=>{const i=[{title:"Floor Price",price:e},{title:"Last Sale",price:t},{title:"Best Offer",price:n}].filter(l=>Number(l.price||"")>0);if(!i.length)return null;const s=a?po:uo;return o("div",{className:`mt-4 flex -mx-2 ${a?"flex-col":""}`,children:i.map(l=>o(s,{title:l.title,price:C(l.price||""),onClick:()=>{r&&r(l.price)}},l.title))})},go=e=>{const t=String(e),n=t.indexOf(".");return n>-1?`${C(t.slice(0,n))}${t.slice(n)}`:C(e||"")};function Kn(e){const{price:t,setToken:n,setPrice:r,inputChangeHandler:a,status:i}=mo(e),{errorTip:s,placeholder:l,defaultErrorTip:c}=e,d=go(t||"");o(Yt,{defaultValue:"ELF",bordered:!1,popupClassName:"!border-none",getPopupContainer:p=>p,className:"!border-0 !my-4 !h-6 !-mr-[11px] !border-l border-solid !border-lineDividers !rounded-none",onChange:p=>n(kt?.[p]),onClick:p=>{p.stopPropagation(),p.preventDefault()},children:Object.values(kt).map(p=>o(Kt,{value:p.tokenId,children:o("span",{className:"flex items-center mr-4",children:p.symbol})},p.tokenId))});const m=()=>(e?.valid||i)!=="error"?null:s?o("div",{className:"mt-2 text-xs text-error",children:s}):o("div",{className:"mt-2 text-xs text-error",children:o("span",{children:c||"Please enter a correct price."})});return u("div",{className:`mt-6 ${e.className}`,children:[fo(e),o(ho,{lastSalePrice:e.lastSalePrice,floorPrice:e.floorPrice,bestOfferPrice:e.bestOfferPrice,onChangePrice:p=>{r(p),n(kt.ELF)},isMobile:!0}),o(Fe,{size:"large",onKeyDown:p=>{/\d|\.|Backspace|ArrowRight|ArrowLeft|ArrowUp|ArrowDown/.test(p.key)||p.preventDefault()},onChange:a,value:d,placeholder:l||"Enter a price",suffix:"ELF",className:"mt-0",status:e?.valid||i}),m()]})}var yo={"time-picker-popup":"style-module_time-picker-popup__gf83G","date-picker-mobile":"style-module_date-picker-mobile__c5xPH","adm-picker-header":"style-module_adm-picker-header__2RsE0","adm-picker-header-button":"style-module_adm-picker-header-button__Zy5VV","adm-picker-body":"style-module_adm-picker-body__bq8ck","adm-picker-view":"style-module_adm-picker-view__B86Sh","adm-picker-view-column":"style-module_adm-picker-view-column__6xVQ1","adm-picker-view-column-item":"style-module_adm-picker-view-column-item__fb6h0","adm-picker-view-mask":"style-module_adm-picker-view-mask__GtuK-","adm-picker-view-mask-top":"style-module_adm-picker-view-mask-top__fSwrF","adm-picker-view-mask-bottom":"style-module_adm-picker-view-mask-bottom__YYsiu","adm-picker-view-mask-middle":"style-module_adm-picker-view-mask-middle__oPUp5"};function _o(e){const{visible:t,onConfirm:n,onCancel:r,value:a,className:i,defaultValue:s,max:l}=e,c=k(()=>new Date(I(s).valueOf()+Ji),[s]);return o(Rr,{className:`${yo["date-picker-mobile"]} ${i}`,visible:t,confirmText:"Done",cancelText:"Cancel",precision:"minute",onCancel:r,onConfirm:n,min:new Date,max:l,value:a,defaultValue:c})}var kn;function Wt(){return Wt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wt.apply(null,arguments)}var No=function(t){return S.createElement("svg",Wt({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"#ACB8B6",viewBox:"0 0 24 24"},t),kn||(kn=S.createElement("path",{d:"M19 4h-2V3a1 1 0 0 0-2 0v1H9V3a1 1 0 0 0-2 0v1H5a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V7a3 3 0 0 0-3-3m1 15a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-7h16zm0-9H4V7a1 1 0 0 1 1-1h2v1a1 1 0 0 0 2 0V6h6v1a1 1 0 0 0 2 0V6h2a1 1 0 0 1 1 1z"})))};const vo=[{label:"1 hour",value:"1 hours"},{label:"6 hours",value:"6 hours"},{label:"1 day",value:"24 hours"},{label:"3 days",value:"72 hours"},{label:"7 days",value:"168 hours"},{label:"1 month",value:"1 months"},{label:"3 months",value:"3 months"},{label:"6 months",value:"6 months"},{label:"custom",value:"custom"}];function xo({onChange:e,defaultExpirationData:t,checkDateValidate:n}){const r=k(()=>!t||!t?.type?"":t.showPrevious?"previous":t.type==="date"?"custom":`${t?.value} ${t?.type}`,[t]),a=t?.type==="date"?I(t?.value):I(),[i,s]=_(r||"6 months"),[l,c]=_(a),[d,m]=_(!!t?.showPrevious),[p,f]=_(vo.slice(0)),[v,b]=_(!1),[E,N]=_();$r(()=>{console.log("useDurationService",t),t?.showPrevious&&f(w=>[...w,{label:"Previous Listing",value:"previous"}])}),L(()=>{if(!e)return;if(i==="custom"){e({type:"date",value:I(l).toDate()});return}if(i==="previous"){e({type:"date",value:I(a).toDate(),showPrevious:!0});return}const[w,A]=String(i).split(" ");!A||!w||e({type:A,value:w})},[i,l,e]),L(()=>{if(i==="previous"){const Z=I(a);c(Z),y(Z)}const[w,A]=String(i).split(" ");if(!A||!w)return;const G=I().add(Number(w),A);c(G),y(G)},[i]);const h=w=>{s("custom"),c(w),y(w),m(!1)},y=w=>{if(n){const j=n(w);N(j);return}const A=w.diff(I()),G=I.duration(A).asMinutes(),Z=Math.floor(I.duration(A).asMonths());G<15?N("The listing duration should be at least 15 minutes."):Z>6?N("The listing duration should be no more than 6 months."):N("")};return{selectedDate:l,setSelectedDate:c,expirationType:i,setExpirationType:s,mobileDateVisible:v,setMobileDateVisible:b,onSelectDateHandler:h,errorTip:E,showPreviousText:d,optionListArr:p}}var Tn={time:"Duration-module_time__uVbEk",timeBorder:"Duration-module_timeBorder__6msYk"};function Yn(e){const{expirationType:t,setExpirationType:n,selectedDate:r,onSelectDateHandler:a,errorTip:i,mobileDateVisible:s,setMobileDateVisible:l,optionListArr:c}=xo(e),d=()=>{const v=I().add(6,"months").toDate();return u(de,{children:[o("div",{className:Tn.timeBorder,onClick:()=>{l(!0)},children:o("span",{className:Tn.time,children:I(r).format("YYYY/MM/DD hh:mm a")})}),o(_o,{visible:s,onCancel:()=>{l(!1)},onConfirm:b=>{a(I(b)),l(!1)},value:I(r).toDate(),defaultValue:I(r).toDate(),max:v})]})},m=v=>u("div",{className:"flex items-center",children:[o(No,{className:"fill-textPrimary"}),o("span",{className:"ml-2 text-textPrimary",children:v})]}),p=()=>d(),f=()=>i?u("div",{className:"mt-2 text-xs text-error flex justify-between",children:[o("span",{}),o("span",{children:i})]}):null;return u("div",{className:"mt-6",children:[u("span",{className:"font-medium text-textPrimary text-lg rounded-lg",children:["Duration",e.tooltip?o(Ht,{title:e.tooltip,children:o(Mn,{className:"text-base ml-1"})}):null]}),u("div",{className:"mt-4 flex -mx-2 flex-col",children:[o(Yt,{getPopupContainer:v=>v,className:"!mx-2 !h-[56px] ",value:t,optionLabelProp:"label",onChange:n,children:c.map(v=>o(Kt,{value:v.value,label:m(v.label),children:o("span",{children:v.label})},v.value))}),p()]}),f()]})}var Zn={"sale-modal-custom":"index-module_sale-modal-custom__TnlMy","ant-modal-body":"index-module_ant-modal-body__UPPEh","ant-modal-footer":"index-module_ant-modal-footer__F1AEE"};function bo({onChange:e,maxNumber:t}){const[n,r]=_(),[a,i]=_(),s=c=>{console.log("inputChange",c.target.value);const{target:d}=c;let m=String(d.value||"").replaceAll(",","");m=m.replaceAll(".","").slice(0,6),e&&e(m),r(m),l(m)},l=c=>{const d=Number(c)?Number(c)>Number(t)?"error":"":"error";console.log("inputChange status",n),i(d)};return{maxNumber:t,inputChangeHandler:s,value:n,status:a}}var ot={err:"SetSellItemNumber-moudule_err__BmH8W",textErr:"SetSellItemNumber-moudule_textErr__FWyCG",quantity:"SetSellItemNumber-moudule_quantity__jVeHS",available:"SetSellItemNumber-moudule_available__xZB4q"};function wo(e){const{maxNumber:t,inputChangeHandler:n,value:r,status:a}=bo(e),i=()=>o("div",{className:ot.err,children:o("span",{className:ot.textErr,children:a!=="error"?"":"Please enter a correct quantity."})});return u("div",{className:"mt-6",children:[o("span",{className:ot.quantity,children:"Quantity of Items"}),u("div",{className:"mt-4 relative",children:[o(Fe,{size:"large",allowClear:!0,value:C(r||""),status:a,onKeyDown:s=>{/\d|\.|Backspace|ArrowRight|ArrowLeft|ArrowUp|ArrowDown/.test(s.key)||s.preventDefault()},onChange:n,placeholder:"Enter the quantity of items to list"}),u("span",{className:ot.available,children:[gt(t)," available"]})]}),i()]})}function Eo({nftInfo:e,type:t="add",defaultData:n}){const r=q();vt(r);const{nftSaleInfo:a,onCompleteListingHandler:i,listingBtnDisable:s,listingPrice:l,listingUSDPrice:c,setListingPrice:d,setDuration:m,itemsForSell:p}=zn(e,r,t,n),f=o(Y,{type:"primary",size:"ultra",className:"w-[256px]",disabled:s,onClick:i,children:"Complete Listing"}),v=t==="edit"?"Set a New Price":"Set a Price",b=t==="edit"?"If you want to raise the listing price, you need to first cancel any existing listings at a lower price. Listing cancellation will cost transaction fees.":"",E=t==="edit"?"If you want to reduce the listing duration, you need to first cancel any existing listings with a longer duration. Listing cancellation will cost transaction fees.":"";return u(Me,{open:r.visible,onOk:r.hide,onCancel:r.hide,afterClose:r.remove,destroyOnClose:!0,title:`${t==="add"?"List for Sale":"Edit Listing"}`,footer:f,className:Zn["sale-modal-custom"],children:[o(Xt,{image:a?.logoImage||"",collectionName:a?.collectionName,nftName:a?.tokenName,item:H(p,"item"),priceTitle:"Listing Price",price:`${l?.price?C(l?.price):"--"} ELF`,usdPrice:c?Ce(c):"$ --"}),o(Kn,{floorPrice:a?.floorPrice,lastSalePrice:a?.lastDealPrice,onChange:d,title:v,tooltip:b,defaultPrice:l?.price}),o(Yn,{onChange:m,defaultExpirationData:n?.duration,tooltip:E}),o(Jn,{listingPrice:l?.price})]})}function Ao({nftInfo:e,type:t="edit",defaultData:n,onViewNft:r}){const a=q();vt(a);const{nftSaleInfo:i,onCompleteListingHandler:s,listingBtnDisable:l,listingPrice:c,listingUSDPrice:d,setListingPrice:m,setDuration:p,itemsForSell:f,setItemsForSell:v,availableItemForSell:b}=zn(e,a,t,n,r),E=o(Y,{type:"primary",size:"ultra",className:"w-[256px]",disabled:l,onClick:s,children:"Complete Listing"}),N="Set a Price Per Item";return u(Me,{className:Zn["sale-modal-custom"],open:a.visible,onOk:a.hide,onCancel:a.hide,afterClose:a.remove,destroyOnClose:!0,title:`${t==="add"?"List for Sale":"Edit Listing"}`,footer:E,children:[o(Xt,{image:i?.logoImage||"",collectionName:i?.collectionName,nftName:i?.tokenName,item:H(f,"item"),priceTitle:"Listing Price Per Item",price:`${c?.price?C(c?.price):"--"} ELF`,usdPrice:d?Ce(d):"$ --"}),o(wo,{onChange:h=>v(Number(h)),maxNumber:b}),o(Kn,{floorPrice:i?.floorPrice,lastSalePrice:i?.lastDealPrice,onChange:m,title:N,defaultPrice:c.price}),o(Yn,{onChange:p,defaultExpirationData:n?.duration}),o(Jn,{listingPrice:c?.price||"",itemsForSell:f})]})}const Co=Se.create(Ao);Se.create(Eo);function Ko(e){const{nftInfo:t,onViewNft:n}=e,r=q(Co),[a,i]=_(),{listedNFTInfoList:s}=Gn(t);return M.getInstance().getValue("env"),L(()=>{const l=so(s,!0);i(l)},[]),{sell:Ae(()=>{r.show({nftInfo:t,type:"add",defaultData:a,onViewNft:n})},[r,t,a])}}class De{constructor(){this.manager={}}static getInstance(){return De.instance||(De.instance=new De),De.instance}setLogin(t){this.manager.loginFunction=t}}function Yo(e){const{isLogin:t,login:n}=e,[{isLogin:r},{dispatch:a}]=Ie();L(()=>{a({type:"setLoginStatus",payload:{isLogin:t}})},[t]),L(()=>{De.getInstance().setLogin(n)},[n])}export{zo as Collection,Hn as ContractInstance,Go as ForestProvider,M as Store,Jo as useBuy,Ie as useForestStore,Yo as useLoginStatus,Ko as useSell};
//# sourceMappingURL=index.js.map
