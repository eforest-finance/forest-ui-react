import"antd/dist/antd.css";import{jsx as e,jsxs as t,Fragment as n}from"react/jsx-runtime";import*as a from"react";import r,{createContext as i,useContext as s,useReducer as l,useMemo as o,useState as c,useCallback as d,useEffect as m,forwardRef as u,memo as f}from"react";import h,{useModal as p}from"@ebay/nice-modal-react";import{Modal as g,Button as y,Skeleton as _,Image as N,Input as b,message as x,Select as v,Tooltip as w,Tabs as E,Divider as A,Drawer as C,Menu as T,Col as I,Checkbox as k,Row as S,List as P,Layout as L,Empty as M,Card as F}from"antd";import{useThrottleFn as B,useRequest as D,useInfiniteScroll as R,useDebounceFn as O}from"ahooks";import Q from"clsx";import j from"axios";import V from"storages";import U from"moment";import $ from"bignumber.js";import H from"aelf-sdk";import{useRouter as W,usePathname as z,useSearchParams as G}from"next/navigation";import{useUpdateEffect as q,useMount as K}from"react-use";import{InfoCircleOutlined as J,QuestionCircleOutlined as Y}from"@ant-design/icons";import{DatePicker as Z}from"antd-mobile";import{isEqual as X}from"lodash-es";import ee from"rc-virtual-list";import te from"next/link";const ne={initialized:"INITIALIZED",destroy:"DESTROY",setWallet:"setWallet",setLoginStatus:"setLoginStatus",setCurChain:"setCurChain",setAelfInfo:"setAelfInfo"};class ae{constructor(){this.store={}}static getInstance(){return ae.instance||(ae.instance=new ae),ae.instance}getStore(){return this.store}setStore(e,t){this.store[e]=t}getValue(e){return this.store[e]}}const re={chain:"tDVW"},ie=i(re);function se(){return s(ie)}function le(e,{type:t,payload:n}){switch(t){case ne.setAelfInfo:{const t=n.aelfInfo;return t?(ae.getInstance().setStore("aelfInfo",t),Object.assign({},e,{aelfInfo:t})):e}case ne.setWallet:{const t=n.wallet;return t?Object.assign({},e,{wallet:t}):e}case ne.setCurChain:{const t=n.chain;return t?Object.assign({},e,{chain:t}):e}case ne.setLoginStatus:{const t=n.isLogin;return Object.assign({},e,{isLogin:t})}default:return Object.assign({},e,n)}}function oe({children:t}){const[n,a]=l(le,re),r=o((()=>[{...n},{dispatch:a}]),[n]);return e(ie.Provider,{value:r,children:e(h.Provider,{children:t})})}var ce,de="index-module_modal-wrap__Ppw01",me="index-module_modal__ntH48",ue="index-module_modal-mobile__IAOLd",fe="index-module_button__yslqU",he="index-module_forest-btn-ultra__7OT5F",pe="index-module_forest-btn-mini__NZWdL",ge="index-module_button-full__UIRe7";function ye(){return ye=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ye.apply(null,arguments)}var _e=function(e){return a.createElement("svg",ye({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 18 18"},e),ce||(ce=a.createElement("g",{stroke:"#5C6764",strokeLinecap:"round",strokeWidth:1.6},a.createElement("path",{d:"m4.404 13.596 9.193-9.192M4.404 4.404l9.193 9.192"}))))};var Ne=r.memo((function(n){const{children:a,className:r,title:i,subTitle:s,wrapClassName:l}=n;return e(g,{keyboard:!1,maskClosable:!1,destroyOnClose:!0,closeIcon:e(_e,{}),width:800,centered:!0,...n,className:`${me} ${ue} ${r||""}`,wrapClassName:`${de} ${l}`,okButtonProps:{className:`${fe}`},cancelButtonProps:{className:`${fe}`},title:t("div",{children:[e("div",{className:"pr-8 break-words",children:i}),s&&e("div",{className:" text-base font-medium mt-8 text-textSecondary",children:s})]}),children:a})}));var be,xe,ve,we=r.memo((function(t){const{children:n,size:a="large",isFull:r,millisecondOfThrottle:i=0}=t,s={ultra:he,mini:pe},l=a&&["ultra","mini"].includes(a),{run:o}=B((e=>{t.onClick&&t.onClick(e)}),{wait:i});return e(y,{...t,size:l?"middle":a,onClick:o,className:`${fe} ${l?s[a]:""} ${r&&ge} ${t.className}`,children:n})})),Ee="style-module_wrap__4l3Lv",Ae="style-module_image__5suRf",Ce="style-module_right__DI7vt",Te="style-module_priceTitle__vRR9b",Ie="style-module_price__6DwGa",ke="style-module_usdPrice__4P1CG",Se="style-module_flexWrap__dSXqk",Pe="style-module_collectionWrapper__4RxFc",Le="style-module_nftWrapper__KFGgC",Me="style-module_collectionName__79fh7",Fe="style-module_nftName__h-KZu",Be="style-module_nftItem__hFAKr",De={"img-loading-wrapper":"style-module_img-loading-wrapper__wF1Ef","loading-image-default-wrapper":"style-module_loading-image-default-wrapper__aOmjd","marketplace-mobile":"style-module_marketplace-mobile__JBD9y","img-enhance-wrapper":"style-module_img-enhance-wrapper__3dul-"};(xe=be||(be={})).Checkbox="Checkbox",xe.Range="Range",xe.SearchCheckbox="SearchCheckbox",xe.Single="Single",xe.Multiple="Multiple",function(e){e.large="large",e.small="small",e.details="details"}(ve||(ve={}));const Re="sorting",Oe={key:Re,title:Re,type:be.Single,data:[{value:"Low to High",label:"Price: Low to High"},{value:"High to Low",label:"Price: High to Low"},{value:"Recently Listed",label:"Recently Listed"}]};var Qe,je,Ve,Ue,$e,He,We,ze;!function(e){e.Status="Status",e.Chain="Chain",e.Symbol="Symbol",e.Price="Price",e.Generation="Generation",e.Traits="Traits",e.ActivityType="ActivityType",e.Rarity="Rarity",e.Mine="Mine",e.Collections="Collections"}(Qe||(Qe={})),function(e){e[e.FT=0]="FT",e[e.NFT=1]="NFT"}(je||(je={})),function(e){e[e["Buy Now"]=1]="Buy Now",e[e["My Items"]=2]="My Items",e[e["On Auction"]=3]="On Auction",e[e["Has Offers"]=4]="Has Offers"}(Ve||(Ve={})),function(e){e.nft="nft",e.collection="collection"}(Ue||(Ue={})),function(e){e[e.MAINNET=1]="MAINNET",e[e.KOVAN=42]="KOVAN",e[e.BSC_MAINNET=56]="BSC_MAINNET",e[e.BSC_TESTNET=97]="BSC_TESTNET",e[e.HECO_MAINNET=128]="HECO_MAINNET",e[e.HECO_TESTNET=256]="HECO_TESTNET",e[e.OEC_MAINNET=66]="OEC_MAINNET",e[e.OEC_TESTNET=65]="OEC_TESTNET",e[e.POLYGON_MAINNET=137]="POLYGON_MAINNET",e[e.POLYGON_TESTNET=80001]="POLYGON_TESTNET"}($e||($e={})),function(e){e.MAIN_NET="AELF",e.TDVV_NET="tDVV",e.TDVW_NET="tDVW"}(He||(He={})),function(e){e[e["Buy Now"]=1]="Buy Now",e[e["My Items"]=2]="My Items",e[e["On Auction"]=3]="On Auction",e[e["Has Offers"]=4]="Has Offers"}(We||(We={})),function(e){e[e.FT=0]="FT",e[e.NFT=1]="NFT"}(ze||(ze={}));const Ge=e=>""===e?void 0:new $(e).toNumber(),qe=(e,t)=>{const n=e.Status.data.map((e=>e.value)),a=e.Generation.data.map((e=>e.value)),r=e.Rarity?.data?.map?.((e=>e.value)),i=function(){const t=Object.keys(e).filter((e=>e.includes(Qe.Traits)));if(!t.length)return null;const n=[];return t.forEach((t=>{const[,a]=t.split("-");!a||!e?.[t]?.data?.length||n.push({key:a,values:e[t].data.map((e=>e.value))})})),n}(),s={ChainList:e.Chain.data.map((e=>e.value)),SymbolTypeList:e.Symbol.data.map((e=>e.value)),PriceLow:Ge(e.Price.data[0].min),PriceHigh:Ge(e.Price.data[0].max),HasListingFlag:n.includes(We["Buy Now"]),HasAuctionFlag:n.includes(We["On Auction"]),HasOfferFlag:n.includes(We["Has Offers"])};return a?.length&&Object.assign(s,{generation:a}),i?.length&&Object.assign(s,{traits:i}),r?.length&&Object.assign(s,{RarityList:r}),t&&["PriceLow","PriceHigh","HasListingFlag","HasAuctionFlag","HasOfferFlag"].forEach((e=>delete s[e])),s};function Ke(e,t){const{decimalPlaces:n=4,roundingMode:a=$.ROUND_DOWN}=t||{},r=$.isBigNumber(e)?e:new $(e);if(r.isNaN())return`${e}`;if(!r.isEqualTo(0)&&r.lt(1e-4))return"< 0.0001";const i=r.toFixed(n,a);return new $(i).toFormat()}const Je=e=>({[Qe.Status]:{type:be.Checkbox,data:[]},[Qe.Chain]:{type:be.Checkbox,data:[{value:e,label:`SideChain ${e}`,disabled:!0}]},[Qe.Price]:{type:be.Range,data:[{min:"",max:""}]},[Qe.Symbol]:{type:be.Checkbox,data:[]},[Qe.Generation]:{type:be.Checkbox,data:[]},[Qe.Traits]:{type:be.Checkbox,data:[]}});const Ye=(e,t)=>{const n=[{key:Qe.Status,title:Qe.Status,type:be.Checkbox,data:[{value:We["Buy Now"],label:We[1]},{value:We["On Auction"],label:We[3]},{value:We["Has Offers"],label:We[4]}]},{key:Qe.Chain,title:Qe.Chain,type:be.Checkbox,data:[{value:t,label:`SideChain ${t}`,disabled:!0}]},{key:Qe.Price,title:Qe.Price,type:be.Range,data:[]},{key:Qe.Symbol,title:Qe.Symbol,showClearAll:!0,type:be.Checkbox,data:[{value:ze.FT,label:"FT"},{value:ze.NFT,label:"NFT"}]},{key:Qe.Traits,title:Qe.Traits,showClearAll:!0,type:be.SearchCheckbox,data:[]},{key:Qe.Generation,title:Qe.Generation,showClearAll:!0,type:be.Checkbox,data:[]},{key:Qe.Rarity,title:Qe.Rarity,showClearAll:!0,type:be.Checkbox,data:[]}];return"nft"===e&&(n.splice(3,1),n[0].data.splice(1,1)),n};function Ze(e,t){const{decimalPlaces:n=4,roundingMode:a=$.ROUND_DOWN}=t||{},r=$.isBigNumber(e)?e:new $(e);if(r.isNaN())return`${e}`;const i=r.toFixed(n,a),s=new $(i);return 0===r.comparedTo(0)?"$ 0":-1===s.comparedTo(1e-4)?"<$ 0.0001":`$ ${s.toFormat()}`}const Xe=(e,t)=>"number"!=typeof e?e:"day"===t?e>1?`${Ke(e)} days`:`${Ke(e)} day`:e>1?t.endsWith("s")||t.endsWith("x")||t.endsWith("ch")||t.endsWith("sh")?`${Ke(e)} ${t}es`:t.endsWith("y")?`${Ke(e)} ${t.slice(0,-1)}ies`:`${Ke(e)} ${t}s`:`${Ke(e)} ${t}`;var et;!function(e){e.TEST="test",e.DEVELOPMENT="development",e.DEVELOPMENT4="development4",e.PRODUCTION="production"}(et||(et={}));const tt={[et.TEST]:{AELF:"https://explorer-test.aelf.io/",TDVV:"https://explorer-test-side02.aelf.io/",TDVW:"https://explorer-test-side02.aelf.io/"},[et.PRODUCTION]:{AELF:"https://explorer.aelf.io/",TDVV:"https://tdvv-explorer.aelf.io/",TDVW:"https://tdvv-explorer.aelf.io/"}},nt=e=>{const t=ae.getInstance().getValue("env");return{AELF:tt[t].AELF,TDVV:tt[t].TDVV,TDVW:tt[t].TDVW}[e]},at=e=>{const t=Number(e);return""===e||Number.isNaN(t)?"-":`${t.toLocaleString(void 0,{maximumFractionDigits:8})}`},rt=(e,t,n)=>{if(!t)return t;let a=t;const r="ELF_",i=`_${n||e?.curChain}`;return t.startsWith(r)||(a=`${r}${a}`),t.endsWith(i)||(a=`${a}${i}`),a};const it=e=>new Promise((t=>{setTimeout((()=>{t()}),e)}));const st=new $(0);function lt(e,t=18){if(!e)return st;const n=$.isBigNumber(e)?e:new $(e||"");return n.isNaN()?st:"string"==typeof t&&t.length>10?n.div(t):n.div(`1e${t}`)}function ot(e,t=18){if(!e)return st;const n=$.isBigNumber(e)?e:new $(e||"");return n.isNaN()?st:"string"==typeof t&&t.length>10?n.times(t):n.times(`1e${t||18}`)}const ct=e=>{const t=e-(new Date).getTime();if(t<0)return"in 1 minute";const n=t/2592e6,a=t/864e5,r=t/36e5,i=t/6e4;return n>=1?`in ${Xe(Math.floor(n),"month")}`:a>=1?`in ${Xe(Math.floor(a),"day")}`:r>=1?`in ${Xe(Math.floor(r),"hour")}`:i>=1?`in ${Xe(Math.floor(i),"minute")}`:"in 1 minute"},dt=e=>!(e=>{const t=e?.nftSymbol&&e.nftSymbol.split("-")[1];if(t){const n=e?.totalQuantity;return"0"!==t&&n>1}})(e);function mt(e,t,n){const a=n&&n.toUpperCase()||SupportedELFChainId.MAIN_NET,r=nt[a];switch(t){case"transaction":return`${r}tx/${e}`;case"token":return`${r}token/${e}`;case"block":return`${r}block/${e}`;default:return`${r}address/${e}`}}function ut({src:t="",alt:n,onError:a,...r}){const[i,s]=c(0),[{aelfInfo:l={}}]=se(),m=o((()=>function(e,t,n){let a=null;try{a=new URL(e)}catch{return[e]}if("ipfs.io"===a.host.toLowerCase()){const r=a.pathname.replace("/ipfs/","");return[`${t}/${r}`,`${n}/${r}`,e]}if("ipfs:"===a.protocol.toLowerCase()){const n=e.match(/^ipfs:(\/\/)?(.*)$/i)?.[2];return[`${t}/${n}`,`https://ipfs.io/ipfs/${n}`]}return[e]}(t,l.ipfsToS3ImageURL,l.ipfsToSchrodingerURL)),[t,l.ipfsToS3ImageURL,l.ipfsToSchrodingerURL]),u=o((()=>m[i]),[i,m]),f=d((e=>{const t=i+1;m[t]?s(t):a?.(e)}),[i,m,a]),h=e(_.Image,{active:!0,className:Q(r.className,"!w-full !h-full")});return e(N,{loading:"lazy",alt:n,onError:f,placeholder:h,preview:!1,rootClassName:De["img-enhance-wrapper"],...r,src:u,fallback:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMIAAADDCAYAAADQvc6UAAABRWlDQ1BJQ0MgUHJvZmlsZQAAKJFjYGASSSwoyGFhYGDIzSspCnJ3UoiIjFJgf8LAwSDCIMogwMCcmFxc4BgQ4ANUwgCjUcG3awyMIPqyLsis7PPOq3QdDFcvjV3jOD1boQVTPQrgSkktTgbSf4A4LbmgqISBgTEFyFYuLykAsTuAbJEioKOA7DkgdjqEvQHEToKwj4DVhAQ5A9k3gGyB5IxEoBmML4BsnSQk8XQkNtReEOBxcfXxUQg1Mjc0dyHgXNJBSWpFCYh2zi+oLMpMzyhRcASGUqqCZ16yno6CkYGRAQMDKMwhqj/fAIcloxgHQqxAjIHBEugw5sUIsSQpBobtQPdLciLEVJYzMPBHMDBsayhILEqEO4DxG0txmrERhM29nYGBddr//5/DGRjYNRkY/l7////39v///y4Dmn+LgeHANwDrkl1AuO+pmgAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAwqADAAQAAAABAAAAwwAAAAD9b/HnAAAHlklEQVR4Ae3dP3PTWBSGcbGzM6GCKqlIBRV0dHRJFarQ0eUT8LH4BnRU0NHR0UEFVdIlFRV7TzRksomPY8uykTk/zewQfKw/9znv4yvJynLv4uLiV2dBoDiBf4qP3/ARuCRABEFAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghgg0Aj8i0JO4OzsrPv69Wv+hi2qPHr0qNvf39+iI97soRIh4f3z58/u7du3SXX7Xt7Z2enevHmzfQe+oSN2apSAPj09TSrb+XKI/f379+08+A0cNRE2ANkupk+ACNPvkSPcAAEibACyXUyfABGm3yNHuAECRNgAZLuYPgEirKlHu7u7XdyytGwHAd8jjNyng4OD7vnz51dbPT8/7z58+NB9+/bt6jU/TI+AGWHEnrx48eJ/EsSmHzx40L18+fLyzxF3ZVMjEyDCiEDjMYZZS5wiPXnyZFbJaxMhQIQRGzHvWR7XCyOCXsOmiDAi1HmPMMQjDpbpEiDCiL358eNHurW/5SnWdIBbXiDCiA38/Pnzrce2YyZ4//59F3ePLNMl4PbpiL2J0L979+7yDtHDhw8vtzzvdGnEXdvUigSIsCLAWavHp/+qM0BcXMd/q25n1vF57TYBp0a3mUzilePj4+7k5KSLb6gt6ydAhPUzXnoPR0dHl79WGTNCfBnn1uvSCJdegQhLI1vvCk+fPu2ePXt2tZOYEV6/fn31dz+shwAR1sP1cqvLntbEN9MxA9xcYjsxS1jWR4AIa2Ibzx0tc44fYX/16lV6NDFLXH+YL32jwiACRBiEbf5KcXoTIsQSpzXx4N28Ja4BQoK7rgXiydbHjx/P25TaQAJEGAguWy0+2Q8PD6/Ki4R8EVl+bzBOnZY95fq9rj9zAkTI2SxdidBHqG9+skdw43borCXO/ZcJdraPWdv22uIEiLA4q7nvvCug8WTqzQveOH26fodo7g6uFe/a17W3+nFBAkRYENRdb1vkkz1CH9cPsVy/jrhr27PqMYvENYNlHAIesRiBYwRy0V+8iXP8+/fvX11Mr7L7ECueb/r48eMqm7FuI2BGWDEG8cm+7G3NEOfmdcTQw4h9/55lhm7DekRYKQPZF2ArbXTAyu4kDYB2YxUzwg0gi/41ztHnfQG26HbGel/crVrm7tNY+/1btkOEAZ2M05r4FB7r9GbAIdxaZYrHdOsgJ/wCEQY0J74TmOKnbxxT9n3FgGGWWsVdowHtjt9Nnvf7yQM2aZU/TIAIAxrw6dOnAWtZZcoEnBpNuTuObWMEiLAx1HY0ZQJEmHJ3HNvGCBBhY6jtaMoEiJB0Z29vL6ls58vxPcO8/zfrdo5qvKO+d3Fx8Wu8zf1dW4p/cPzLly/dtv9Ts/EbcvGAHhHyfBIhZ6NSiIBTo0LNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiEC/wGgKKC4YMA4TAAAAABJRU5ErkJggg=="})}var ft=r.memo((n=>{const{collectionName:a,nftName:r,item:i,priceTitle:s,price:l,usdPrice:o}=n;return t("div",{children:[t("div",{className:Ee,children:[e("div",{className:Se,children:n.image&&e("div",{className:"w-[84px] h-[84px] mr-[16px] flex justify-center items-center overflow-hidden rounded-md border border-solid border-lineBorder",children:e(ut,{src:n.image,className:Ae})})}),t("div",{className:Ce,children:[s&&e("p",{className:Te,children:s}),l&&e("p",{className:Ie,children:l}),o&&e("p",{className:ke,children:o})]})]}),t("div",{className:Pe,children:[e("p",{className:Me,children:a}),t("div",{className:Le,children:[e("p",{className:Fe,children:r}),e("p",{className:Be,children:i})]})]})]})})),ht="index-module_wrapper__bERt3",pt="index-module_content__9KhEL",gt="index-module_title__cptUl",yt="index-module_contentCmp__f3SbH";const _t="Pending transaction confirmation",Nt="Please wait for auto confirmation.";var bt,xt,vt=h.create((function({title:a,nftInfo:r,buttonConfig:i,initialization:s,content:l,onClose:o}){const d=p(),[u,f]=c(!0),[h,g]=c(!1),y=async e=>{if(e)try{return void await e()}catch{return g(!0),void f(!1)}else if(s)try{return void await s()}catch{return g(!0),void f(!1)}},_=[{btnText:"Try again",onConfirm:y}],N=t=>"string"==typeof t?e("p",{children:t}):t instanceof Array?t.map(((t,n)=>e("p",{children:t},n))):t;return m((()=>(d.visible&&y(),()=>{g(!1)})),[d.visible,a,r,i,s,l,o]),e(Ne,{title:a,open:d.visible,onOk:()=>y(),onCancel:()=>{o?o():d.hide()},afterClose:d.remove,footer:!h||"boolean"==typeof i&&!i?null:e(n,{children:(i||_).map(((t,n)=>e(we,{type:"primary",size:"ultra",disabled:u,isFull:!0,className:"false",onClick:()=>(async e=>{try{f(!0),await y(e),f(!1)}catch{f(!1)}})(t?.onConfirm),children:t.btnText},n)))}),children:t("div",{className:ht,children:[e(ft,{...r}),l?t("div",{className:pt,children:[e("div",{className:gt,children:l?.title?N(l?.title):_t}),e("div",{className:yt,children:N(l?.content)})]}):null,u&&e("div",{className:"absolute w-full h-full top-0 left-0 flex justify-center items-center",children:e("div",{className:"p-[24px] w-max h-max bg-fillMask2 rounded-[16px]"})})]})})}));function wt(){return wt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},wt.apply(null,arguments)}var Et=function(e){return a.createElement("svg",wt({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"#1B76E2",viewBox:"0 0 16 16"},e),bt||(bt=a.createElement("path",{d:"M13.938 14.5H2.094a.56.56 0 0 1-.563-.562V2.094c0-.311.252-.563.563-.563h4.908a.562.562 0 1 1 0 1.125H2.656v10.719h10.719v-4.32a.562.562 0 1 1 1.125 0v4.883c0 .31-.252.562-.562.562"})),xt||(xt=a.createElement("path",{d:"M14.498 2.056v-.008a1 1 0 0 0-.01-.076q0-.002-.002-.005a1 1 0 0 0-.024-.076v-.002q-.016-.037-.034-.072-.001 0-.002-.003a1 1 0 0 0-.042-.064l-.005-.006-.022-.027-.001-.003-.025-.025-.006-.006-.025-.024-.002-.001-.03-.022-.006-.005a1 1 0 0 0-.067-.04l-.002-.002a.5.5 0 0 0-.154-.05l-.005-.001-.038-.005h-.004q-.015-.002-.032-.002h-3.959a.562.562 0 1 0 0 1.125h2.578L7.62 7.62a.561.561 0 0 0 .398.96.57.57 0 0 0 .398-.165l4.96-4.96v2.543a.562.562 0 1 0 1.125 0V2.095q0-.019-.002-.039"})))},At="style-module_nft-list-text-ellipsis__byil3";var Ct=r.memo((n=>{const{collectionName:a,nftName:r,item:i,priceTitle:s,price:l,usdPrice:c,onClick:d}=n,m=o((()=>"number"==typeof i?Xe(i,"item"):i),[i]);return t("div",{className:Q("flex justify-between pb-[16px] overflow-hidden",d&&"cursor-pointer"),onClick:d,children:[t("div",{className:"flex items-center mr-[16px] overflow-hidden flex-1",children:[n?.image&&e("div",{className:"overflow-hidden w-[48px] h-[48px] mdTW:w-[84px] mdTW:h-[84px] flex justify-center items-center mr-[16px] rounded-md border border-solid border-lineBorder",children:e(ut,{src:n.image,className:"!rounded-none"})}),t("div",{className:"flex flex-1 flex-col justify-between items-start overflow-hidden",children:[e("p",{className:Q("text-base font-medium text-textSecondary",At),children:a}),e("p",{className:Q("text-xl font-semibold text-textPrimary",At),children:r}),e("p",{className:Q("text-base font-medium text-textSecondary",At),children:m})]})]}),t("div",{className:"flex min-w-fit flex-col justify-between items-end",children:[e("p",{className:"text-base font-medium text-textSecondary",children:s}),e("p",{className:"text-xl font-semibold text-textPrimary",children:l}),e("p",{className:"text-base font-medium text-textSecondary",children:c})]})]})})),Tt="index-module_wrap__wKewn",It="index-module_preview__HLrie",kt="index-module_info__zOKAb",St="index-module_logo__GWdaY";var Pt=r.memo((a=>{const{previewImage:r,info:i}=a;return t("div",{className:Tt,children:[r&&e(ut,{src:r,className:It}),i&&t(n,{children:[t("div",{className:kt,children:[i?.logoImage&&e(ut,{src:i?.logoImage,className:St}),i.subTitle&&e("span",{className:"text-textSecondary text-base",children:i.subTitle})]}),i?.title&&e("span",{className:"font-semibold text-xl text-textPrimary ",children:i.title}),i?.extra&&e("span",{className:"text-textSecondary text-base font-medium",children:i.extra})]})]})})),Lt="style-module_wrap__rM5GL",Mt="style-module_title__lYjGS",Ft="style-module_desc__tpTaf",Bt="style-module_errWrap__Cc-Yj",Dt="style-module_errTitle__EkcMB",Rt="style-module_errDesc__6scEe",Ot="style-module_jumpInfo__aXV5t";var Qt,jt=h.create((function({previewImage:n,jumpInfo:a,title:r,description:i,buttonInfo:s,hideButton:l=!1,info:d,error:m,onCancel:u}){const f=p(),[h,g]=c(!1),y=o((()=>({})),[]),_=async()=>{if(s?.onConfirm)return s.openLoading&&g(!0),await s.onConfirm(),void g(!1);f.hide()},N=o((()=>a?t("a",{href:a.url,...y,className:"flex items-center text-textSecondary",children:[a.btnText||"View on aelf Explorer"," ",e(Et,{className:"fill-textSecondary w-4 h-4 ml-2"})]}):null),[y,a]);l&&!a||t("div",{className:"w-full flex flex-col items-center",children:[l?null:e(we,{type:"primary",size:"ultra",loading:h,isFull:!0,className:"false",onClick:_,children:s?.btnText||"View"}),a?e("div",{className:"mt-[16px]",children:N}):null]});const b=l?null:e("div",{className:"w-full flex flex-col items-center",children:e(we,{type:"primary",size:"ultra",loading:h,isFull:!0,className:"false",onClick:_,children:s?.btnText||"View"})}),x=t=>"string"==typeof t?e("p",{children:t}):t instanceof Array?t.map(((t,n)=>e("p",{children:t},n))):t;return e(Ne,{title:" ",open:f.visible,onOk:f.hide,onCancel:u||f.hide,afterClose:f.remove,footer:b,children:t("div",{className:Lt,children:[e(Pt,{previewImage:n,info:d}),t("div",{className:"flex flex-col items-center mt-[24px] mdTW:mt-[48px]",children:[e("span",{className:Mt,children:r}),e("p",{className:Ft,children:x(i)})]}),m&&t("div",{className:Bt,children:[e("span",{className:Dt,children:m.title}),m.description?e("p",{className:Rt,children:x(m.description)}):null,m?.list?.length&&e("div",{className:"mt-[32px]",children:m.list?.map(((t,n)=>e(Ct,{...t},n)))})]}),e("div",{className:Ot,children:N})]})})})),Vt={image:"index-module_image__jZUrX","collection-tokenName":"index-module_collection-tokenName__45I1P",tokenName:"index-module_tokenName__M-5Kc",priceDesc:"index-module_priceDesc__6Jxl3",price:"index-module_price__zkUvG",usdPrice:"index-module_usdPrice__9IiVR",quality:"index-module_quality__n-ESi"};!function(e){e[e.BUY=1]="BUY",e[e.BUY721=2]="BUY721",e[e.MAKEOFFER=3]="MAKEOFFER",e[e.MAKEOFFER721=4]="MAKEOFFER721",e[e.DEAL=5]="DEAL"}(Qt||(Qt={}));const Ut={[Qt.BUY]:"Average Item Price",[Qt.BUY721]:"Listing Price",[Qt.MAKEOFFER]:"Total Offer Amount",[Qt.MAKEOFFER721]:"Offer Amount",[Qt.DEAL]:"Offer Amount"};function $t(n){const{quantity:a,price:r,convertPrice:i,type:s,nftInfo:l}=n,c=o((()=>Ut[s]),[s]);return t("div",{className:"flex justify-between",children:[t("div",{className:"flex flex-col mdTW:flex-row",children:[e(ut,{className:Vt.image,src:l?.previewImage||""}),t("div",{children:[e("p",{className:Vt["collection-tokenName"],children:l?.nftCollection?.tokenName}),e("p",{className:Vt.tokenName,children:l?.tokenName}),e("p",{className:"text-[16px] leading-[24px] font-medium text-[var(--text-secondary)] mt-[4px] hidden mdTW:block",children:Xe(Number(a),"item")})]})]}),t("div",{className:"flex flex-col items-end justify-between",children:[t("div",{className:"text-right",children:[e("div",{className:Vt.priceDesc,children:c}),t("div",{className:Vt.price,children:[Ke(r)," ELF"]}),e("div",{className:Vt.usdPrice,children:Ze(i)})]}),e("div",{className:Vt.quantity,children:Xe(Number(a),"item")})]})]})}var Ht="style_input__L31tG";const Wt={medium:"style_forest-input-medium__-QH3J",default:"style_forest-input-default__pDUGE",large:"style_forest-input-large__Yvf1X"},zt=e=>{if(e.disabled)return"";switch(e.status){case"error":return"border--err";case"warning":return"";default:return"hover-color"}};var Gt,qt=r.memo(u((function(t,n){return e(b,{...t,ref:n,size:"middle",className:Q(zt({disabled:t.disabled,status:t.status}),Ht,Wt[t.size||"default"],t.className)})})));function Kt(){return Kt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Kt.apply(null,arguments)}var Jt=function(e){return a.createElement("svg",Kt({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 16 16"},e),Gt||(Gt=a.createElement("path",{fill:"#FF3F6D",d:"M11.037 5.213 12 6.915 9.07 8 12 9.085l-.984 1.745-2.438-1.915L9.027 12H7.059l.406-3.085-2.438 1.957L4 9.064l2.91-1.085L4 6.936l.984-1.745 2.503 1.915L7.059 4h1.99l-.471 3.106z"})))},Yt={"title-wrapper":"index-module_title-wrapper__Mpc0E",err:"index-module_err__y8rFe"};function Zt(n){const{title:a,suffix:r,require:i,description:s,children:l,error:c}=n;return o((()=>t("div",{className:Q("form-item","mobile-form-item","[&:not(:first-child)]:mt-[24px]","mdTW:[&:not(:first-child)]:mt-[40px]"),children:[t("p",{className:Yt["title-wrapper"],children:[e("span",{className:"form-title-text",children:a}),r?e("span",{className:"ml-[8px] flex items-center h-[27px]",children:r}):null,i?e(Jt,{className:"ml-[9px] mr-[-2px]"}):""]}),s?e("p",{className:"form-description font-medium mt-[8px] text-textSecondary text-[14px] leading-[21px]",children:s}):null,l,c&&e("div",{className:Yt.err,children:c?.msg})]})),[l,s,i,r,a,!0,c])}var Xt={available:"index-module_available__zftcb"};function en(a){const{availableMount:r,errorTip:i}=a;return e(Zt,{title:"Quantity",error:{msg:i||""},children:e(n,{children:t("div",{className:"mt-[16px] relative",children:[e(qt,{onKeyDown:e=>{/\d|\.|Backspace|ArrowRight|ArrowLeft|ArrowUp|ArrowDown/.test(e.key)||e.preventDefault()},placeholder:"Please enter the quantity",size:"large",...a,status:i&&"error"}),t("span",{className:Xt.available,children:[Ke(r)," available"]})]})})})}const tn=["probability/catsRank"],nn="Something went wrong. Please try again later.";let an=class{constructor(e){this.baseConfig={baseURL:"https://test.eforest.finance/api",timeout:6e4},this.instance=j.create(Object.assign({},this.baseConfig,e)),this.instance.interceptors.request.use((async e=>(e.baseURL,e)),(e=>Promise.reject(e))),this.instance.interceptors.response.use((t=>{const n=t.data,{code:a,data:r,message:i}=t.data;if(e.baseURL?.includes("cms"))return r;if(e.baseURL?.includes("connect"))return n;switch(a){case"20000":return r;case"20001":return{};default:return x.error(i),Promise.reject(i)}}),(t=>{let n="";switch(t?.response?.status){case 400:n="Bad Request";break;case 401:localStorage.removeItem(V.accountInfo),n="User authorisation failed. Please authorise the operation before you continue.";break;case 404:n="Not Found";break;case 500:case 501:case 502:case 503:case 504:n=`${t?.response?.status}: something went wrong in server`;break;default:n=(t?.response?.status?t?.response?.status+": ":"")+"something went wrong, please try again later"}if(e.baseURL?.includes("connect"))return Promise.reject(n);const a=t?.response?.config?.url;return(!a||!tn.includes(a))&&x.error(n),Promise.reject(n)}))}async request(e){return this.instance.request(e)}get(e,t){return this.instance.get(e,t)}post(e,t,n){return this.instance.post(e,t,n)}put(e,t,n){return this.instance.put(e,t,n)}delete(e,t){return this.instance.delete(e,t)}};new an({baseURL:"https://test.eforest.finance/cms"}),new an({baseURL:"https://test.eforest.finance/connect",headers:{"Content-Type":"application/x-www-form-urlencoded"}});const rn=new an({}),sn={baseURL:"/schrodingerai/api"},ln=async e=>rn.post("app/trait/nft-collection-traits-info",{id:e,skipCount:0,maxResultCount:128}),on=async e=>rn.get("app/trait/nft-collection-generation-info",{params:{id:e}}),cn=async e=>rn.get("app/tokens/market-data",{params:e}),dn=async()=>rn.get("app/seed/transaction-fee"),mn=async e=>rn.get("app/nft/nft-for-sale",{params:e});var un={title:"index-module_title__0FXxd",estimated:"index-module_estimated__wjxet",price:"index-module_price__ZYSA8",usdPrice:"index-module_usdPrice__9hvtP"};function fn(){const{transactionFee:a}=function(){const[e,t]=c(),[n,a]=c(!1);return m((()=>{!async function(){try{a(!0);const e=await dn();t(e)}catch(e){}a(!1)}()}),[]),{loading:n,transactionFee:e}}();return t(n,{children:[e("h3",{className:un.title,children:"Preview"}),t("div",{className:"flex justify-between mt-[16px]",children:[e("span",{className:un.estimated,children:"Estimated Transaction Fee"}),t("div",{className:"flex flex-col items-end",children:[t("span",{className:un.price,children:[Ke(a?.transactionFee||0)," ELF"]}),e("span",{className:un.usdPrice,children:Ze(a?.transactionFeeOfUsd||0)})]})]})]})}function hn(a){const{totalPrice:r,convertTotalPrice:i,title:s}=a;return e(n,{children:t("div",{className:"flex justify-between ",children:[e("h3",{className:"text-[20px] leading-[28px] font-semibold text-[var(--text-primary)]",children:s||"Total"}),t("div",{className:"flex flex-col items-end",children:[t("span",{className:"flex text-[20px] leading-[28px] font-semibold text-[var(--text-primary)]",children:[Ke(r)," ELF"]}),e("span",{className:"mt-[8px] text-[16px] leading-[24px] font-medium text-[var(--text-secondary)]",children:Ze(i)})]})]})})}var pn={balance:"index-module_balance__Laj6k"};function gn(n){const{itemDesc:a,amount:r,suffix:i}=n;return t("div",{className:pn.balance,children:[e("span",{children:a||"Balance"}),e("span",{children:`${Ke(r)}${i?` ${i}`:""}`})]})}var yn="index-module_buy-modal-custom__JsFM9";let _n=class e{constructor(e){this.context=null,this.aelfSendMethod=void 0,this.aelfViewMethod=void 0,this.tdvvSendMethod=void 0,this.tdvvViewMethod=void 0,this.tdvwSendMethod=void 0,this.tdvwViewMethod=void 0,this.address=e?.address,this.chainId=e?.chainId}static get(){return e.instance||(e.instance=new e),e.instance}static set(t){e.instance=t}setWebLoginContext(e){this.context=e}setMethod({chain:e,sendMethod:t,viewMethod:n}){switch(e){case He.MAIN_NET:this.aelfSendMethod=t,this.aelfViewMethod=n;break;case He.TDVV_NET:this.tdvvSendMethod=t,this.tdvvViewMethod=n;break;case He.TDVW_NET:this.tdvwSendMethod=t,this.tdvwViewMethod=n}}setContractMethod(e){e.forEach((e=>{this.setMethod(e)}))}getWebLoginContext(){return this.context}contractSendMethod(t,n){let a=null;const r=e.instance;switch(t){case He.MAIN_NET:a=r.aelfSendMethod;break;case He.TDVV_NET:a=r.tdvvSendMethod;break;case He.TDVW_NET:a=r.tdvwSendMethod}if(!a)throw new Error("Error: Invalid chain ID");return a(n)}contractViewMethod(t,n){let a=null;const r=e.instance;switch(t){case He.MAIN_NET:a=r.aelfViewMethod;break;case He.TDVV_NET:a=r.tdvvViewMethod;break;case He.TDVW_NET:a=r.tdvwViewMethod}if(!a)throw new Error("Error: Invalid chain ID");return a(n)}callContract(e){return this.context?.callContract(e)}};_n.instance=null;const Nn=_n.get();var bn,xn,vn,wn;!function(e){e[e.SEND=0]="SEND",e[e.VIEW=1]="VIEW"}(bn||(bn={})),function(e){e[e.NOT_LISTED=0]="NOT_LISTED",e[e.FIXED_PRICE=1]="FIXED_PRICE",e[e.ENGLISH_AUCTION=2]="ENGLISH_AUCTION",e[e.DUTCH_AUCTION=3]="DUTCH_AUCTION"}(xn||(xn={})),function(e){e[e.Basic=0]="Basic",e[e.Price=1]="Price",e[e.Customize=2]="Customize"}(vn||(vn={})),function(e){e[e.LESS_THAN=0]="LESS_THAN",e[e.LESS_THAN_OR_EQUALS=1]="LESS_THAN_OR_EQUALS",e[e.GREATER_THAN=2]="GREATER_THAN",e[e.GREATER_THAN_OR_EQUALS=3]="GREATER_THAN_OR_EQUALS",e.EQUAL="EQUAL"}(wn||(wn={}));const En=async(e,t,n)=>{const{aelfInfo:a}=ae.getInstance().getStore(),r={main:a?.marketMainAddress,side:a?.marketSideAddress};try{const i=n?.chain===He.MAIN_NET?r.main:r.side,s=n?.chain||a?.curChain;if(n?.type===bn.VIEW){const n=await Nn.contractViewMethod(s,{contractAddress:i,methodName:e,args:t}),a=n;return a?.error||a?.code||a?.Error?Promise.reject("request fail"):Promise.resolve(n)}{const n=await Nn.contractSendMethod(s,{contractAddress:i,methodName:e,args:t});if(n?.error||n?.code||n?.Error)return Promise.reject("request fail");const{transactionId:a,TransactionId:r}=n.result||n,l=r||a;await it(1e3);const o=await Pn(l,s);return Promise.resolve({TransactionId:o.TransactionId,TransactionResult:o.txResult})}}catch(e){return Promise.reject("request fail")}},An=async(e,t)=>{try{const n=await En("BatchBuyNow",e,t);return Promise.resolve(n)}catch(e){return Promise.reject(e)}},Cn=async(e,t)=>{try{const n=await En("ListWithFixedPrice",e,t);return Promise.resolve(n)}catch(e){return Promise.reject(e)}};function Tn(n,a="success",r,i=""){const s=r&&mt(n,"transaction",r),l=t("span",{children:[t("span",{children:["Transaction ID:  ",e("a",{href:s,className:"break-all",children:Fn(n||"",8)})]}),e("br",{}),i&&e("span",{children:i.replace("AElf.Sdk.CSharp.AssertionException:","")})]});x[a](l,10)}const In="Something went wrong. Please try again later.",kn=()=>{const{aelfInfo:e}=ae.getInstance().getStore();return{[He.MAIN_NET]:e?.rpcUrlAELF,[He.TDVV_NET]:e?.rpcUrlTDVV,[He.TDVW_NET]:e?.rpcUrlTDVW}},Sn={};async function Pn(e,t,n=0,a=0){const r=kn()[t],i=await function(e){const t=e||"";return Sn[t]||(Sn[t]=new H(new H.providers.HttpProvider(t))),Sn[t]}(r).chain.getTxResult(e);if(i.error&&i.errorMessage)throw Error(i.errorMessage.message||i.errorMessage.Message);if(!i)throw Error("Failed to retrieve transaction result.");if("notexisted"===i.Status.toLowerCase()){if(a>5)throw Error({...i.Error,TransactionId:e});return await it(1e3),Pn(e,t,n,++a)}if("pending"===i.Status.toLowerCase()){if(n>10)throw Error(`Timeout. Transaction ID:${e}`);return await it(1e3),Pn(e,t,++n,a)}if("mined"===i.Status.toLowerCase())return{TransactionId:e,txResult:i};throw Error({...i.Error,TransactionId:e})}const Ln=async e=>{const{price:t,chainId:n,address:a,spender:r,quantity:i}=e;try{const e=await(async(e,t)=>{try{const n=await En("GetTotalOfferAmount",e,{...t,type:bn.VIEW});return Promise.resolve(n)}catch(e){return Promise.reject(e)}})({address:a,priceSymbol:`${t.symbol}`},{chain:n});if(e?.error)return x.error(e?.errorMessage?.message||e.error.toString()||In),!1;const s=new $(t.amount);if(e){const t=new $(e?.totalAmount??0);if(new $(e?.allowance??0).lt($.sum(s.multipliedBy(i).multipliedBy(10**8),t))){const e=Number($.sum(t,s.multipliedBy(i).multipliedBy(1e8)));return await Mn(r,"ELF",`${e}`,n)}return!0}{const e=Number(Number(s.multipliedBy(i).multipliedBy(1e8)));return await Mn(r,"ELF",`${e}`,n)}}catch(e){x.destroy();const t=e;return t&&x.error(t.errorMessage?.message||In),!1}},Mn=async(e,t,n,a,r)=>{try{const i=await On({spender:e,symbol:t,amount:n,batchApproveNFT:r},{chain:a});if(!i||i.error)return x.error(i?.errorMessage?.message||In),!1;const{TransactionId:s}=i.result||i;return a&&s&&await async function(e,t,n="success"){try{Tn((await Pn(e,t)).TransactionId,n,t)}catch(n){n.TransactionId?Tn(e,"error",n.Error||"Transaction error.",t):Tn(e,"error",n.message||"Transaction error.",t)}}(s,a),!0}catch(e){const t=e;return t&&x.error(t?.errorMessage?.message||In),!1}};function Fn(e,t=10){const n=e;return n?`${n.substring(0,t)}...${n.substring(n.length-t)}`:""}const Bn=async e=>{const{symbol:t,amount:n,chainId:a,address:r,spender:i}=e;try{const e=await(async(e,t)=>{try{const n=await En("GetTotalEffectiveListedNFTAmount",e,{...t,type:bn.VIEW});return Promise.resolve(n)}catch(e){return Promise.reject(e)}})({symbol:t,address:r},{chain:a});if(e?.error)return x.error(e?.errorMessage?.message||e.error.toString()||In),!1;const s=new $(n);if(e){const n=new $(e?.totalAmount??0);if(new $(e?.allowance??0).lt($.sum(s,n))){const e=Number($.sum(n,s));return await Mn(i,t,`${e}`,a,!0)}return!0}{const e=Number(s);return await Mn(i,t,`${e}`,a,!0)}}catch(e){x.destroy();const t=e;return t&&x.error(t.errorMessage?.message||In),!1}},Dn=async(e,t,n)=>{const{aelfInfo:a}=ae.getInstance().getStore(),r={main:a?.mainChainAddress,side:a?.sideChainAddress};try{const i=n?.chain===He.MAIN_NET?r.main:r.side,s=n?.chain||a?.curChain;if(n?.type===bn.VIEW){const n=await Nn.contractViewMethod(s,{contractAddress:i,methodName:e,args:t}),a=n;return a?.error||a?.code||a?.Error?Promise.reject("request fail"):Promise.resolve(n)}{const n=await Nn.contractSendMethod(s,{contractAddress:i,methodName:e,args:t});if(n?.error||n?.code||n?.Error)return Promise.reject("request fail");const{transactionId:a,TransactionId:r}=n.result||n,l=r||a;await it(1e3);const o=await Pn(l,s);return Promise.resolve({TransactionId:o.TransactionId,TransactionResult:o.txResult})}}catch(e){return Promise.reject("request fail")}},Rn=async(e,t)=>{try{const n=await Dn("GetBalance",e,{...t,type:bn.VIEW});return Promise.resolve(n)}catch(e){return Promise.reject(e)}},On=async(e,t)=>{try{const n=await Dn("Approve",e,{...t});return Promise.resolve(n)}catch(e){return Promise.reject(e)}},Qn=async({owner:e,symbol:t},n)=>{try{if(!e||!t)return;return(await Rn({owner:e,symbol:t},{chain:n})).balance}catch(e){return 0}},jn=async({symbol:e},t)=>{try{if(!e)return;const n=await(async(e,t)=>{try{const n=await Dn("GetTokenInfo",e,{...t,type:bn.VIEW});return Promise.resolve(n)}catch(e){return Promise.reject(e)}})({symbol:e},{chain:t});return{supply:n.supply,totalSupply:n.totalSupply,decimals:n.decimals}}catch{return{supply:0,totalSupply:0}}},Vn=e=>{ae.getInstance().setStore("nftNumber",e)},Un=async({owner:e,nftSymbol:t,chainId:n})=>{if(e)try{if(Vn({loading:!0}),t){const a=await Promise.all([Qn({owner:e,symbol:"ELF"},n),Qn({owner:e,symbol:t},n),jn({symbol:t},n)]),r=Number(a[2]?.decimals||0),i=Math.floor($(a[2]?.supply||0).dividedBy(10**r).toNumber()),s=Math.floor($(a[2]?.totalSupply||0).dividedBy(10**r).toNumber()),l={nftBalance:Math.floor($(a[1]||0).dividedBy(10**r).toNumber()),tokenBalance:a[0],nftQuantity:i,nftTotalSupply:s,nftDecimals:r,loading:!1};return Vn(l),l}{const t={tokenBalance:await Qn({owner:e,symbol:"ELF"},n),loading:!1};return Vn(t),t}}catch{return Vn({loading:!1}),{}}};var $n;!function(e){e.MAIN_NET="AELF",e.TDVV_NET="tDVV",e.TDVW_NET="tDVW"}($n||($n={}));const Hn=async({page:e=1,pageSize:t=10,symbol:n,address:a,excludedAddress:r,chainId:i})=>{try{const s=await(async e=>rn.get("app/market/nft-listings",{params:e}))({chainId:i,symbol:n,skipCount:(e-1)*t,maxResultCount:t,excludedAddress:r,address:a});if(!s)return!1;const l=s?.items,o=s?.totalCount;return{list:l.map((e=>{const t=null!==e.whitelistPrices?e.whitelistPrices:e.prices;return{key:e.publicTime.toString(),purchaseToken:{symbol:e.purchaseToken.symbol.toLocaleUpperCase()},decimals:e.purchaseToken.decimals??8,price:t,quantity:e.quantity,ownerAddress:e?.ownerAddress||"",expiration:ct(e.endTime),fromName:e?.owner?.name||"--",whitelistHash:e.whitelistId,startTime:e.startTime,endTime:e.endTime}}))||[],totalCount:o??0}}catch{return!1}};class Wn{constructor(){this.proto={}}static getInstance(){return Wn.instance||(Wn.instance=new Wn),Wn.instance}setProto(e,t){this.proto[e]=t}getProto(e){return e?this.proto[e]:this.proto}}function zn(e,t){let n=e.reduce(((e,n)=>{let a=t.decode(function(e){const{util:t}=H.pbjs,n=t.newBuffer(t.base64.length(e));return t.base64.decode(e,n,0),n}(n));return a=t.toObject(a,{enums:String,longs:String,bytes:String,defaults:!1,arrays:!0,objects:!0,oneofs:!0}),{...e,...a}}),{});return n=H.utils.transform.transform(t,n,H.utils.transform.OUTPUT_TRANSFORMERS),n=H.utils.transform.transformArrayToMap(t,n),n}const Gn={AELF:"rpcUrlAELF",tDVW:"rpcUrlTDVW",tDVV:"rpcUrlTDVV"},qn=async e=>{const{aelfInfo:t}=ae.getInstance().getStore(),n=Gn[t?.curChain];if(t?.[n]&&e){const a=await async function(e,t){try{const n=await new H(new H.providers.HttpProvider(t)).chain.getContractFileDescriptorSet(e);return H.pbjs.Root.fromDescriptor(n)}catch{return null}}(e,t?.[n]);Wn.getInstance().setProto(e,a)}},Kn=()=>{const{aelfInfo:e}=ae.getInstance().getStore();return{main:e?.forestMainAddress,side:e?.forestSideAddress}},Jn="Request rejected. Forest needs your permission to continue";function Yn(e,t){const n=p(jt),{walletInfo:a,aelfInfo:r}=ae.getInstance().getStore(),i=async(e,t,n)=>{const a=Wn.getInstance().getProto()[e];if(!a)return!1;{const e=t?.Logs?.filter((e=>"BatchBuyNowResult"===e.Name))?.[0];if(!e)return!1;try{return await async function(e,t){try{const{Indexed:n=[],NonIndexed:a,Name:r}=e;if(!t)return{};const i=[...n||[]];return a&&i.push(a),zn(i,t.lookupType(r))}catch(e){return Promise.reject(e)}}(e,a)}catch(e){return!1}}};return async s=>{if(!await Ln({chainId:t,price:s.price,quantity:ot(s.quantity,"0").toNumber(),spender:t===He.MAIN_NET?Kn().main:Kn().side,address:a.address||""}))return"failed";try{const e=await An({symbol:s.symbol,fixPriceList:s.fixPriceList});if(!e)return x.error(In),"failed";{const{TransactionId:t,TransactionResult:n}=e.result||e;if(n){const e=await i(r?.marketSideAddress,n);return e?{...e,TransactionId:t}:(x.error(In),"failed")}}}catch(t){x.destroy();const a=t;return a.errorMessage?.message.includes(Jn)?(x.error(a?.errorMessage?.message||In),Promise.reject(t)):((({quantity:t})=>{n.show({previewImage:e?.previewImage||"",title:Zn.errorMessage.title,hideButton:!0,info:{logoImage:e?.nftCollection?.logoImage||"",subTitle:e?.nftCollection?.tokenName,title:e?.tokenName,extra:e&&dt(e)?void 0:Xe(t,"item")},error:{title:Zn.errorMessage.tips,description:Zn.errorMessage.description}})})({quantity:0}),"failed")}}}const Zn={title:"Approve Purchase",portkey:{title:_t,message:Nt},default:{title:_t,message:"Please confirm the purchase in the wallet."},errorMessage:{title:"Purchase Failed",tips:"Purchase of all items failed",description:"Purchase failure could be due to network issues, transaction fee increases, or someone else acquiring the item before you."}};var Xn=f(h.create((function(n){const a=p(),{getNftNumber:r,nftNumber:i}=function({nftSymbol:e,chainId:t}){const[{isLogin:n=!0},{dispatch:a}]=se(),r=ae.getInstance().getValue("walletInfo"),[i,s]=c({}),l=async({nftSymbol:e,chainId:t})=>{const a=t||$n.TDVW_NET,i=a===$n.MAIN_NET?r.aelfChainAddress:r.address;if(!n||!i)return;const l=await Un({owner:i,nftSymbol:e,chainId:a});s(l)};return m((()=>{l({nftSymbol:e,chainId:t})}),[n,e,t,r.address,r.aelfChainAddress]),{getNFTNumber:l,nftNumber:i}}({nftSymbol:"BBBBBBBBBBB-2",chainId:"tDVW"}),s=W(),{aelfInfo:l}=ae.getInstance().getStore(),{tokenBalance:d,nftTotalSupply:u}=i,[{isLogin:f=!0},{dispatch:h}]=se(),g=p(vt),y=p(jt),_=ae.getInstance().getValue("walletInfo"),{onClose:N,elfRate:b,buyItem:x,nftInfo:v}=n,[w,E]=c(!1),[A,C]=c(1),[T,I]=c([]),[k,S]=c(0),[,P]=c(0),[L,M]=c(0),[F,B]=c([]),D=Yn(v,v?.chainId),[R,O]=c(""),Q=function(e){const[t,n]=c(),a=ae.getInstance().getValue("walletInfo");return m((()=>{!async function(){if(!e)return;const t=mn({id:e,excludedAddress:a?.address||""});try{const e=await t;n(e)}catch(e){}}()}),[e,a]),t}(v?.id||""),j=o((()=>new $(L).multipliedBy(b).toNumber()),[b,L]),[V,H]=c(0),z=o((()=>{const e=new $(L);return V?e.div(V).toNumber():0}),[L,V]),G=o((()=>new $(z).multipliedBy(b).toNumber()),[z,b]);m((()=>{qn(l?.marketSideAddress)}),[l?.marketSideAddress]),m((()=>{if(x){if(V>x.quantity)return void M(0);M(V*x.price)}}),[x,V]);const q=async()=>{try{let e=[];e=x?[{offerTo:x.ownerAddress,quantity:ot(V,v?.decimals||"0").toNumber(),price:{symbol:x.purchaseToken.symbol,amount:x.price},startTime:{seconds:U.unix(Math.floor(x.startTime/1e3)).unix(),nanos:0}}]:F;const t=await D({symbol:v?.nftSymbol||"",fixPriceList:e.map((e=>({...e,price:{...e.price,amount:Number(ot(e.price.amount,8))}}))),price:{symbol:"ELF",amount:new $(ot(z,"0")).toNumber()},quantity:V,nftDecimals:Number(v?.decimals||0)});if(t&&"failed"!==t){const e=mt(t.TransactionId,"transaction",v?.chainId);if(t.allSuccessFlag)y.show({previewImage:v?.previewImage||"",title:"NFT Successfully Purchased!",description:`You are now the owner of ${v?.tokenName} NFT in the ${v?.nftCollection?.tokenName} Collection.`,buttonInfo:{btnText:"View NFT",onConfirm:()=>{s.push(`/detail?symbol=${v?.nftSymbol}&from=all&source=telegram`),y.hide()}},info:{logoImage:v?.nftCollection?.logoImage||"",subTitle:v?.nftCollection?.tokenName,title:v?.tokenName,extra:v&&dt(v)?void 0:Xe(V,"item")},jumpInfo:{url:e}});else{const n=t.failPriceList?.value.map((e=>{const t=lt(e.price.amount,8),n=new $(t).multipliedBy(b);return{image:v?.previewImage||"",collectionName:v?.nftCollection?.tokenName,nftName:v?.tokenName,item:Xe(Number(e.quantity),"item"),priceTitle:"Each item price",price:`${Ke(t)} ${e.price.symbol||"ELF"}`,usdPrice:Ze(n)}}));let a=0;t.failPriceList?.value.forEach((e=>{a+=Number(e.quantity)})),y.show({previewImage:v?.previewImage||"",title:"Purchase Partially Completed",buttonInfo:{btnText:"View NFT",onConfirm:()=>{y.hide()}},info:{logoImage:v?.nftCollection?.logoImage||"",subTitle:v?.nftCollection?.tokenName,title:v?.tokenName,extra:v&&dt(v)?void 0:Xe(Number(V)-a,"item")},jumpInfo:{url:e},error:{title:`Purchase of ${Xe(a,"item")}  failed`,description:"Purchase failure could be due to network issues, transaction fee increases, or someone else acquiring the item before you.",list:n}})}}g.hide(),E(!1),Y()}catch(e){return E(!1),Promise.reject(e)}};m((()=>{x&&1==x.quantity&&M(x.price)}),[x]),m((()=>{a.visible&&H(1)}),[a.visible]),m((()=>{x||(k<V&&T.length&&V<=(Q?.availableQuantity||0)?C((e=>++e)):V<=(Q?.availableQuantity||0)&&(()=>{if(!T.length)return;B([]),M(0);let e=0,t=0;const n=[];for(let a=0;a<T.length;a++){const r=T[a];if(!(r.quantity<=V-t)){const a={offerTo:r.ownerAddress,quantity:ot(V-t,v?.decimals||"0").toNumber(),price:{symbol:r.purchaseToken.symbol,amount:r.price},startTime:{seconds:U.unix(Math.floor(r.startTime/1e3)).unix(),nanos:0}};n.push(a),e+=r.price*(V-t);break}{const a={offerTo:r.ownerAddress,quantity:ot(r.quantity,v?.decimals||"0").toNumber(),price:{symbol:r.purchaseToken.symbol,amount:r.price},startTime:{seconds:U.unix(Math.floor(r.startTime/1e3)).unix(),nanos:0}};if(n.push(a),e+=r.price*r.quantity,r.quantity===V-t)break;t+=r.quantity}}B(n),M(e)})())}),[x,T,k,V,Q]),m((()=>{a.visible&&(async e=>{if(!(V>(Q?.availableQuantity||0)))try{if(!v)return;E(!0);const t=await Hn({page:e,chainId:v.chainId,symbol:v.nftSymbol,excludedAddress:_.address});if(!t)return;P(t.totalCount);const n=t.list.reduce(((e,t)=>e+t.quantity),0);I([...T,...t.list]),S((e=>e+n))}finally{E(!1)}})(A)}),[A,a.visible]);const K=o((()=>$(lt(Number(d),8)).lt($(L))),[d,L]),J=(o((()=>x?$(x.quantity).gt(1):$(u).gt(1)),[x,u]),o((()=>(x?x.quantity>1:Number(u)>1)?Qt.BUY:Qt.BUY721),[x,u])),Y=()=>{N?N():a.hide()};return t(Ne,{className:yn,destroyOnClose:!0,afterClose:a.remove,footer:e(we,{disabled:K||!!R||!V||!F.length&&!x,loading:w,type:"primary",size:"ultra",className:"!w-[256px]",onClick:async()=>{f&&(E(!0),g.show({nftInfo:{image:v?.previewImage||"",collectionName:v?.nftCollection?.tokenName,nftName:v?.tokenName,priceTitle:"Total Price",price:`${Ke(L)} ELF`,usdPrice:Ze(j),item:v&&dt(v)?void 0:Xe(V,"item")},title:Zn.title,content:{title:_.portkeyInfo?Zn.portkey.title:Zn.default.title,content:_.portkeyInfo?Zn.portkey.message:Zn.default.message},initialization:q,onClose:()=>{g.hide()}}))},children:"Buy Now"}),onCancel:Y,title:"Buy Now",open:a.visible,children:[e($t,{nftInfo:v,quantity:V,price:z,convertPrice:G,type:J}),e("div",{className:"mt-[24px] mdTW:mt-[32px]",children:e(en,{availableMount:x?x?.quantity:Q?.availableQuantity||0,value:0===V?"":Ke(V),onChange:e=>{if(!e.target.value||$(e.target.value).isZero())return void H(0);const t=Number(((e,t)=>{let n=String(e||"").replaceAll(",","");const a=n.indexOf("."),r=n.lastIndexOf(".");a>-1&&a!==r&&(n=n.slice(0,-1));const i=new $(n);if((i.e||0)>t-1)return n.slice(0,t);const[,s]=n.split(".");return i.gt(0)?(s?.length||0)>=4?i.toFixed(4,$.ROUND_DOWN):n:""})(e.target.value,11));$(t).gt(x?.quantity||Q?.availableQuantity||0)?(O("Maximum quantity exceeded. Please ensure your purchase does not exceed the available quantity."),M(0)):O(""),H(t)},errorTip:R})}),e("div",{className:"mt-[52px] mdTW:mt-[60px]",children:e(fn,{})}),e("div",{className:"mt-[24px] mdTW:mt-[32px]",children:e(hn,{totalPrice:L,convertTotalPrice:j})}),e("div",{className:"mt-[24px] mdTW:mt-[32px]",children:e(gn,{amount:lt(Number(d),8).toNumber(),suffix:"ELF"})})]})})));function ea(){const{data:e}=D((()=>cn({symbol:"ELF"})),{cacheKey:"elf-to-dollar-rate",staleTime:3e5});return{ELFToDollarRate:e?.price||0}}function ta(e){const{nftInfo:t}=e,n=p(Xn),{ELFToDollarRate:a}=ea();return{buyNow:()=>{n.show({elfRate:a,nftInfo:t})}}}const na=18e5,aa=e=>{const t=(e=>"date"===e.type?U(e.value).diff(U(),"minutes"):"months"===e.type?U().add(Number(e.value),"months").diff(U(),"minutes"):U.duration({[e.type]:e.value}).asMinutes())(e);return((e=15)=>({startTime:{seconds:U().unix(),nanos:0},publicTime:{seconds:U().unix(),nanos:0},durationMinutes:e}))(t)};function ra(e){const t=z();m((()=>{e.visible&&e.hide()}),[t])}var ia="ListingSuccessModal-module_wrap__eKMZI",sa="ListingSuccessModal-module_imageWrap__vHa1i",la="ListingSuccessModal-module_previewImage__BtEXV",oa="ListingSuccessModal-module_logoWrap__b0Sj4",ca="ListingSuccessModal-module_logo__-zZiZ",da="ListingSuccessModal-module_collectionName__OxHIF",ma="ListingSuccessModal-module_tokenName__symik",ua="ListingSuccessModal-module_content__ULeuE",fa="ListingSuccessModal-module_content_title__mAMjR",ha="ListingSuccessModal-module_content_text__m1yyw",pa="ListingSuccessModal-module_aelf_link__oIJ-Q";const ga=h.create((function({nftInfo:n,explorerUrl:a,onViewMyListing:r}){const i=p();ra(i);const[s]=c(!1),l=t("div",{className:"flex flex-1 flex-col items-center",children:[e(we,{loading:s,type:"primary",size:"ultra",className:"w-full",onClick:()=>{i.hide(),r&&r()},children:"View My Listing"}),null]});return e(Ne,{title:" ",open:i.visible,onOk:i.hide,onCancel:i.hide,afterClose:i.remove,footer:l,children:t("div",{className:ia,children:[t("div",{className:sa,children:[n?.previewImage&&e(ut,{src:n?.previewImage,className:la}),t("div",{className:oa,children:[n?.nftCollection?.logoImage&&e(ut,{src:n?.nftCollection?.logoImage,className:ca}),e("span",{className:da,children:n?.nftCollection?.tokenName})]}),e("span",{className:ma,children:n?.tokenName})]}),t("div",{className:ua,children:[e("span",{className:fa,children:"NFT Successfully Listed!"}),t("span",{className:ha,children:[n?.tokenName," NFT in the ",n?.nftCollection?.tokenName," collection has been listed for sale."]})]}),t("a",{href:a,target:"_blank",rel:"noreferrer",className:pa,children:["View on aelf Explorer ",e(Et,{className:"fill-textSecondary w-4 h-4 ml-2"})]})]})})}));var ya;!function(e){e[e.timeGreater=0]="timeGreater",e[e.priceGreater=1]="priceGreater"}(ya||(ya={})),wn.LESS_THAN,wn.LESS_THAN_OR_EQUALS,wn.EQUAL,wn.GREATER_THAN,wn.GREATER_THAN_OR_EQUALS,wn.LESS_THAN,wn.LESS_THAN_OR_EQUALS,wn.EQUAL,wn.GREATER_THAN,wn.GREATER_THAN_OR_EQUALS;const _a={[ya.priceGreater]:"For listings that reduce the price, Forest won't cancel existing listings to save on transaction fees. However, you can manually cancel them if you prefer.",[ya.timeGreater]:"For listings that extend the duration, Forest won't cancel existing listings to save on transaction fees. However, you can manually cancel them if you prefer."};const Na=h.create((function({nftInfo:n,explorerUrl:a,onViewMyListing:r,status:i}){const s=p();ra(s);const[l]=c(!1),d=o((()=>i===ya.priceGreater||i===ya.timeGreater?_a[i]:`The listing of ${n?.tokenName} NFT in the ${n?.nftCollection?.tokenName} collection has been edited.`),[i,n]),m=t("div",{className:"flex flex-1 flex-col items-center",children:[e(we,{loading:l,type:"primary",size:"ultra",className:"w-full",onClick:()=>{s.hide(),r&&r()},children:"View My Listing"}),null]});return e(Ne,{title:" ",open:s.visible,onOk:s.hide,onCancel:s.hide,afterClose:s.remove,footer:m,children:t("div",{className:"flex flex-col h-full",children:[t("div",{className:"flex flex-col items-center justify-between",children:[n?.previewImage&&e(ut,{src:n?.previewImage,className:"w-[128px] h-[128px] rounded-md mb-4 object-contain border border-solid border-lineBorder"}),t("div",{className:"flex items-center justify-center mb-1",children:[n?.nftCollection?.logoImage&&e(ut,{src:n?.nftCollection?.logoImage,className:"!rounded-[4px] w-6 h-6 mr-1 object-contain border border-solid border-lineBorder"}),e("span",{className:"text-textSecondary text-base",children:n?.nftCollection?.tokenName})]}),e("span",{className:"font-semibold text-xl text-textPrimary ",children:n?.tokenName})]}),t("div",{className:"flex flex-1 flex-col items-center mt-12",children:[e("span",{className:"text-textPrimary font-semibold text-2xl",children:"Listing Successfully Edited!"}),e("span",{className:"text-base font-medium text-textSecondary mt-4",children:d})]}),t("a",{href:a,target:"_blank",rel:"noreferrer",className:"flex mb-4 justify-center items-center text-textSecondary",children:["View on aelf Explorer ",e(Et,{className:"fill-textSecondary w-4 h-4 ml-2"})]})]})})})),ba=async(e,t,n)=>{try{if(!t?.nftSymbol||!n||!e)return!1;const{balance:a}=await Rn({symbol:t?.nftSymbol,owner:n}),r=t.decimals||0;if(0===a)return!1;const i=await(async(e,t)=>{try{const n=await En("GetListedNFTInfoList",e,{...t,type:bn.VIEW});return Promise.resolve(n)}catch{return Promise.reject(null)}})({symbol:t.nftSymbol,owner:n},{chain:e});if(i?.error||!i?.value)return{max:Math.floor($(a).dividedBy(10**Number(r)).toNumber()),listedNFTInfoList:[],listItems:0};const s=i.value.filter((e=>{const t=Number(e.duration.startTime.seconds)+Number(e.duration.durationMinutes)*SECOND_PER_MINUTES;return U().unix()<t})),l=s.reduce(((e,t)=>{const{quantity:n}=t||{};return e.plus(lt(n,r||"0"))}),st),o=new $(a??0).dividedBy(10**Number(r))?.minus(l??0).toNumber(),c=Math.max(o,0);return{max:Math.floor(c),listedNFTInfoList:s,listItems:l.toNumber()}}catch{return{max:0,listedNFTInfoList:[],listItems:0}}},xa={title:"Approve Listing",portkey:{title:_t,message:Nt},default:{title:_t,message:"Please confirm the listing in the wallet."}};function va(e){const{walletInfo:t,aelfInfo:n}=ae.getInstance().getStore(),[a,r]=c([]),[i,s]=c(0),[l,o]=c(0),u=d((async()=>{if(e?.nftSymbol&&t.address){const n=await ba(e?.chainId,e,t.address);if(!n)return;s(dt(e)?1:n.max),r(n.listedNFTInfoList),o(n.listItems)}}),[e?.nftSymbol,t?.address]);return m((()=>{u()}),[e?.nftSymbol,t?.address]),{maxQuantity:i,listItems:l,listedNFTInfoList:a}}function wa(e,t,n,a){const{walletInfo:r,aelfInfo:i}=ae.getInstance().getStore(),{nftSaleInfo:s}=function(e){const{data:t}=D((()=>mn({id:e})),{refreshDeps:[e]});return{nftSaleInfo:t}}(e.id),{listItems:l,listedNFTInfoList:d,maxQuantity:m}=va(e),[u,f]=c(!1),[h,g]=c(a?.listingPrice||{}),[y,_]=c(a?.duration||{}),[N,b]=c(dt(e)?1:0),{ELFToDollarRate:v}=ea(),w=p(vt),E=p(vt),A=p(ga),C=p(Na),T=W(),I=e=>{e&&x.error(e.errorMessage?.message||nn)},k=()=>{w.hide(),E.hide(),A.hide(),C.hide(),t.hide(),T.push(`/detail?symbol=${e?.nftSymbol}&from=all&source=telegram`)},S=async(t,n)=>{try{const n=e?.chainId===He.MAIN_NET?Kn().main:Kn().side;if(!await Bn({symbol:e.nftSymbol,address:r?.address,spender:n,amount:ot(t,e?.decimals||"0").toNumber(),chainId:e.chainId}))return I(),Promise.reject(nn);const a=aa(y),i=await Cn({symbol:e.nftSymbol,price:{symbol:h?.token?.symbol||"",amount:Number(ot(h?.price,h?.token?.decimals))},quantity:ot(t,e?.decimals||"0").toNumber(),duration:a,whitelists:null,isWhitelistAvailable:!1},{chain:e.chainId});if(i?.error||!i)return I(i||nn),Promise.reject(i||nn);const{TransactionId:s=""}=i.result||i;Tn(s||"","success",e.chainId);const l=mt(s,"transaction",e.chainId);w.hide(),A.show({nftInfo:e,explorerUrl:l,onViewMyListing:k})}catch(e){const t=e;return x.error(t.errorMessage?.message||nn),Promise.reject(e)}},P=()=>{w.hide(),t.show({nftInfo:e,type:"add",defaultData:{listingPrice:h,duration:y,itemsForSell:N}})},L=t=>{const{amount:n,extendStatus:a}=t;w.show({nftInfo:{image:s?.logoImage,collectionName:s?.collectionName,nftName:e?.tokenName,priceTitle:e&&dt(e)?"Listing Price":"Listing Price Per Item",price:`${h.price?Ke(h.price):"--"} ELF`,usdPrice:M?Ze(M):"$ --",item:e&&dt(e)?void 0:Xe(N,"item")},title:xa.title,content:{title:r.portkeyInfo?xa.portkey.title:xa.default.title,content:r.portkeyInfo?xa.portkey.message:xa.default.message},buttonConfig:[{btnText:"Try Again",onConfirm:async()=>await S(n)},{btnText:"Edit Listing",onConfirm:P}],initialization:async()=>await S(n),onClose:()=>{w.hide()}})},M=o((()=>{if(h?.price&&v)return v*Number(h.price)}),[v,h]);return{nftSaleInfo:s,listingBtnDisable:u,listingPrice:h,setListingPrice:g,listItems:l,setDuration:_,onCompleteListingHandler:async()=>{!r.address||!e.nftSymbol||!(()=>{if(Number(N)>Number(m))return x.error("Your balance of NFT is not enough"),!1;if("date"===y?.type){const e=U(y.value).diff(U()),t=U.duration(e).asMinutes(),n=Math.floor(U.duration(e).asMonths());if(t<15)return x.error("The listing duration should be at least 15 minutes."),!1;if(n>6)return x.error("The listing duration should be no more than 6 months."),!1}return!0})()||(t.hide(),dt(e)&&"add"===n&&L({amount:1}),dt(e)||L({amount:N}))},listingUSDPrice:M,itemsForSell:N,setItemsForSell:b,availableItemForSell:m}}var Ea={preview:"SummaryInfo-module_preview__vptVV",infoItem:"SummaryInfo-module_infoItem__RrjCl",infoItem_normal:"SummaryInfo-module_infoItem_normal__WNG-1"};const Aa=({left:n,right:a,className:r=""})=>t("div",{className:Ea.infoItem,children:[e("span",{className:`${Ea.infoItem_normal} ${r}`,children:n}),e("span",{className:`${Ea.infoItem_normal} ${r}`,children:a})]}),Ca=({listingPrice:e="",itemsForSell:t=1,forestFees:n=.025})=>{const a=new $(t),r=new $(e),i=r.isNaN()?"--":Ke(r.times(a)),s=a.isNaN()||r.isNaN()?"--":r.times(a).times(1-n).toNumber(),l=new $(n).times(100).toNumber();return{showPrice:`${Ke(i)} ELF`,showForestFees:`${l}%`,totalPrice:`${Ke(s)} ELF`}};function Ta(n){const{showPrice:a,showForestFees:r,totalPrice:i}=Ca(n);return t("div",{className:"-mb-2 flex flex-col mt-6",children:[e("span",{className:Ea.preview,children:"Preview"}),e(Aa,{left:"Listing Price",right:a}),e(Aa,{left:"Forest Fees",right:r}),e(Aa,{className:"!text-textPrimary",left:"Total Potential Earnings",right:i})]})}const Ia=11;var ka={"custom-popup":"index_custom-popup__WhC70","custom-select":"index_custom-select__mQ-IV","forest-select-medium":"index_forest-select-medium__a3RE3","forest-select-default":"index_forest-select-default__IS2-4","forest-select-large":"index_forest-select-large__CSVYg","select-status-error":"index_select-status-error__klfLa"};const{Option:Sa}=v;function Pa(t){const{children:n}=t;return e(Sa,{...t,children:n})}function La(t){const{className:n,suffixIcon:a,popupClassName:r,children:i,disabled:s,...l}=t,o={medium:ka["forest-select-medium"],default:ka["forest-select-default"],large:ka["forest-select-large"]};return e(v,{...l,size:"middle",className:Q(ka["custom-select"],o[t.size||"default"],"error"===t.status&&!t.disabled&&ka["select-status-error"],n),disabled:s,popupClassName:Q(ka["custom-popup"],r),children:i})}var Ma={shortCut:"setPrice-moudule_shortCut__C805h",shortCut_title:"setPrice-moudule_shortCut_title__kDi6k",shortCut_price:"setPrice-moudule_shortCut_price__PSte4",shortCut_unit:"setPrice-moudule_shortCut_unit__pa3DH"};const Fa={ELF:{symbol:"ELF",tokenId:"ELF",decimals:8,icon:"ELF"}};function Ba({title:n,price:a,unit:r="ELF",onClick:i}){return t("div",{className:"bg-fillHoverBg h-[56px] flex items-center justify-center flex-1 mx-2 rounded-lg cursor-pointer",onClick:i,children:[e("span",{className:"text-base font-semibold text-textPrimary",children:n}),e("span",{className:"text-base font-normal text-textSecondary ml-4",children:Ke(a)}),e("span",{className:"text-base font-normal text-textSecondary",children:r})]})}function Da({title:n,price:a,unit:r="ELF",onClick:i}){return t("div",{className:Ma.shortCut,onClick:i,children:[e("span",{className:Ma.shortCut_title,children:n}),e("span",{className:Ma.price,children:Ke(a)}),e("span",{className:Ma.unit,children:r})]})}const Ra=n=>t("span",{className:"font-medium text-textPrimary text-lg rounded-lg",children:[n.title,n.tooltip?e(w,{title:n.tooltip,children:e(J,{className:"text-base ml-1"})}):null]}),Oa=({floorPrice:t,lastSalePrice:n,bestOfferPrice:a,onChangePrice:r,isMobile:i})=>{const s=[{title:"Floor Price",price:t},{title:"Last Sale",price:n},{title:"Best Offer",price:a}].filter((e=>Number(e.price||"")>0));if(!s.length)return null;const l=i?Da:Ba;return e("div",{className:"mt-4 flex -mx-2 "+(i?"flex-col":""),children:s.map((t=>e(l,{title:t.title,price:Ke(t.price||""),onClick:()=>{r&&r(t.price)}},t.title)))})},Qa=e=>{const t=String(e),n=t.indexOf(".");return n>-1?`${Ke(t.slice(0,n))}${t.slice(n)}`:Ke(e||"")};function ja(n){const{price:a,setToken:r,setPrice:i,inputChangeHandler:s,status:l}=function({onChange:e,defaultPrice:t,checkValid:n}){const[a,r]=c(t),[i,s]=c({symbol:"ELF",tokenId:"ELF",decimals:8}),[l,o]=c(),u=d((e=>{const{target:t}=e;let n=String(t.value||"").replaceAll(",","");const a=n.indexOf("."),i=n.lastIndexOf(".");a>-1&&a!==i&&(n=n.slice(0,-1));const s=new $(n);if((s.e||0)>Ia-1)return n.slice(0,Ia);const[,l]=n.split(".");s.gte(0)?r((l?.length||0)>=4?s.toFixed(4,$.ROUND_DOWN):n):r("")}),[]);return m((()=>{e&&e({token:i,price:a})}),[a,e,i]),q((()=>{const e=isNaN(Number(a))||Number(a)<=0||n&&!n?.(Number(a))?"error":"";o(e)}),[a]),{inputChangeHandler:u,price:a,setPrice:r,token:i,setToken:s,status:l}}(n),{errorTip:o,placeholder:u,defaultErrorTip:f}=n,h=Qa(a||"");e(La,{defaultValue:"ELF",bordered:!1,popupClassName:"!border-none",getPopupContainer:e=>e,className:"!border-0 !my-4 !h-6 !-mr-[11px] !border-l border-solid !border-lineDividers !rounded-none",onChange:e=>r(Fa?.[e]),onClick:e=>{e.stopPropagation(),e.preventDefault()},children:Object.values(Fa).map((t=>e(Pa,{value:t.tokenId,children:e("span",{className:"flex items-center mr-4",children:t.symbol})},t.tokenId)))});return t("div",{className:`mt-6 ${n.className}`,children:[Ra(n),e(Oa,{lastSalePrice:n.lastSalePrice,floorPrice:n.floorPrice,bestOfferPrice:n.bestOfferPrice,onChangePrice:e=>{i(e),r(Fa.ELF)},isMobile:!0}),e(qt,{size:"large",onKeyDown:e=>{/\d|\.|Backspace|ArrowRight|ArrowLeft|ArrowUp|ArrowDown/.test(e.key)||e.preventDefault()},onChange:s,value:h,placeholder:u||"Enter a price",suffix:"ELF",className:"mt-0",status:n?.valid||l}),"error"!==(n?.valid||l)?null:e("div",o?{className:"mt-2 text-xs text-error",children:o}:{className:"mt-2 text-xs text-error",children:e("span",{children:f||"Please enter a correct price."})})]})}var Va,Ua={"time-picker-popup":"style-module_time-picker-popup__gf83G","date-picker-mobile":"style-module_date-picker-mobile__c5xPH","adm-picker-header":"style-module_adm-picker-header__2RsE0","adm-picker-header-button":"style-module_adm-picker-header-button__Zy5VV","adm-picker-body":"style-module_adm-picker-body__bq8ck","adm-picker-view":"style-module_adm-picker-view__B86Sh","adm-picker-view-column":"style-module_adm-picker-view-column__6xVQ1","adm-picker-view-column-item":"style-module_adm-picker-view-column-item__fb6h0","adm-picker-view-mask":"style-module_adm-picker-view-mask__GtuK-","adm-picker-view-mask-top":"style-module_adm-picker-view-mask-top__fSwrF","adm-picker-view-mask-bottom":"style-module_adm-picker-view-mask-bottom__YYsiu","adm-picker-view-mask-middle":"style-module_adm-picker-view-mask-middle__oPUp5"};function $a(t){const{visible:n,onConfirm:a,onCancel:r,value:i,className:s,defaultValue:l,max:c}=t,d=o((()=>new Date(U(l).valueOf()+na)),[l]);return e(Z,{className:`${Ua["date-picker-mobile"]} ${s}`,visible:n,confirmText:"Done",cancelText:"Cancel",precision:"minute",onCancel:r,onConfirm:a,min:new Date,max:c,value:i,defaultValue:d})}function Ha(){return Ha=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ha.apply(null,arguments)}var Wa=function(e){return a.createElement("svg",Ha({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"#ACB8B6",viewBox:"0 0 24 24"},e),Va||(Va=a.createElement("path",{d:"M19 4h-2V3a1 1 0 0 0-2 0v1H9V3a1 1 0 0 0-2 0v1H5a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V7a3 3 0 0 0-3-3m1 15a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-7h16zm0-9H4V7a1 1 0 0 1 1-1h2v1a1 1 0 0 0 2 0V6h6v1a1 1 0 0 0 2 0V6h2a1 1 0 0 1 1 1z"})))};const za=[{label:"1 hour",value:"1 hours"},{label:"6 hours",value:"6 hours"},{label:"1 day",value:"24 hours"},{label:"3 days",value:"72 hours"},{label:"7 days",value:"168 hours"},{label:"1 month",value:"1 months"},{label:"3 months",value:"3 months"},{label:"6 months",value:"6 months"},{label:"custom",value:"custom"}];var Ga={time:"Duration-module_time__uVbEk",timeBorder:"Duration-module_timeBorder__6msYk"};function qa(a){const{expirationType:r,setExpirationType:i,selectedDate:s,onSelectDateHandler:l,errorTip:d,mobileDateVisible:u,setMobileDateVisible:f,optionListArr:h}=function({onChange:e,defaultExpirationData:t,checkDateValidate:n}){const a=o((()=>t&&t?.type?t.showPrevious?"previous":"date"===t.type?"custom":`${t?.value} ${t?.type}`:""),[t]),r="date"===t?.type?U(t?.value):U(),[i,s]=c(a||"6 months"),[l,d]=c(r),[u,f]=c(!!t?.showPrevious),[h,p]=c(za.slice(0)),[g,y]=c(!1),[_,N]=c();K((()=>{t?.showPrevious&&p((e=>[...e,{label:"Previous Listing",value:"previous"}]))})),m((()=>{if(!e)return;if("custom"===i)return void e({type:"date",value:U(l).toDate()});if("previous"===i)return void e({type:"date",value:U(r).toDate(),showPrevious:!0});const[t,n]=String(i).split(" ");!n||!t||e({type:n,value:t})}),[i,l,e]),m((()=>{if("previous"===i){const e=U(r);d(e),b(e)}const[e,t]=String(i).split(" ");if(!t||!e)return;const n=U().add(Number(e),t);d(n),b(n)}),[i]);const b=e=>{if(n){const t=n(e);return void N(t)}const t=e.diff(U()),a=U.duration(t).asMinutes(),r=Math.floor(U.duration(t).asMonths());N(a<15?"The listing duration should be at least 15 minutes.":r>6?"The listing duration should be no more than 6 months.":"")};return{selectedDate:l,setSelectedDate:d,expirationType:i,setExpirationType:s,mobileDateVisible:g,setMobileDateVisible:y,onSelectDateHandler:e=>{s("custom"),d(e),b(e),f(!1)},errorTip:_,showPreviousText:u,optionListArr:h}}(a),p=n=>t("div",{className:"flex items-center",children:[e(Wa,{className:"fill-textPrimary"}),e("span",{className:"ml-2 text-textPrimary",children:n})]});return t("div",{className:"mt-6",children:[t("span",{className:"font-medium text-textPrimary text-lg rounded-lg",children:["Duration",a.tooltip?e(w,{title:a.tooltip,children:e(J,{className:"text-base ml-1"})}):null]}),t("div",{className:"mt-4 flex -mx-2 flex-col",children:[e(La,{getPopupContainer:e=>e,className:"!mx-2 !h-[56px] ",value:r,optionLabelProp:"label",onChange:i,children:h.map((t=>e(Pa,{value:t.value,label:p(t.label),children:e("span",{children:t.label})},t.value)))}),(()=>{const a=U().add(6,"months").toDate();return t(n,{children:[e("div",{className:Ga.timeBorder,onClick:()=>{f(!0)},children:e("span",{className:Ga.time,children:U(s).format("YYYY/MM/DD hh:mm a")})}),e($a,{visible:u,onCancel:()=>{f(!1)},onConfirm:e=>{l(U(e)),f(!1)},value:U(s).toDate(),defaultValue:U(s).toDate(),max:a})]})})()]}),d?t("div",{className:"mt-2 text-xs text-error flex justify-between",children:[e("span",{}),e("span",{children:d})]}):null]})}var Ka="index-module_sale-modal-custom__TnlMy";var Ja={err:"SetSellItemNumber-moudule_err__BmH8W",textErr:"SetSellItemNumber-moudule_textErr__FWyCG",quantity:"SetSellItemNumber-moudule_quantity__jVeHS",available:"SetSellItemNumber-moudule_available__xZB4q"};function Ya(n){const{maxNumber:a,inputChangeHandler:r,value:i,status:s}=function({onChange:e,maxNumber:t}){const[n,a]=c(),[r,i]=c(),s=e=>{const n=Number(e)?Number(e)>Number(t)?"error":"":"error";i(n)};return{maxNumber:t,inputChangeHandler:t=>{const{target:n}=t;let r=String(n.value||"").replaceAll(",","");r=r.replaceAll(".","").slice(0,6),e&&e(r),a(r),s(r)},value:n,status:r}}(n);return t("div",{className:"mt-6",children:[e("span",{className:Ja.quantity,children:"Quantity of Items"}),t("div",{className:"mt-4 relative",children:[e(qt,{size:"large",allowClear:!0,value:Ke(i||""),status:s,onKeyDown:e=>{/\d|\.|Backspace|ArrowRight|ArrowLeft|ArrowUp|ArrowDown/.test(e.key)||e.preventDefault()},onChange:r,placeholder:"Enter the quantity of items to list"}),t("span",{className:Ja.available,children:[at(a)," available"]})]}),e("div",{className:Ja.err,children:e("span",{className:Ja.textErr,children:"error"!==s?"":"Please enter a correct quantity."})})]})}const Za=h.create((function({nftInfo:n,type:a="edit",defaultData:r}){const i=p();ra(i);const{nftSaleInfo:s,onCompleteListingHandler:l,listingBtnDisable:o,listingPrice:c,listingUSDPrice:d,setListingPrice:m,setDuration:u,itemsForSell:f,setItemsForSell:h,availableItemForSell:g}=wa(n,i,a,r),y=e(we,{type:"primary",size:"ultra",className:"w-[256px]",disabled:o,onClick:l,children:"Complete Listing"});return t(Ne,{className:Ka,open:i.visible,onOk:i.hide,onCancel:i.hide,afterClose:i.remove,destroyOnClose:!0,title:""+("add"===a?"List for Sale":"Edit Listing"),footer:y,children:[e(ft,{image:s?.logoImage||"",collectionName:s?.collectionName,nftName:s?.tokenName,item:Xe(f,"item"),priceTitle:"Listing Price Per Item",price:`${c?.price?Ke(c?.price):"--"} ELF`,usdPrice:d?Ze(d):"$ --"}),e(Ya,{onChange:e=>h(Number(e)),maxNumber:g}),e(ja,{floorPrice:s?.floorPrice,lastSalePrice:s?.lastDealPrice,onChange:m,title:"Set a Price Per Item",defaultPrice:c.price}),e(qa,{onChange:u,defaultExpirationData:r?.duration}),e(Ta,{listingPrice:c?.price||"",itemsForSell:f})]})}));function Xa(e){const{nftInfo:t}=e,n=p(Za),[a,r]=c(),{listedNFTInfoList:i}=va(t);return m((()=>{const e=function(e,t){if(!e?.length)return;const n=e.slice(0).sort(((e,t)=>new $(e.price.amount).comparedTo(new $(t.price.amount))))[0];return{listingPrice:{price:$(n.price.amount).dividedBy(10**8).toNumber(),token:{symbol:"ELF",tokenId:"ELF",decimals:8}},duration:{type:"date",value:new Date(1e3*(Number(n?.duration?.startTime?.seconds||0)+60*Number(n?.duration?.durationMinutes||0)+3600*Number(n?.duration.durationHours||0))),showPrevious:t},itemsForSell:Number(n.quantity)}}(i,!0);r(e)}),[t]),{sell:d((()=>{n.show({nftInfo:t,type:"add",defaultData:a})}),[n,t,a])}}h.create((function({nftInfo:n,type:a="add",defaultData:r}){const i=p();ra(i);const{nftSaleInfo:s,onCompleteListingHandler:l,listingBtnDisable:o,listingPrice:c,listingUSDPrice:d,setListingPrice:m,setDuration:u,itemsForSell:f}=wa(n,i,a,r),h=e(we,{type:"primary",size:"ultra",className:"w-[256px]",disabled:o,onClick:l,children:"Complete Listing"}),g="edit"===a?"Set a New Price":"Set a Price",y="edit"===a?"If you want to raise the listing price, you need to first cancel any existing listings at a lower price. Listing cancellation will cost transaction fees.":"",_="edit"===a?"If you want to reduce the listing duration, you need to first cancel any existing listings with a longer duration. Listing cancellation will cost transaction fees.":"";return t(Ne,{open:i.visible,onOk:i.hide,onCancel:i.hide,afterClose:i.remove,destroyOnClose:!0,title:""+("add"===a?"List for Sale":"Edit Listing"),footer:h,className:Ka,children:[e(ft,{image:s?.logoImage||"",collectionName:s?.collectionName,nftName:s?.tokenName,item:Xe(f,"item"),priceTitle:"Listing Price",price:`${c?.price?Ke(c?.price):"--"} ELF`,usdPrice:d?Ze(d):"$ --"}),e(ja,{floorPrice:s?.floorPrice,lastSalePrice:s?.lastDealPrice,onChange:m,title:g,tooltip:y,defaultPrice:c?.price}),e(qa,{onChange:u,defaultExpirationData:r?.duration,tooltip:_}),e(Ta,{listingPrice:c?.price})]})}));class er{constructor(){this.manager={}}static getInstance(){return er.instance||(er.instance=new er),er.instance}setLogin(e){this.manager.loginFunction=e}}function tr(e){const{isLogin:t,login:n}=e,[{isLogin:a},{dispatch:r}]=se();m((()=>{r({type:"setLoginStatus",payload:{isLogin:t}})}),[t]),m((()=>{er.getInstance().setLogin(n)}),[n])}const nr=({name:t})=>{const{sell:n}=Xa({nftInfo:{tokenName:"SGRTEST-8251GEN9",nftCollection:{tokenName:"TestSchrödinger",logoImage:"https://forest-testnet.s3.ap-northeast-1.amazonaws.com/1721652551482-a.jpg"},chainId:"tDVW",nftSymbol:"SGRTEST-8251",id:"tDVW-SGRTEST-8251",previewImage:"https://forest-testnet.s3.amazonaws.com/Forest-test/042452e788c39acbe30f10cec2245e35538d2e13c490a9a62fd5eb0c2c45f95b_2iJ4dajvT7f34HkGr7LsUrrFdyyuPr3A1y7rMwfCzrufuiAido_1721652912027.png"}});return m((()=>{}),[]),e("div",{className:"test text-blue-500",onClick:()=>{n()},children:"show"})};var ar,rr="ExploreTab_custom__tabs__0Jes-";function ir(t){return e(E,{...t,className:rr})}function sr(){return sr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},sr.apply(null,arguments)}var lr,or=function(e){return a.createElement("svg",sr({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 18 18"},e),ar||(ar=a.createElement("g",{stroke:"#5C6764",strokeLinejoin:"round",strokeWidth:1.5},a.createElement("path",{d:"M8.438 14.063a5.625 5.625 0 1 0 0-11.25 5.625 5.625 0 0 0 0 11.25Z"}),a.createElement("path",{strokeLinecap:"round",d:"m12.938 12.938 2.812 2.812"}))))};function cr(){return cr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},cr.apply(null,arguments)}var dr=function(e){return a.createElement("svg",cr({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 18 18"},e),lr||(lr=a.createElement("g",{stroke:"#5C6764",strokeLinecap:"round",strokeWidth:1.6},a.createElement("path",{d:"m4.404 13.596 9.193-9.192M4.404 4.404l9.193 9.192"}))))};var mr,ur=u((function(t,n){return e(qt,{placeholder:"Search a collection name",...t,ref:n,prefix:e(or,{}),allowClear:{clearIcon:e(dr,{})}})})),fr={collection__search:"styles-module_collection__search__xeG-C",collapsed__button:"styles-module_collapsed__button__Mx1Dr",collapsed__text:"styles-module_collapsed__text__KVUzi",size_container:"styles-module_size_container__g9yT3","btn-icon":"styles-module_btn-icon__LpT2W",active:"styles-module_active__yEjpX"},hr={"base-items-select":"index_base-items-select__G5PyW"};function pr({dataSource:t,...n}){return e(La,{className:hr["base-items-select"],getPopupContainer:e=>e,...n,children:t?.data?.map?.((t=>e(Pa,{value:t.value,children:t.label},t.value)))})}function gr(){return gr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},gr.apply(null,arguments)}var yr,_r=function(e){return a.createElement("svg",gr({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24"},e),mr||(mr=a.createElement("g",{stroke:"#051D17",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2},a.createElement("rect",{width:17.25,height:17.25,x:3.375,y:3.375,rx:2}),a.createElement("path",{d:"M3.56 9.125h16.88M3.56 14.875h16.88M14.875 3.56v16.88M9.125 3.56v16.88"}))))};function Nr(){return Nr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Nr.apply(null,arguments)}var br,xr=function(e){return a.createElement("svg",Nr({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24"},e),yr||(yr=a.createElement("path",{stroke:"#1A1A1A",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.778 12h11M8.778 6h11M4.222 6h1M4.222 12h1M4.222 18h1M8.778 18h11"})))};function vr(){return vr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},vr.apply(null,arguments)}var wr=function(e){return a.createElement("svg",vr({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24"},e),br||(br=a.createElement("g",{stroke:"#051D17",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6},a.createElement("path",{d:"M4 8.125h2.302m13.698 0h-8.68M4 15.875h8.463m7.537 0h-2.317"}),a.createElement("circle",{cx:15.25,cy:15.875,r:2.45}),a.createElement("circle",{cx:8.75,cy:8.125,r:2.45}))))},Er={"filter-btn":"style_filter-btn__ZbJWF","btn-text":"style_btn-text__CyTMp","items-side-menu":"style_items-side-menu__pb5dJ","clear-all":"style_clear-all__mG4-G",close__button:"style_close__button__H9WKP","elf-dropdown-phone-dark":"style_elf-dropdown-phone-dark__3JkT9","fixed-left":"style_fixed-left__BJphI","collapsed-wrapper":"style_collapsed-wrapper__XwmaN"};function Ar({onClick:n,badge:a,showBadge:r}){return t("div",{className:Er["filter-btn"],onClick:n,children:[e(wr,{className:"w-[24px] h-[24px]"}),r?e("span",{className:" absolute left-8 -top-2 px-1.5 bg-textPrimary text-textWhite text-xs font-medium rounded-3xl",children:a}):null]})}function Cr(a){const{size:r=ve.small,hiddenFilter:i,hiddenSize:s,collapsed:l,searchParams:o,selectProps:c,sizeChange:d,collapsedChange:m,selectTagCount:u,extraInfo:f}=a;return t(n,{children:[t("div",{className:fr.collection__search,children:[i?null:t("div",{className:Q("flex justify-between items-center","mr-[12px]","w-auto"),children:[e(Ar,{onClick:m,badge:u||"",showBadge:!!u&&!0}),null]}),e("div",{className:Q("flex-1",!1,"search-bar"),children:e(ur,{...o})}),!1,!1]}),!s&&t("div",{className:"flex mb-[16px] base-select",children:[e(pr,{className:"flex-1",dataSource:Oe,...c}),t("div",{className:fr.size_container,children:[e("div",{className:Q(fr["btn-icon"],r===ve.details&&"bg-fillHoverBg"),onClick:()=>{d(ve.details)},children:e(xr,{className:"w-[24px] h-[24px]"})}),e("div",{className:Q(fr["btn-icon"],r===ve.small&&"bg-fillHoverBg"),onClick:()=>{d(ve.small)},children:e(_r,{className:"w-[24px] h-[24px]"})})]})]})]})}function Tr(e){const t=String(e).endsWith("-SEED-0")?"seed":"nft",[{chain:n},{dispatch:a}]=se(),r=function(e){if(!e)return{};const t=JSON.parse(decodeURI(e)),n={};return t?.[Qe.Traits]?.forEach?.((e=>{const t={type:be.Checkbox,data:(e.values||[]).map((e=>({label:e,value:e})))};n[`${Qe.Traits}-${e.key}`]=t})),n}(G().get("filterParams")),i=Je(n),s=Ye(t,n),[l,o]=c(Object.assign({},i,r)),{data:d}=D((()=>ln(e)),{refreshDeps:[e],cacheKey:`all-traits-info-${e}`,staleTime:3e5}),{data:m}=D((()=>on(e)),{refreshDeps:[e],cacheKey:`all-generation-info-${e}`,staleTime:3e5}),{data:u}=D((()=>{const t=e.endsWith("-SGRTEST-0")||e.endsWith("-SGR-0")?[{rarity:"Diamond"},{rarity:"Emerald"},{rarity:"Platinum"},{rarity:"Gold"},{rarity:"Silver"},{rarity:"Bronze"}]:[];return Promise.resolve({items:t})}),{refreshDeps:[e]});return{traitsInfo:d,generationInfos:m,rarityInfos:u,filterList:s,filterSelect:l,setFilterSelect:o,onFilterChange:e=>{o((t=>({...t,...e})))},clearAll:()=>{X(i,l)||o(i)},formatFilterToParams:qe}}const Ir=async(e,t,n)=>{if(!n)return t;const a=t.filter((e=>9===e.generation&&e.traitPairsDictionary?.length>=11));if(!a.length)return t;const r=a.map((e=>function(e){const t={"Weapon(Left Hand)":"Weapon","Accessory(Right Hand)":"Accessory",Wing:"Wings",Moustauch:"Mustache",Mustaches:"Mustache"};return[[e.slice(0,3).map((e=>t[e.key.trim()]||e.key.replace(/\(.*\)/,"").trim())),e.slice(0,3).map((e=>e.value.trim()))],e.length>3?[e.slice(3).map((e=>t[e.key.trim()]||e.key.replace(/\(.*\)/,"").trim())),e.slice(3).map((e=>e.value.trim()))]:[]]}(e.traitPairsDictionary)));let i=[];try{i=await(async e=>rn.post("probability/catsRank",e,sn))({address:rt(e,n),catsTraits:r})}catch(e){}return i?.length&&a.forEach(((e,t)=>{const n=i?.[t]?.rank;if(n.rank){let t=`${at(n.rank)}`;n.total&&(t+=` / ${at(n.total)}`),e._rankStrForShow=t}})),t},kr=async(e,t,n)=>{const a=await(async e=>rn.post("app/nft/composite-nft-infos",e))(t);try{const t=await Ir(e,a.items,n);a.items=t}catch(e){}return a};var Sr,Pr={"filter-btn":"style-module_filter-btn__bRjKP","btn-text":"style-module_btn-text__hgUmJ","items-side-menu":"style-module_items-side-menu__mul-n","clear-all":"style-module_clear-all__Yz9wz",close__button:"style-module_close__button__XD3YH","elf-dropdown-phone-dark":"style-module_elf-dropdown-phone-dark__oZ7s1","fixed-left":"style-module_fixed-left__F8wjG","collapsed-wrapper":"style-module_collapsed-wrapper__BSkvp"},Lr="index-module_close__me7Pp";function Mr({size:t="xl",onClose:n}){return e(_e,{className:`${Lr} ${{small:"",xs:"",xl:"w-[24px] h-[24px] ml-[16px]"}[t]}`,onClick:n})}function Fr(){return Fr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Fr.apply(null,arguments)}var Br=function(e){return a.createElement("svg",Fr({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24"},e),Sr||(Sr=a.createElement("g",{stroke:"#051D17",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6},a.createElement("path",{d:"M17.094 14.547 12 9.453M12 9.453l-5.094 5.094"}))))};function Dr(t){return e(T,{...t,expandIcon:e("div",{children:e(Br,{className:Q(Pr.menu__expand__icon)})}),className:`${Pr["items-side-menu"]}`,selectable:!1,mode:"inline",getPopupContainer:e=>e})}const Rr=({showDropMenu:a,items:r,onCloseHandler:i,doneChange:s,clearAll:l,titleTxt:c="Filter",...d})=>{const m=o((()=>t(n,{children:[e(A,{className:"!m-0 !mt-0 border-box"}),t("div",{className:"flex items-center px-2 py-4",children:[e(we,{size:"ultra",className:"flex-1 mx-2",onClick:l,children:"Clear All"}),e(we,{size:"ultra",className:"flex-1 mx-2",type:"primary",onClick:s,children:"Done"})]})]})),[l,s]);return e(C,{className:`${Pr["elf-dropdown-phone-dark"]} ${d.wrapClassName||""}`,placement:"top",maskClosable:!1,title:t("div",{className:"flex items-center justify-between pr-[20px]",children:[e("span",{className:"text-[24px] leading-[32px] font-medium text-[var(--text-item)]",children:c}),e(Mr,{onClose:i})]}),closeIcon:null,push:!1,open:a,height:"100%",footer:m,headerStyle:{paddingLeft:16,height:64,paddingTop:24,paddingBottom:24,paddingRight:0},bodyStyle:{padding:0},footerStyle:{padding:0,border:"none"},onClose:i,children:e("div",{className:"px-[8px] pt-[16px]",children:e(Dr,{items:r,...d})})})};var Or="style-module_checkbox__hqb85";var Qr,jr,Vr=f((function({dataSource:n,defaultValue:a,onChange:r,showSelectAll:i}){const s=d((e=>{if(!n)return;const t=n?.data.filter((t=>e.some((e=>e===t.value))));r?.({[n.key]:{type:be.Checkbox,data:t}})}),[n,r]),l=o((()=>(n?.data||[]).map((n=>t(I,{className:"px-[8px] py-[16px] !flex justify-between items-center",span:24,children:[e(k,{value:n.value,disabled:n.disabled,children:n.label}),n.extra?e("span",{className:"mr-2 text-sm font-medium text-textSecondary",children:Ke(n.extra)}):null]},n.value)))),[n]),c=o((()=>a?.map((e=>e.value))),[a]),m=(n?.data||[]).length>0&&n?.data?.length===c?.length,u=(c||[]).length>0&&(c||[]).length<(n?.data||[]).length;return t("div",{className:"flex flex-col",children:[i?e(k,{className:"!ml-2 text-textPrimary",indeterminate:u,checked:m,onChange:e=>{if(!n)return;const t=e.target.checked?n?.data:[];r?.({[n.key]:{type:be.Checkbox,data:t}})},children:"All"}):null,e(k.Group,{value:c,className:Or,onChange:s,children:e(S,{children:l})})]})})),Ur={"range-wrapper":"RangeSelect-module_range-wrapper__so5Vh","range-input":"RangeSelect-module_range-input__p0f0E",pricing:"RangeSelect-module_pricing__dqmVH",pricing__text:"RangeSelect-module_pricing__text__ykFAI","range-select":"RangeSelect-module_range-select__N9ZvM","range-button":"RangeSelect-module_range-button__iYmrK","range-select-apply":"RangeSelect-module_range-select-apply__sOec0","range-default-button":"RangeSelect-module_range-default-button__I0GzM"};function $r(n){const{defaultValue:a,errorMessage:r,AMOUNT_LENGTH:i=11,minStatus:s,maxStatus:l,decimals:o,prefixIcon:d,onValueChange:u}=n,[f,h]=c(""),[p,g]=c("");m((()=>{h(a?.[0]?.min??""),g(a?.[0]?.max??"")}),[a]);const y=e=>{let{value:t}=e.target;if(t.startsWith("-")||t.startsWith("."))return"";t=t.replace(/^0*(\d+(\.\d*)?)$/,"$1");const n=new $(t);if(-1!==n.e&&t.startsWith("0")&&!t.startsWith("0.")&&"0"!==t)return"0";if(!n.s)return!t.startsWith(".")&&t.includes(".")?(t.split(".")[0]+".").slice(0,i):t.slice(0,i);{const[e,a]=t.split(".");if((n.e||0)>i-1)return t.slice(0,i);if(0===o)return e;if(a?.length>=o)return n.toFixed(+o,$.ROUND_DOWN)}return t};return m((()=>{u?.(f,p)}),[f,p,u]),t("div",{className:"w-full",children:[t("div",{className:`${Ur["range-wrapper"]} flex justify-between items-center`,children:[d,e(qt,{className:Q(Ur["range-input"]),placeholder:"Min",value:f,status:s,onChange:e=>{const t=y(e);h(t)}}),e("span",{className:"text-[var(--color-primary)] text-[16px] leading-[24px] font-medium  ml-[8px] mr-[8px]",children:"to"}),e(qt,{className:Q(Ur["range-input"]),placeholder:"Max",value:p,status:l,onChange:e=>{const t=y(e);g(t)}})]}),(s||l)&&e("div",{className:"text-[var(--message-error)] text-[16px] font-medium leading-[16px] pt-[4px]",children:r})]})}function Hr(){return Hr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Hr.apply(null,arguments)}var Wr=function(e){return a.createElement("svg",Hr({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24"},e),Qr||(Qr=a.createElement("circle",{cx:12,cy:12,r:11.738,fill:"#fff",stroke:"#DEE2E8",strokeWidth:.525})),jr||(jr=a.createElement("path",{fill:"#266CD3",fillRule:"evenodd",d:"M13.096 7.752a1.476 1.476 0 1 0 0-2.952 1.476 1.476 0 0 0 0 2.952M19.76 12a3.002 3.002 0 1 1-6.004 0 3.002 3.002 0 0 1 6.004 0m-5.19 5.725a1.476 1.476 0 1 1-2.95 0 1.476 1.476 0 0 1 2.95 0M5.54 7.853c-.433 1.145.178 2.443 1.323 2.875.763.28 1.577.127 2.162-.356a1.98 1.98 0 0 1 1.883-.255c.432.153.763.433.992.79l.025.05c.102.153.255.305.458.356a.886.886 0 0 0 1.145-.534.886.886 0 0 0-.534-1.145.84.84 0 0 0-.61 0A2.015 2.015 0 0 1 9.84 8.286l-.026-.051c0-.026 0-.051-.026-.051v-.05C9.61 7.42 9.127 6.81 8.39 6.555a2.163 2.163 0 0 0-2.85 1.297m1.323 5.42c-1.145.432-1.756 1.73-1.323 2.874.432 1.17 1.704 1.756 2.85 1.298.737-.255 1.22-.865 1.398-1.578v-.05c.026 0 .026-.026.026-.052l.025-.05a2.015 2.015 0 0 1 2.544-1.349.84.84 0 0 0 .611 0 .886.886 0 0 0 .534-1.145.886.886 0 0 0-1.145-.534c-.203.051-.356.204-.457.356l-.026.051c-.229.356-.56.636-.992.789a1.98 1.98 0 0 1-1.883-.255 2.2 2.2 0 0 0-2.162-.356",clipRule:"evenodd"})))};var zr=f((function({dataSource:n,maxCount:a,AMOUNT_LENGTH:r,decimals:i,defaultValue:s,onChange:l}){const u=0===i||i?i:4,[f,h]=c({...s?.[0]}),[p,g]=c(!0),[,y]=c(!0),[_,N]=c(!1),[b,x]=c(""),[v,w]=c(""),[E,A]=c(""),C=d(((e,t)=>{if(g(!0),e||x(""),t||w(""),!e&&!t)return void A("");y(!1),h({min:String(e),max:String(t)});const n=new $(e),r=new $(t);return e&&!n.s||t&&!r.s?(e&&!n.s&&x("error"),t&&!r.s&&w("error"),void A("Numeric inputs only")):new $(n).gt(r)||new $(r).lt(n)?(new $(n).gt(r)&&x("error"),new $(r).lt(n)&&w("error"),void A("Min shouldn't be greater than max")):a&&(new $(e).gt(30)||new $(t).gt(30))?(new $(e).gt(30)&&x("error"),new $(t).gt(30)&&w("error"),void A(`The Symbol Length must be no more than ${a}`)):(x(""),w(""),A(""),void g(!1))}),[a]);m((()=>{h({...s?.[0]})}),[s]);const T=d((()=>{if(!f||!n)return;const e={[n.key]:{type:be.Range,data:[f]}};g(!0),N(!0),l?.(e)}),[n,l,f]),I=o((()=>[f]),[f]),k=d((()=>{if(n&&(JSON.stringify(s)===JSON.stringify([{min:"",max:""}])?g(!0):g(!1),y(!0),h({min:"",max:""}),_)){const e={[n.key]:{type:be.Range,data:[{min:"",max:""}]}};l?.(e),N(!1)}}),[n,s,_,l]);return t("div",{className:Ur["range-select"],children:[e("div",{className:"mb-[16px] flex",children:e($r,{prefixIcon:"price"===n?.key.toLowerCase()&&t("div",{className:Ur.pricing,children:[e(Wr,{className:"mr-[8px]"}),e("span",{className:Ur.pricing__text,children:"ELF"})]}),minStatus:b,maxStatus:v,AMOUNT_LENGTH:r,errorMessage:E,maxCount:a,decimals:u,defaultValue:I,onValueChange:C})}),t("div",{className:Ur["range-button"],children:[e(we,{size:"large",className:Q(Ur["range-select-apply"],Ur["range-default-button"]),onClick:k,children:"Clear"}),e(we,{size:"large",className:Q(Ur["range-select-apply"],Ur["range-primary-button"]),disabled:p,type:"primary",onClick:T,children:"Apply"})]})]})})),Gr="style-module_search-list__mRW1a";function qr({dataSource:t=[],values:n=[],parentKey:a,onChange:r}){const[i,s]=c(t.slice(0)),[l,o]=c(!1),d=54*Math.min(i.length,10);return e(P,{className:Gr,split:!1,itemLayout:"vertical",loading:l,locale:{emptyText:"No such traits found"},header:e(qt,{size:"medium",prefix:e(or,{}),allowClear:{clearIcon:e(dr,{})},placeholder:"Search",onChange:async e=>{o(!0);const n=e.target.value.trim().toLowerCase();let a=t;n&&(a=t.filter((e=>String(e.value).toLowerCase()===n))),await it(300),o(!1),s(a)}}),children:i.length?e(ee,{data:i,height:d,itemHeight:54,itemKey:"value",children:i=>e(P.Item,{extra:Ke(i.itemsCount),children:e(k,{value:i.value,checked:n.includes(i.value),onChange:e=>{((e,i)=>{const s=n.findIndex((t=>t===e));let l=[...n];i&&-1===s&&(l=n.concat(e)),!i&&s>-1&&(l=n.slice(0,s).concat(n.slice(s+1)));const o=t?.filter((e=>l.some((t=>t===e.value)))).map((e=>({value:e.value,label:e.value})));r?.({[`${Qe.Traits}-${a}`]:{type:be.Checkbox,data:o}})})(e.target.value,e.target.checked)},children:i.value},i.value)})}):null})}const Kr=e=>({[be.Checkbox]:Vr,[be.Range]:zr,[be.SearchCheckbox]:qr}[e]);var Jr=f((function({children:t,...n}){return e(w,{...n,children:t})}));const Yr=(n,a,r)=>{const i=n.map((n=>{const i=(r?.[`${Qe.Traits}-${n.key}`]?.data||[]).map((e=>e.value));return{key:n.key,label:t("div",{className:"flex justify-between text-textPrimary",style:{marginRight:"40px"},children:[e("span",{children:n.key}),e("span",{children:n.valueCount})]}),children:[{key:`${n.key}-1`,label:e(qr,{parentKey:n.key,values:i,onChange:a,dataSource:n.values},n.key)}]}}));return{key:Qe.Traits,label:Qe.Traits,children:i}},Zr=(t,n,a)=>(a[Qe.Collections].data.map((e=>e.value)),{key:Qe.Collections,label:Qe.Collections,children:[{key:`${Qe.Collections}-1`,label:e("div",{children:"1"})}]});function Xr({clearAll:n,onClose:a,open:r,traitsInfo:i,generationInfos:s,rarityInfos:l,mineInfos:c,collectionInfos:d,onFilterChange:m,filterSelect:u,filterList:f,mobileMode:h,pcRenderMode:p,toggleOpen:g}){const[{aelfInfo:y}]=se(),_=o((()=>{const n=[...f];if(!i?.length){const e=n.findIndex((e=>e.key===Qe.Traits));e>-1&&n.splice(e,1)}if(!s?.length){const e=n.findIndex((e=>e.key===Qe.Generation));e>-1&&n.splice(e,1)}if(!c?.length){const e=n.findIndex((e=>e.key===Qe.Mine));e>-1&&n.splice(e,1)}if(!d?.length){const e=n.findIndex((e=>e.key===Qe.Collections));e>-1&&n.splice(e,1)}if(!l?.length){const e=n.findIndex((e=>e.key===Qe.Rarity));e>-1&&n.splice(e,1)}return n?.map((n=>{const a=u[n.key]?.data;if(n.key===Qe.Traits)return Yr(i||[],m,u);if(n.key===Qe.Collections)return Zr(d||[],m,u);n.key===Qe.Generation&&(n.data=(s||[]).map((e=>({value:`${e.generation}`,label:`${e.generation}`,extra:`${e.generationItemsCount}`})))),n.key===Qe.Mine&&(n.data=(c||[]).map((e=>({value:`${e.value}`,label:`${e.value}`,extra:"Mine"}))));const r=Kr(n.type);return n.key===Qe.Rarity?(n.data=(l||[]).map((e=>({value:`${e.rarity}`,label:`${e.rarity}`}))),{key:Qe.Rarity,label:t("div",{className:" inline-flex items-center",children:[e("span",{className:" text-sm font-semibold text-textPrimary",children:"Rarity"}),e(Jr,{overlayInnerStyle:{borderRadius:"6px"},title:t("div",{className:" flex flex-col gap-y-1",children:[e("span",{className:" text-textDisable text-xs",children:"Rarity rank by Schrödinger."}),e("a",{href:y?.officialWebsiteOfSchrodinger,target:"_blank",rel:"noreferrer",children:e("span",{className:" text-xs text-textWhite font-medium cursor-pointer hover:text-brandHover",children:"Learn more"})})]}),children:e(Y,{className:"text-textSecondary ml-2"})})]}),children:[{key:`${Qe.Rarity}-1`,label:e(r,{dataSource:n,defaultValue:a,onChange:m,showSelectAll:!0})}]}):{key:n.key,label:n.title,children:[{key:n.key+"-1",label:e(r,{dataSource:n,defaultValue:a,onChange:m,...n.maxCount&&{maxCount:n.maxCount},...n.AMOUNT_LENGTH&&{AMOUNT_LENGTH:n.AMOUNT_LENGTH},...(n.decimals||0===n.decimals)&&{decimals:n.decimals}})}]}}))}),[u,f,i,s,c,d]);return h?e(Rr,{items:_,defaultOpenKeys:Object.values(Qe),clearAll:()=>{a(),n()},doneChange:a,showDropMenu:r,onCloseHandler:a}):e(L.Sider,{collapsed:!r,collapsedWidth:0,width:r?360:0,trigger:null,className:Q("!bg-transparent m-0",r?"!mr-8":"!mr-0",Pr["fixed-left"])})}var ei,ti="ExploreItem-module_layout__WdYmc",ni={"items-card-wrapper":"style-module_items-card-wrapper__QZoFT",card__content:"style-module_card__content__boCUv",nft__symbol:"style-module_nft__symbol__JuwE2",token__name:"style-module_token__name__SLVq2",token__price:"style-module_token__price__ZmDtx",token__label:"style-module_token__label__W4OAQ",token__price__text:"style-module_token__price__text__Yd5TH",mark:"style-module_mark__DAawf",item__wrapper:"style-module_item__wrapper__1e8Bb",nft__list_wrapper:"style-module_nft__list_wrapper__i6JYD"},ai={bronze:"styles-module_bronze__tYc-y",silver:"styles-module_silver__2wxy5",gold:"styles-module_gold__3QSVz",platinum:"styles-module_platinum__y6i-W",halcyon:"styles-module_halcyon__m-TDL",diamond:"styles-module_diamond__qMX2l",white:"styles-module_white__mcflj"};function ri(){return ri=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ri.apply(null,arguments)}var ii,si=function(e){return a.createElement("svg",ri({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 10 10"},e),ei||(ei=a.createElement("path",{fill:"#AA98FF",d:"M4.748 1.406a.28.28 0 0 1 .504 0l1.062 2.152 2.374.345a.28.28 0 0 1 .155.479L7.125 6.056l.406 2.365a.28.28 0 0 1-.407.296L5 7.601 2.876 8.717a.28.28 0 0 1-.407-.296l.406-2.365-1.718-1.674a.28.28 0 0 1 .155-.479l2.375-.345z"})))};function li(){return li=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},li.apply(null,arguments)}var oi,ci=function(e){return a.createElement("svg",li({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 6 6"},e),ii||(ii=a.createElement("path",{fill:"#AA98FF",d:"M1.586.525a.25.25 0 0 0-.354 0l-.707.707a.25.25 0 0 0 0 .354L1.939 3 .525 4.414a.25.25 0 0 0 0 .354l.707.707a.25.25 0 0 0 .354 0L3 4.06l1.414 1.414a.25.25 0 0 0 .354 0l.707-.707a.25.25 0 0 0 0-.354L4.06 3l1.414-1.414a.25.25 0 0 0 0-.354L4.768.525a.25.25 0 0 0-.354 0L3 1.939z"})))};!function(e){e.Bronze="Bronze",e.Silver="Silver",e.Gold="Gold",e.Platinum="Platinum",e.Emerald="Emerald",e.Diamond="Diamond"}(oi||(oi={}));const di={[oi.Bronze]:ai.bronze,[oi.Silver]:ai.silver,[oi.Gold]:ai.gold,[oi.Platinum]:ai.platinum,[oi.Emerald]:ai.halcyon,[oi.Diamond]:ai.diamond};function mi({text:n,className:a,theme:r="black"}){const i=o((()=>{const a=n.split(",");return a[0]===oi.Diamond?t("div",{className:"flex items-center",children:[e("span",{className:"mr-1",children:a[0]}),e(si,{}),e(ci,{}),e("span",{children:a[1]})]}):`${a[0]} ${a[2]}`}),[n]),s=o((()=>{for(const e in di)if(n.includes(e))return di[e]}),[n]);return e("div",{className:Q("px-1 py-[1px] rounded-sm bg-fillMask1 flex justify-center items-center text-xxs font-semibold border-[1px] border-solid w-fit",s,a,"white"===r?ai.white:""),children:i})}var ui,fi="style-module_empty__table__A0f30";!function(e){e.nft="nft",e.collection="collection"}(ui||(ui={}));const hi={[ui.collection]:{text:"collections",button_text:"Collections"},[ui.nft]:{text:"NFTs",button_text:"items"}};var pi=f((function({searchText:n,type:a=ui.collection,clearFilter:r}){return e("div",{className:fi,children:e(M,{image:M.PRESENTED_IMAGE_SIMPLE,imageStyle:{height:n?0:80},description:e("div",{className:"text-[var(--table-sort-hover)] text-[16px] font-medium leading-[24px] mt-[8px]",children:n?`No ${hi[a].text} found`:`No ${hi[a].text} yet`}),children:n&&t(we,{size:"ultra",type:"primary",onClick:r,children:["Back to All ",hi[a].button_text]})})})}));function gi({dataSource:a,className:r,priceClassName:i,onClick:s}){const l=o((()=>"mp3"===a?.fileExtension?"audio":"mp4"===a?.fileExtension?"video":"image"),[a?.fileExtension]),c=a?.price||a?.listingPrice;return e(te,{href:`/detail?symbol=${a?.nftSymbol}&from=all&source=telegram`,children:e(F,{className:`${ni["items-card-wrapper"]} h-full ${r}`,onClick:s,cover:t(n,{children:["image"!==l&&e("div",{className:ni.mark,children:a?.fileExtension?.toUpperCase()}),t("div",{className:ni.item__wrapper,children:[e(ut,{className:" !rounded-t-lg w-full aspect-square",width:"100%",src:a?.previewImage||""}),a?.describe?e("div",{className:"absolute top-3 right-3",children:e(mi,{text:a?.describe})}):null]})]}),children:t("div",{className:ni.card__content,children:[e("div",{className:ni.nft__symbol,children:a?.nftSymbol}),e("div",{className:ni.token__name,children:a?.tokenName}),t("div",{className:Q(ni.token__price,i),children:[e("span",{className:ni.token__label,children:a?.priceDescription||"Price"}),e("span",{className:ni.token__price__text,children:c&&c>=0?Ke(c)+" ELF":"--"})]})]})})})}function yi({sizes:t,collapsed:n,dataSource:a,hasSearch:r,clearFilter:i,loading:s,ELFToDollarRate:l}){return e("div",{id:"nft-list",className:ni.nft__list_wrapper,children:e(P,{grid:{gutter:16,column:2},locale:{emptyText:e(pi,{type:Ue.nft,searchText:r?"search":"",clearFilter:i&&i})},loading:s,dataSource:a,renderItem:t=>e(P.Item,{children:e(gi,{hiddenActions:!1,dataSource:t},t?.id)})})})}var _i=()=>{};function Ni({nftCollectionId:a,ELFToDollarRate:r}){const i=a.endsWith("-SEED-0")?"seed":"nft",[{wallet:s},{dispatch:l}]=se(),d=W(),u=G().get("list")||ve.small,[f,h]=c(u),[p,g]=c(!1),{filterList:y,filterSelect:_,traitsInfo:N,generationInfos:b,rarityInfos:x,onFilterChange:v,clearAll:w}=Tr(a),[E,A]=c(""),[C,T]=c(""),{run:I}=O((e=>{A(e.trim())}),{wait:500}),k=e=>{T(e.target.value),I(e.target.value)},[S,P]=c(Oe.data[0].value),M=o((()=>{const e=qe(_);return{CollectionId:a,CollectionType:i,Sorting:S,SearchParam:E,...e}}),[_,E,a,S,i]),F=o((()=>((e,t)=>{const n=[];for(const[t,a]of Object.entries(e)){const{data:e,type:r}=a;if(r===be.Checkbox)e.forEach((e=>{e.disabled||("object"==typeof e?n.push({type:t,...e}):n.push({type:t,value:e,label:e}))}));else if(r===be.Range){const{min:a,max:r}=e[0];if(a||r){const e=a&&r?`${Ke(a)}-${Ke(r)}`:0!==a&&!a||r?`≤${Ke(r)}`:`≥${Ke(a)}`;n.push({type:t,label:(t===Qe.Price?"":"Length: ")+e+(t===Qe.Price?" ELF":"")})}}else r===be.SearchCheckbox&&e.forEach((e=>{e.disabled||n.push({type:t,...e})}))}return t&&n.push({type:"search",label:t}),n})(_,E.trim())),[_,E]),{data:B,loading:D,loadingMore:Q,noMore:j}=function({pageSize:e=32,params:t,userWalletAddress:n}){const[{wallet:a,aelfInfo:r},{dispatch:i}]=se(),{data:s,loading:l,loadingMore:o,noMore:c}=R((a=>{const i=a?._page?a._page+1:1;return kr(r,{...t,SkipCount:(i-1)*e,MaxResultCount:e},n).then((e=>({list:e.items,totalCount:e.totalCount,_page:i}))).catch((()=>({list:[],totalCount:a?.totalCount||0,_page:i})))}),{target:document.getElementById("nft-list"),isNoMore:t=>!t?.list.length||t._page*e>t.list.length||t?.list?.length>=t?.totalCount,reloadDeps:[n,t]});return{data:s,loading:l,loadingMore:o,noMore:c}}({params:M,userWalletAddress:s?.address});return m((()=>{h(u)}),[u]),t(n,{children:[e(Cr,{size:f,collapsed:p,collapsedChange:()=>g(!p),searchParams:{placeholder:"Search for names or token symbols",value:C,onChange:k,onPressEnter:k},sizeChange:e=>{h(e);const t=new URL(location.href);t.searchParams.set("list",e),d.push(t.href)},selectTagCount:F.length,selectProps:{value:S,defaultValue:Oe.data[0].value,onChange:e=>{P(e)}}}),t(L,{className:ti,children:[e(Xr,{filterList:y,filterSelect:_,traitsInfo:N?.items,generationInfos:b?.items,rarityInfos:x?.items,open:!p,onClose:()=>{g(!0)},mobileMode:!0,onFilterChange:v,clearAll:w}),t(L,{className:ti,children:[e("div",{className:" sticky top-36 z-[1] bg-fillPageBg overflow-hidden h-0 lgTW:h-auto"}),B?.totalCount?t("div",{className:"text-base font-medium text-textPrimary pb-2",children:[at(B.totalCount)," ",B.totalCount<2?"result":"results"]}):null,e(yi,{dataSource:B?.list||[],collapsed:p,sizes:f,loading:D,ELFToDollarRate:r}),Q?e(_i,{}):null,j&&B?.list?.length&&!D?e("div",{className:"text-center w-full text-textDisable font-medium text-base py-5",children:"No more data"}):null]})]})]})}const bi=t=>{const{nftCollectionId:n}=t,{ELFToDollarRate:a}=ea();return e("div",{className:"px-4 smTW:px-10",children:e(ir,{items:[{label:e("span",{className:Q("text-base font-semibold text-textSecondary","!text-textPrimary"),children:"Items"}),key:"items",children:e(Ni,{nftCollectionId:n,ELFToDollarRate:a})}],defaultActiveKey:"items"})})};export{bi as Collection,_n as ContractInstance,oe as ForestProvider,ae as Store,nr as Trade,ta as useBuy,se as useForestStore,tr as useLoginStatus,Xa as useSell};
//# sourceMappingURL=index.js.map
